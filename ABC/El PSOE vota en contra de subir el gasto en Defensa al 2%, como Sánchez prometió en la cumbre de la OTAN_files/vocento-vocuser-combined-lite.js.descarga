!function(e,o){"use strict";"v3"===vocento.vocuser.VERSION?e.returnExports=o():"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("ParamsVocUser",o):"object"==typeof exports?module.exports=o():e.returnExports=o()}(this,function(){"use strict";function e(){var e={subDomainSettings:{areapersonal:{bannedScreenSets:["Profile-web-rediseno"],service:"escaparate"},"areapersonal-predes":{bannedScreenSets:["Profile-web-rediseno"],service:"escaparate"},"areapersonal-des":{bannedScreenSets:["Profile-web-rediseno"],service:"escaparate"},oferplan:{wrapperVersion:"v1"},esquelas:{service:"esquelas"},escaparate:{wrapperVersion:"v3"},"":{wrapperVersion:"v4"},".":{wrapperVersion:"v4"},"desnlocal-vocuser":{wrapperVersion:"v4_local"},"desnlocal-vocuser-sevilla":{apiKey:"3_SmsPNgDvqtLypCPMo9VRAQS32NVvG8mkOk7U9f75THTmu0e_aAYHCE_y_HvNapxo",apiKeyParent:"3_uAdpOJ-r_2atDQZgKGBsge_W58duUHoAL_1pDkLvx1csm4_3gpi0XY88J_aXQyJT"},"des-sevilla":{apiKey:"3_SmsPNgDvqtLypCPMo9VRAQS32NVvG8mkOk7U9f75THTmu0e_aAYHCE_y_HvNapxo",apiKeyParent:"3_uAdpOJ-r_2atDQZgKGBsge_W58duUHoAL_1pDkLvx1csm4_3gpi0XY88J_aXQyJT"},"pre-sevilla":{apiKey:"3_SmsPNgDvqtLypCPMo9VRAQS32NVvG8mkOk7U9f75THTmu0e_aAYHCE_y_HvNapxo",apiKeyParent:"3_uAdpOJ-r_2atDQZgKGBsge_W58duUHoAL_1pDkLvx1csm4_3gpi0XY88J_aXQyJT"},sevilla:{apiKey:"3_onq0tGtSGp2yKBgflBnPfIfxBOaKDWroI9xFl6U2JW3-siy2jHWr6_L3urBM6Ucy",apiKeyParent:"3_7ucBJitsjWEvaazgePADopwV_RMT53_QIqbagoyZxTC8biYbjvyx-SsOSekuyBOf"},"new-sevilla":{apiKey:"3_onq0tGtSGp2yKBgflBnPfIfxBOaKDWroI9xFl6U2JW3-siy2jHWr6_L3urBM6Ucy",apiKeyParent:"3_7ucBJitsjWEvaazgePADopwV_RMT53_QIqbagoyZxTC8biYbjvyx-SsOSekuyBOf"}},rutaCargaJavascriptsPorSubdominio:{esquelas:{rutaCargaJavascripts:"//cabeceras.vocento.com"},"desnlocal-vocuser":{rutaCargaJavascripts:window.location.host+"/js/pro/abc/"}},vocGroup:{ppll:["ideal","elcorreo","diariovasco","hoy","elcomercio","laverdad","eldiariomontanes","diariosur","lasprovincias","elnortedecastilla","degustalarioja","larioja","lomejordelvinoderioja","leonoticias","elbierzonoticias","bierzonoticias","sur","burgosconecta","canarias7","mujerhoy","salamancahoy","todoalicante"],abc:["abc","abcdesevilla","lavozdigital"]},media:{abc:{apiKey:"3_VjZL6dNEbebJWZu9Fa8JJuSZV00WJeDxEoQEbvVyi-0vOVjBGo7fwqGxuZRNOU5B",apiKeyParent:"3_7ucBJitsjWEvaazgePADopwV_RMT53_QIqbagoyZxTC8biYbjvyx-SsOSekuyBOf",group:"abc",service:"abc",service_movil:"abc_movil",wrapperVersion:"v4",cnameEnabled:!0,hasEcommerce:!0,enableGigyaITP:!0,ecommerce:{apiKey:"3_BbidppMedHeaCg2Bf_rwy-X3ekUhiVRQVNlPmJaXapQGdiALNmlQcX9c-6H8OUnz"}},abcdesevilla:{apiKey:"3_onq0tGtSGp2yKBgflBnPfIfxBOaKDWroI9xFl6U2JW3-siy2jHWr6_L3urBM6Ucy",apiKeyParent:"3_7ucBJitsjWEvaazgePADopwV_RMT53_QIqbagoyZxTC8biYbjvyx-SsOSekuyBOf",group:"abc",service:"sevilla",service_movil:"sevilla_movil",wrapperVersion:"v4",cnameEnabled:!0,hasEcommerce:!1,enableGigyaITP:!0},lavozdigital:{apiKey:"3_6cKmBW5TLyxsw5SarrTmPWREX4Mav6VDz-foMTHY13nMODyBvZei6sDNPsIclqCZ",apiKeyParent:"3_XWyywWTU18neJzO03rE8-NpuB2mrEUZ2LuiE4uSqRjpdnsIrQbdhflfwP78jtcms",group:"lavoz",service:"pl_lavoz_cadiz",service_movil:"lavozdigital_movil",wrapperVersion:"v4",cnameEnabled:!0,hasEcommerce:!1,enableGigyaITP:!0}},vocUserJs:{core:{"vocento-vocuser-combined-core":"vocento-vocuser-combined-core.js"},ppll:{},abc:{},site:{"vocento-vocuser-combined-siteflow":"vocento-vocuser-combined-siteflow.js"},v4:{},marketingAction:{VOCUSER_COREMARKETINGFLOW:"vocento.coreMarketingFlow.min.js"}}};return{version:function(){return"4.0.0"},getParamsVocUser:function(){return e},setEnvironment:function(e){return"string"!==e&&e&&0,"pro"},className:function(){return"ParamsVocuser"}}}return"v3"===vocento.vocuser.VERSION&&(window.Vocento="undefined"!=typeof Vocento&&Vocento?Vocento:{},Vocento.ParamsVocuser=e),e}),function(e,o){"use strict";"undefined"!=typeof vocento&&vocento&&void 0!==vocento.vocuser&&vocento.vocuser&&void 0!==vocento.vocuser.VERSION&&"v3"!==vocento.vocuser.VERSION?"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("ParamsOptionsVocUser",o):"object"==typeof exports?module.exports=o():e.returnExports=o():e.returnExports=o()}(this,function(){"use strict";function e(a){var s={local:{debug:!0,hasPaywall:!0,hasEcommerce:!0,hasActivatedBannedFakeEmails:!1,serviceCallEkosTechnicalSynchronized:!0,menuOnPlus:{hasClubDelSuscriptor:!0,hasApps:!0,hasBeneficios:!0,hasMiClub:!1,hasMisDispositivos:!0,misDispositivos:"Mis dispositivos"},abc:{enableCNAME:!0},burgosconecta:{menuOnPlus:{hasClubDelSuscriptor:!1,hasApps:!1,hasBeneficios:!1,hasMiClub:!1,hasMisDispositivos:!1,misDispositivos:"Mis dispositivos"}},xlsemanal:{newsletterActualidadXLSemanal:"actualidad_XLSemanal_0225",hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},madridfusion:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},pidentradas:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},canarias7:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},salamancahoy:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1,menuOnPlus:{hasClubDelSuscriptor:!1,hasApps:!1,hasBeneficios:!1,hasMiClub:!1,hasMisDispositivos:!1,misDispositivos:"Mis dispositivos"}},todoalicante:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1,menuOnPlus:{hasClubDelSuscriptor:!1,hasApps:!1,hasBeneficios:!1,hasMiClub:!1,hasMisDispositivos:!1,misDispositivos:"Mis dispositivos"}},elcorreo:{},diariovasco:{},mujerhoy:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1}},dev:{debug:!0,hasPaywall:!0,hasEcommerce:!0,hasActivatedBannedFakeEmails:!1,serviceCallEkosTechnicalSynchronized:!0,menuOnPlus:{hasClubDelSuscriptor:!0,hasApps:!0,hasBeneficios:!0,hasMiClub:!1,hasMisDispositivos:!0,misDispositivos:"Mis dispositivos"},abc:{enableCNAME:!0},burgosconecta:{menuOnPlus:{hasClubDelSuscriptor:!1,hasApps:!1,hasBeneficios:!1,hasMiClub:!1,hasMisDispositivos:!1,misDispositivos:"Mis dispositivos"}},xlsemanal:{newsletterActualidadXLSemanal:"actualidad_XLSemanal_0225",hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},madridfusion:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},pidentradas:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},canarias7:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},salamancahoy:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1,menuOnPlus:{hasClubDelSuscriptor:!1,hasApps:!1,hasBeneficios:!1,hasMiClub:!1,hasMisDispositivos:!1,misDispositivos:"Mis dispositivos"}},todoalicante:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1,menuOnPlus:{hasClubDelSuscriptor:!1,hasApps:!1,hasBeneficios:!1,hasMiClub:!1,hasMisDispositivos:!1,misDispositivos:"Mis dispositivos"}},elcorreo:{},diariovasco:{},mujerhoy:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1}},pre:{debug:!0,hasPaywall:!0,hasEcommerce:!0,hasActivatedBannedFakeEmails:!1,serviceCallEkosTechnicalSynchronized:!0,menuOnPlus:{hasClubDelSuscriptor:!0,hasApps:!0,hasBeneficios:!0,hasMiClub:!1,hasMisDispositivos:!0,misDispositivos:"Mis dispositivos"},abc:{enableCNAME:!0,hasPaywall:!0,hasEcommerce:!0,serviceCallEkosTechnicalSynchronized:!0},burgosconecta:{menuOnPlus:{hasClubDelSuscriptor:!1,hasApps:!1,hasBeneficios:!1,hasMiClub:!1,hasMisDispositivos:!1,misDispositivos:"Mis dispositivos"}},lavozdigital:{hasPaywall:!0,hasEcommerce:!0,serviceCallEkosTechnicalSynchronized:!0},xlsemanal:{newsletterActualidadXLSemanal:"actualidad_XLSemanal_0225",hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},madridfusion:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},pidentradas:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},elcorreo:{},diariovasco:{},canarias7:{hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1},salamancahoy:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1,menuOnPlus:{hasClubDelSuscriptor:!1,hasApps:!1,hasBeneficios:!1,hasMiClub:!1,hasMisDispositivos:!1,misDispositivos:"Mis dispositivos"}},todoalicante:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1,menuOnPlus:{hasClubDelSuscriptor:!1,hasApps:!1,hasBeneficios:!1,hasMiClub:!1,hasMisDispositivos:!1,misDispositivos:"Mis dispositivos"}},mujerhoy:{hasPaywall:!1,hasEcommerce:!1,serviceCallEkosTechnicalSynchronized:!1}},pre2:{debug:!0,hasPaywall:!0,hasEcommerce:!0,hasActivatedBannedFakeEmails:!1,serviceCallEkosTechnicalSynchronized:!0},new2:{debug:!0,hasActivatedBannedFakeEmails:!1,abc:{enableCNAME:!0,hasPaywall:!0,hasEcommerce:!0,serviceCallEkosTechnicalSynchronized:!0},lavozdigital:{enableCNAME:!0,hasPaywall:!0,hasEcommerce:!0,serviceCallEkosTechnicalSynchronized:!0}},new:{debug:!0,abc:{enableCNAME:!0,hasPaywall:!0,hasEcommerce:!0,serviceCallEkosTechnicalSynchronized:!0},lavozdigital:{enableCNAME:!0,hasPaywall:!0,hasEcommerce:!0,serviceCallEkosTechnicalSynchronized:!0},larioja:{serviceCallEkosTechnicalSynchronized:!0},elnortedecastilla:{serviceCallEkosTechnicalSynchronized:!0},elcorreo:{serviceCallEkosTechnicalSynchronized:!0},diariovasco:{serviceCallEkosTechnicalSynchronized:!0},eldiariomontanes:{serviceCallEkosTechnicalSynchronized:!0},laverdad:{serviceCallEkosTechnicalSynchronized:!0},ideal:{serviceCallEkosTechnicalSynchronized:!0},diariosur:{serviceCallEkosTechnicalSynchronized:!0},elcomercio:{serviceCallEkosTechnicalSynchronized:!0},lasprovincias:{hasPaywall:!0,hasEcommerce:!0,serviceCallEkosTechnicalSynchronized:!0},hoy:{serviceCallEkosTechnicalSynchronized:!0}},tienda2:{debug:!0,hasPaywall:!0,hasEcommerce:!0,hasActivatedBannedFakeEmails:!1,serviceCallEkosTechnicalSynchronized:!0},pro:{debug:!1,hasActivatedBannedFakeEmails:!0,abc:{enableCNAME:!0,hasPaywall:!0,hasEcommerce:!0,serviceCallEkosTechnicalSynchronized:!0},lavozdigital:{hasPaywall:!0,hasEcommerce:!1},xlsemanal:{newsletterActualidadXLSemanal:"actualidad_XLSemanal_0207",hasPaywall:!1,hasEcommerce:!1},madridfusion:{hasPaywall:!1,hasEcommerce:!1},pidentradas:{hasPaywall:!1,hasEcommerce:!1},larioja:{serviceCallEkosTechnicalSynchronized:!0},elnortedecastilla:{serviceCallEkosTechnicalSynchronized:!0},diariosur:{serviceCallEkosTechnicalSynchronized:!0},hoy:{serviceCallEkosTechnicalSynchronized:!0},laverdad:{serviceCallEkosTechnicalSynchronized:!0},ideal:{serviceCallEkosTechnicalSynchronized:!0},elcomercio:{serviceCallEkosTechnicalSynchronized:!0},eldiariomontanes:{serviceCallEkosTechnicalSynchronized:!0},elcorreo:{serviceCallEkosTechnicalSynchronized:!0},diariovasco:{serviceCallEkosTechnicalSynchronized:!0},lasprovincias:{serviceCallEkosTechnicalSynchronized:!0},mujerhoy:{hasPaywall:!1,hasEcommerce:!1}}};s.des=s.dev;var c={abc:"abc.es",sur:"diariosur.es",diariosur:"diariosur.es",diariovasco:"diariovasco.com",elcomercio:"elcomercio.es",correo:"elcorreo.com",elcorreo:"elcorreo.com",diariomontanes:"eldiariomontanes.es",eldiariomontanes:"eldiariomontanes.es",nortedecastilla:"elnortedecastilla.es",elnortedecastilla:"elnortedecastilla.es",hoy:"hoy.es",ideal:"ideal.es",larioja:"larioja.com",lasprovincias:"lasprovincias.es",laverdad:"laverdad.es",lavoz:"lavozdigital.es",lavozdigital:"lavozdigital.es",hoymujer:"mujerhoy.com",mujerhoy:"mujerhoy.com",leonoticias:"leonoticias.com",xlsemanal:"xlsemanal.com",codeanyapp:"diariovasco.com",burgosconecta:"burgosconecta.es",canarias7:"canarias7.es",salamancahoy:"salamancahoy.es",todoalicante:"todoalicante.es"};return{version:function(){return"4.0.0"},getOptions:function(e){var o=s;return o=void 0!==e&&e&&void 0!==s[e]&&s[e]?s[e]:o},getOptionsAndDomainOptions:function(e,o){var t=s;if(void 0!==e&&e&&void 0!==o&&o){if(void 0===s[e]||!s[e])return!1;var i=s[e];if(void 0!==s[e][o]&&s[e][o]){var o=s[e][o],n={},r="";for(r in i)void 0===c[r]&&(n[r]=i[r]);t=n=a.extend(!0,n,o)}else t=i}return t},className:function(){return"GigyaOptions"}}}return"undefined"!=typeof vocento&&vocento&&void 0!==vocento.vocuser&&vocento.vocuser&&void 0!==vocento.vocuser.VERSION&&"v3"!==vocento.vocuser.VERSION||(window.Vocento="undefined"!=typeof Vocento&&Vocento?Vocento:{},Vocento.GigyaOptions=e),e}),function(e,o){"use strict";"v3"===vocento.vocuser.VERSION?e.returnExports=o():"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("ParamsCdn",o):"object"==typeof exports?module.exports=o():e.returnExports=o()}(this,function(){"use strict";function e(){var e={transparent:{subDomain:{des:"des-cabeceras",dev:"des-cabeceras",pre:"pre-cabeceras",pro:"cabeceras"},tldDomain:{ppll:{des:"vocento.com",dev:"vocento.com",pre:"vocento.com",pro:"vocento.com"},abc:{des:"abc.es",dev:"abc.es",pre:"abc.es",pro:"abc.es"},mujerhoy:{des:"mujerhoy.com",dev:"mujerhoy.com",pre:"mujerhoy.com",pro:"mujerhoy.com"},xlsemanal:{des:"xlsemanal.com",dev:"xlsemanal.com",pre:"xlsemanal.com",pro:"xlsemanal.com"}}},akamai:{subDomain:{des:"nets-despre",dev:"nets-despre",pre:"nets-despre",pro:"nets"},tldDomain:{ppll:{des:"vocento.com",dev:"vocento.com",pre:"vocento.com",pro:"vocento.com"},abc:{des:"vocento.com",dev:"vocento.com",pre:"vocento.com",pro:"vocento.com"}}}},o={akamai:{dev:{des:"/despre/social-login/dev/",dev:"/despre/social-login/dev/",pre:"/despre/social-login/dev/",pro:"/despre/social-login/dev/"},des:{des:"/despre/social-login/dev/",dev:"/despre/social-login/dev/",pre:"/despre/social-login/dev/",pro:"/despre/social-login/dev/"},desn:{des:"/despre/social-login/dev/",dev:"/despre/social-login/dev/",pre:"/despre/social-login/dev/",pro:"/despre/social-login/dev/"},integracion2010:{des:"/despre/social-login/pre/",dev:"/despre/social-login/pre/",pre:"/despre/social-login/pre/",pro:"/despre/social-login/pre/"},"desnlocal-vocuser":{des:"/despre/social-login/dev/",dev:"/despre/social-login/dev/",pre:"/despre/social-login/pre/",pro:"/social-login/"},pre:{des:"/despre/social-login/pre/",dev:"/despre/social-login/pre/",pre:"/despre/social-login/pre/",pro:"/despre/social-login/pre/"},pren:{des:"/despre/social-login/pre/",dev:"/despre/social-login/pre/",pre:"/despre/social-login/pre/",pro:"/despre/social-login/pre/"},www:{des:"/social-login/",dev:"/social-login/",pre:"/social-login/",pro:"/social-login/"},new:{des:"/social-login/",dev:"/social-login/",pre:"/social-login/",pro:"/social-login/"},"":{des:"/social-login/",dev:"/social-login/",pre:"/social-login/",pro:"/social-login/"},".":{des:"/social-login/",dev:"/social-login/",pre:"/social-login/",pro:"/social-login/"}}};return{version:function(){return"4.0.0"},getParamsCdnUrl:function(){return e},getParamsCdnPathVocUser:function(){return o},className:function(){return"ParamsCdn"}}}return"v3"===vocento.vocuser.VERSION&&(window.Vocento="undefined"!=typeof Vocento&&Vocento?Vocento:{},Vocento.ParamsCdn=e),e}),function(e,o){"use strict";"v3"===vocento.vocuser.VERSION?e.returnExports=o():"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("ConfigManager",o):"object"==typeof exports?module.exports=o():e.returnExports=o()}(this,function(){"use strict";return function(){var i="dev",r={},a={},s={},c={};return{version:function(){return"4.0.0"},init:function(e,o,t,i){var n=!1;return void 0!==e&&e&&void 0!==o&&o&&void 0!==t&&t&&void 0!==i&&i&&(r=e,a=o,s=t,c=i,n=!0),n},getParamsVocento:function(){return r},getParamsVocentoCurrentEdition:function(){var e="";return e="undefined"!==r&&r&&void 0!==r.editions&&r.editions&&void 0!==r.editions.current&&r.editions.current?r.editions.current:e},getParamsVocUser:function(){return a},getParamsCdn:function(){return s},getCdnSubDomain:function(e){var o=!1;return o=void 0!==e&&e?s[e].subDomain[i]:o},getCdnTldDomainForGroup:function(e){var o=!1,t=r.group;return o=void 0!==e&&e?s[e].tldDomain[t][i]:o},getCdnPathVocUser:function(e,o){var t=!1;return t=void 0!==e&&e&&void 0!==o&&o&&void 0!==c[e][o]?c[e][o][i]:t},setEnvironment:function(e){var o="dev";return"string"!==e&&e&&(i=e,o=!0),o},getEnvironment:function(){return i},className:function(){return"ConfigManager"}}}}),function(e,o){"use strict";"v3"===vocento.vocuser.VERSION?e.returnExports=o():"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("LoadGigya",o):"object"==typeof exports?module.exports=o():e.returnExports=o()}(this,function(){"use strict";function e(n,c,d){var u=function(){var e=window.Promise||(window.RSVP?window.RSVP.Promise:window.ES6Promise||null);void 0!==e&&e||i("VocUser::initPromiseNamespace => ERROR obteniendo el namespace de JS de Promise.","error");return e}(),a=void 0!==ae?ae():"",p=n.jQuery,l=n.ConfigManager,r=n.customService,g=n.voontoApp,v=n.simpleStorage,m=n.internalDependencies,f=n.DOMPurify,h=n.AppWebview,y="",w=p.Deferred(),o=!1,s=void 0!==c&&c&&void 0!==c.sendDataToNewRelic&&c.sendDataToNewRelic?c.sendDataToNewRelic:function(){},S=c.requireFunction,b=(c.defineFunction,l.getEnvironment());function i(e,o){var t=!1,i="info";return void 0!==b&&b&&"pro"!==b&&"prod"!==b&&(void 0!==o&&o&&(i=o),"undefined"!=typeof console&&console&&void 0!==console.log&&console.log&&(o="",o=void 0!==e&&e&&(e.length||"object"==typeof e)?JSON.stringify(e,null,4):e,"info"!==i&&"log"!==i||console.log("%c---- Log - VocUser: "+o,"color:"+"purple"+";"),"warn"===i&&console.warn("%c---- Log - VocUser: "+o,"color:"+"blue"+";"),"error"===i&&console.error("%c---- Log - VocUser: "+o),t=!0)),t}var C,I=l.getParamsVocento(),U=l.getParamsVocUser(),k=n.ParamsOptionsVocUser,E=(l.getParamsCdn(),I.media),T={},O=p.Deferred(),D=null,R=null,N=null,F=null,A=null,P=null,x="v1",L="v1",M=!1,V=!1,_="",G="vocuser_nfryl_volver_al_origen",j=function(){var e="https";"http:"===window.location.protocol&&(e="http");return e}(),B="?v=202209291234",z={page:{loginPage:"/login/login.html",loginAdditionalDataPage:"/login/datos-adicionales.html",registerPage:"/registro/formulario.html",registerConfirmedPage:"/registro/confirmacion.html",resendMailPage:"/registro/reenviar-mail.html",mailSendedPage:"/registro/mail-enviado.html",validateMailPage:"/registro/validacion-mail.html",recoveryPage:"/clave/recuperar.html",sendedMailPage:"/clave/mail-enviado.html",changePasswdPage:"/clave/cambiar.html",passwdchangedPage:"/clave/cambiada.html",setPasswdURL:"/clave/asignar.html",passwdSetedURL:"/clave/asignada.html",profilePage:"/perfil/perfil.html",interestPage:"/perfil/intereses.html",changePasswdProfilePage:"/perfil/cambiar-clave.html",profileUpdatedPage:"/perfil/actualizado.html"},pageLogged:{loginAdditionalDataPage:"/login/datos-adicionales.html",passwdSetedURL:"/clave/asignada.html",profilePage:"/perfil/perfil.html",interestPage:"/perfil/intereses.html",changePasswdProfilePage:"/perfil/cambiar-clave.html",profileUpdatedPage:"/perfil/actualizado.html"}},W=t(z.page),e=t(z.pageLogged),J=X(),$=function(){var e=!1,o=J;e=o,!0!==W||!1===(e=function(e){var o=!1;void 0===e||!e||3<=(e=e.split("/")).length&&(void 0!==(e=e[2])&&e&&(e=e.split("."),o=e[0]));return o}(Q()))&&(e=o);"desnlocal-vocuser"===o&&(e=o);return e}(),q={},K=!1,H=null;function Q(){var o=!1,t=Se(G);if(void 0!==t&&t)try{o=decodeURIComponent(t)}catch(e){i("Error en getNfrylCookie() al decodificar la cookie: "+e,"error"),void 0!==(t=Se(G))&&t&&(o=decodeURIComponent(t))}return void 0!==o&&o||(o=window.location.href),decodeURIComponent(o)}function t(e){var o,t=!1;if(void 0===e||!e)return t;for(o in e)if(e.hasOwnProperty(o)){var i=e[o];if(-1!==window.location.pathname.indexOf(i))return t=!0}return t}function X(){var e={},o=window.location.hostname,t=new RegExp("([a-z-0-9]{2,63}).([a-z.]{2,5})$").exec(o);return e.domain=t[1],e.type=t[2],e.subdomain=o.replace(e.domain+"."+e.type,"").slice(0,-1),e=e.subdomain}function Y(e){if(void 0===b||!b||-1<b.indexOf("pro"))return!1;e={"URL     - protocol":j,"Vocento - group":A,"Vocento - site":E,"Vocento - environment - vocento.site.env":"undefined"!=typeof vocento&&vocento&&void 0!==vocento.site&&vocento.site&&void 0!==vocento.site.env&&vocento.site.env?vocento.site.env:"","--------------":"---------------: ","VocUser - service":P,"VocUser - frameworkMainVersion | frameworkBuildDate":x+" | "+B.substring(3),"VocUser - frameworkBuildVersion":e,"VocUser - configEnvironment":b,"VocUser - EKOS BUS2.0 enabled: ":void 0!==q.serviceCallEkosTechnicalSynchronized&&q.serviceCallEkosTechnicalSynchronized?q.serviceCallEkosTechnicalSynchronized:"","---------------":"---------------: ","Gigya   - apiKeyActive":D,"Gigya   - apiKeySite":R,"Gigya   - apiKeyParent":N,"Gigya   - gigyaParentGroup":F,"Gigya   - CNAME prefix - gigya.partnerSettings.customAPIDomainPrefix":"undefined"!=typeof gigya&&gigya&&void 0!==gigya.partnerSettings&&gigya.partnerSettings&&void 0!==gigya.partnerSettings.customAPIDomainPrefix&&gigya.partnerSettings.customAPIDomainPrefix?gigya.partnerSettings.customAPIDomainPrefix:null,"Gigya   - CNAME ApiDomain - gigya.partnerSettings.plugins.apiDomain":"undefined"!=typeof gigya&&gigya&&void 0!==gigya.partnerSettings&&gigya.partnerSettings&&void 0!==gigya.partnerSettings.plugins&&gigya.partnerSettings.plugins&&void 0!==gigya.partnerSettings.plugins.apiDomain&&gigya.partnerSettings.plugins.apiDomain?gigya.partnerSettings.plugins.apiDomain:null,"Gigya   - Thirparty Cookies Gigya redirectOnLogin: gigya.partnerSettings.globalConf.enableSSOToken":"undefined"!=typeof gigya&&gigya&&void 0!==gigya.partnerSettings&&gigya.partnerSettings&&void 0!==gigya.partnerSettings.globalConf&&gigya.partnerSettings.globalConf&&void 0!==gigya.partnerSettings.globalConf.enableSSOToken&&gigya.partnerSettings.globalConf.enableSSOToken?gigya.partnerSettings.globalConf.enableSSOToken:null,"Gigya   - Thirparty Cookies Gigya redirectOnLogin: gigya.thisScript.globalConf.enableSSOToken":"undefined"!=typeof gigya&&gigya&&void 0!==gigya.thisScript&&gigya.thisScript&&void 0!==gigya.thisScript.globalConf&&gigya.thisScript.globalConf&&void 0!==gigya.thisScript.globalConf.enableSSOToken&&gigya.thisScript.globalConf.enableSSOToken?gigya.thisScript.globalConf.enableSSOToken:null,"Gigya   - ITP - gigya.partnerSettings.globalConf.storageDomainOverride":"undefined"!=typeof gigya&&gigya&&void 0!==gigya.partnerSettings&&gigya.partnerSettings&&void 0!==gigya.partnerSettings.globalConf&&gigya.partnerSettings.globalConf&&void 0!==gigya.partnerSettings.globalConf.storageDomainOverride&&gigya.partnerSettings.globalConf.storageDomainOverride?gigya.partnerSettings.globalConf.storageDomainOverride:null,"Gigya   - ITP - gigya.thisScript.globalConf.storageDomainOverride":"undefined"!=typeof gigya&&gigya&&void 0!==gigya.thisScript&&gigya.thisScript&&void 0!==gigya.thisScript.globalConf&&gigya.thisScript.globalConf&&void 0!==gigya.thisScript.globalConf.storageDomainOverride&&gigya.thisScript.globalConf.storageDomainOverride?gigya.thisScript.globalConf.storageDomainOverride:null};return void 0!==console.table&&console.table?console.table(e):console.log(e),e}function Z(){return!0===V&&W&&N&&!e?!0:!1}function ee(){var e=!1,o=Ce("extensionType"),t=window.location.pathname;return e=void 0!==o&&("ecommerce"===o||"redencion"===o||"regalo"===o)&&z.page.registerPage===t?!0:e}function oe(){var e=!1,o=X();return e=!(W||-1===o.indexOf("sevilla")||-1===window.location.href.indexOf("orgullodenervion")&&-1===window.location.href.indexOf("alfinaldelapalmera")||void 0===b)&&b&&"pro"===b?!0:e}function te(){var t=!1,i=window.location.href;return p.each({orgullodenervion:"3_nd4KlCzFeb1GmW3z6U2f_aZtpI4oUM7K9dlOAELlqqwCIe5BIfsPPkQAhE0ryjSO",alfinaldelapalmera:"3_pQEk_0dG35j9wwIMB-dPNMG5Gmox8huI8Phs_00lUZWNNH5Sx89L7baocOKJNkKc"},function(e,o){-1!==i.indexOf(e)&&(t=o)}),t}function ie(e){var o="ppll";if(void 0!==e&&e&&void 0!==U&&U&&void 0!==U.vocGroup&&U.vocGroup){var t,i=0,n=!1;for(t in U.vocGroup)if(U.vocGroup.hasOwnProperty(t)&&U.vocGroup[t].length){for(i=0,n=!1;e===U.vocGroup[t][i]&&(n=!0),(i+=1)<U.vocGroup[t].length&&!1===n;);!0===n&&(o=t)}}return o}function ne(e){var o=[];return o=void 0!==e&&e&&void 0!==U&&U&&void 0!==U.vocUserJs&&U.vocUserJs&&void 0!==U.vocUserJs[e]&&U.vocUserJs[e]?U.vocUserJs[e]:o}function re(e){var o,t=!1,i="",n="";return void 0!==e&&e&&(void 0!==U.subDomainSettings[e]&&U.subDomainSettings[e]&&(i=U.subDomainSettings[e]),o=!1,n=o=void 0!==(e=e)&&e&&void 0!==U.media[e]&&U.media[e]?U.media[e]:o,void 0!==i&&i?t=p.extend(n,i):void 0!==n&&n&&(t=n)),t}function ae(){var e="",o=navigator.userAgent,t="",i=o.match(/(opera|edge|chrome|safari|firefox|msie|mobile|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1]))e="IE "+((t=/\brv[ :]+(\d+)/g.exec(o)||[])[1]||"");else{if("Chrome"===i[1]){if(void 0!==(t=o.match(/\bOPR\/(\d+)/))&&t)return"Opera"+(void 0!==t[1]?" "+t[1]:"");if(void 0!==(t=o.match(/\bEdge\/(\d+)/))&&t)return"Edge"+(void 0!==t[1]?" "+t[1]:"")}i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=o.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),e=i.join(" ")}return e}function se(){var e,o,t=!1,i=null,n=!0===W?Q():"",r=(e=n,r=window.location.hostname,n=o="",(o=void 0!==(r=void 0!==e&&e&&"/"!==e?e:r)&&r&&"/"!==r?r.split("."):o).length<=0&&(n=r),0<o.length&&o.length<3&&(n=o[0]),2<o.length&&((e=r.replace("http://","").replace("https://","").replace("://","").replace("//","").split("/")).length<=1&&(n=o[1]),2<=e.length&&((r=e[0].split(".")).length<=0&&(n=e[0]),0<r.length&&r.length<3&&(n=o[0]),2<r.length&&(n=r[1]))),n),n=function(){var e=$.split("-"),o="";void 0!==e[0]&&e[0]&&(o=(-1<e[0].indexOf("des")||-1<e[0].indexOf("dev")||-1<e[0].indexOf("pre")||-1<e[0].indexOf("new")||-1<e[0].indexOf("tienda"))&&"des"!==e[0]&&"dev"!==e[0]&&"pre"!==e[0]?e[0]:o);return o}();return"undefined"!=typeof Vocento&&Vocento&&void 0!==Vocento.GigyaOptions&&Vocento.GigyaOptions?(i=new Vocento.GigyaOptions(p),i=void 0!==n&&n&&!1!==i.getOptionsAndDomainOptions(n,r)?i.getOptionsAndDomainOptions(n,r):i.getOptionsAndDomainOptions(b,r)):void 0!==k&&k&&(i=void 0!==n&&n&&!1!==k.getOptionsAndDomainOptions(n,r)?k.getOptionsAndDomainOptions(n,r):k.getOptionsAndDomainOptions(b,r)),void 0!==i&&i&&(q=p.extend(!0,q,i),t=!0),t}function ce(){var e,o,t={autoLogin:!1,signIDs:!0,connectWithoutLoginBehavior:"alwaysLogin",newUsersPendingRegistration:!0,forceAuthentication:!1,dateFormat:"%d/%M/%yyyy",lang:"es",sessionExpiration:31536e3};return void 0!==h&&h&&h.setGigyaJSParams(t),navigator.userAgent.indexOf("VocDeviceAppIos")<0&&(t.disabledProviders="apple"),!0===M&&(t.enableSSOToken=!0,e=(o=Ue()).split("."),o="."+o,void 0!==e[0]&&e[0]&&(o="."+function(e){if(void 0===e||!e)return Ue();var o={abc:"abc.es",burgosconecta:"burgosconecta.es",diariosur:"diariosur.es",sur:"diariosur.es",surinenglish:"diariosur.es",diariovasco:"diariovasco.com",bicibizi:"diariovasco.com",correo:"elcorreo.com",elcorreo:"elcorreo.com",elcomercio:"elcomercio.es",diariomontanes:"eldiariomontanes.es",eldiariomontanes:"eldiariomontanes.es",nortedecastilla:"elnortedecastilla.es",elnortedecastilla:"elnortedecastilla.es",hoy:"hoy.es",ideal:"ideal.es",larioja:"larioja.com",lomejordelvinoderioja:"larioja.com",degustalarioja:"larioja.com",guiasaludrioja:"larioja.com",lasprovincias:"lasprovincias.es",laverdad:"laverdad.es",lavoz:"lavozdigital.es",lavozdigital:"lavozdigital.es",leonoticias:"leonoticias.com",elbierzonoticias:"leonoticias.com",madridfusion:"madridfusion.net",hoymujer:"mujerhoy.com",mujerhoy:"mujerhoy.com",guapabox:"mujerhoy.com","pidecita.com":"pidecita.com",pidentradas:"pidentradas.com",xlsemanal:"xlsemanal.com",canarias7:"canarias7.es",salamancahoy:"salamancahoy.es",todoalicante:"todoalicante.es"};return o.hasOwnProperty(e)?o[e]:Ue()}(e[0])),V&&(t.storageDomainOverride=_+"gigya"+o)),JSON.stringify(t)}function de(e){var o,t,i,n=!1;return"undefined"!==e&&e&&(o=!1,void 0!==J&&J&&void 0!==U.rutaCargaJavascriptsPorSubdominio[J]&&U.rutaCargaJavascriptsPorSubdominio[J]&&void 0!==U.rutaCargaJavascriptsPorSubdominio[J].rutaCargaJavascripts&&U.rutaCargaJavascriptsPorSubdominio[J].rutaCargaJavascripts&&(o=!0),"local"===b&&(o=!0,J="desnlocal-vocuser"),!(i="")===o?(i=j+"://"+U.rutaCargaJavascriptsPorSubdominio[J].rutaCargaJavascripts,"local"===b&&(i=i+e+"/"+E+"/")):(t=l.getCdnTldDomainForGroup("transparent"),i=j+"://"+l.getCdnSubDomain("transparent")+"."+t,!0===o&&(i=i.substring(0,i.length-1)),i+="/vocuser/"+x+"/resources/js/"+e+"/"+E+"/"),n=i),n}function le(e,o){var t=!1;if(void 0!==e&&e&&void 0!==o&&o){var i={},n="";for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);for(n in o)o.hasOwnProperty(n)&&(i[n]=o[n]);t=i}return t}function ue(e,o,t){var i={};if(void 0!==e&&e&&"undefined"!==o&&o){var n="";for(n in e)e.hasOwnProperty(n)&&(i[n]=o+e[n]+t)}return i}function pe(e,o,t,i,n,r,a,s,c,d,l){void 0!==g&&g&&(S.onError=y),T={VOCUSER_USERUTILS:e,VOCUSER_CORE:o,VOCUSER_BASEFLOW:t,VOCUSER_GROUPFLOW:i,VOCUSER_SITEFLOW:n,VOCUSER_TAGMANAGERFLOW:r,VOCUSER_AUTOSUBSCRIBEFLOW:a,VOCUSER_NEWSLETTERSFLOW:s,VOCUSER_NFRYLFLOW:c,VOCUSER_ADDITIONALDATAFLOW:d},void 0!==l&&l&&(T.VOCUSER_COREMARKETINGFLOW=l),void 0!==u&&u&&u.length||p.when(w).done(function(e){he(),ge()}),O.resolve()}function ge(){if(!0===o)return 1;o=!0;var e=Ce("extensionFlowUrl");return void 0!==e&&e?setTimeout(function(){ke()},1e3):ke(),1}function ve(){var e,o,t,i,n,r;o=!0,t=w,l=14,"function"==typeof(e=fe)&&void 0!==o&&void 0!==t&&t&&(o!==e()?"resolved"!==t.state()&&(i=1,n=void 0!==l&&l?l:19,r=setInterval(function(){i<=n?(o===e()&&(t.resolve(),r&&clearInterval(r)),"resolved"===t.state()&&r&&clearInterval(r),i++):r&&clearInterval(r)},1e3)):t.resolve());var a,s,c,d=new u(function(o,e){p.when(w).done(function(e){return o()})}),l=(l=!(a=15e3),void 0!==(d=d)&&d&&(s=void 0!==a&&a?a:3e3,c=null,a=new u(function(e,o){c=setTimeout(function(){clearTimeout(c),o("Timed out in "+s+" ms.")},s)}),(a=u.race([d,a])).then(function(e){clearTimeout(c)}).catch(function(e){clearTimeout(c)}),l=a),l);return l.then(function(){he()},function(e){console.warn("Gigya not ready in 15000 seconds."),he()}),l}function me(){c.timeGigyaInitializated=window.performance.now(),w.resolve()}function fe(){return!("undefined"==typeof gigya||!gigya)&&gigya.isReady}function he(){Ee("gigyaready",window.gigya,g)}function ye(e,o){var t=!1,i="",n="",r=(e+="core/",ue(ne("core"),e,B)),a=ue(ne(o),e+o+"/",B),s=ue(ne("site"),e+o+"/"+E+"/",B);var c=ue(ne("v4"),e,B),d=Ce("extensionFlowUrl");("undefined"!=typeof gigyaUXFlows&&gigyaUXFlows&&0<gigyaUXFlows.length||void 0!==d&&d)&&(e=de(o=ie(E)),n=ne("marketingAction"),i=e+"extensions/concurso/",t=!0);var i=t?ue(n,i,B):null,a=le(r,a),s=le(a,s),s=le(s,c),c=le(s,i);return void 0!==g&&g&&(i={},"undefined"!==(s=c=t?c:s)&&s&&void 0!==s["vocento-vocuser-combined-core"]&&s["vocento-vocuser-combined-core"]&&(i[s["vocento-vocuser-combined-core"]]=["UserUtils","vocuser","BaseFlow","GroupFlow","TagManagerFlow","AutoSubscribeFlow","NewslettersFlow","NfrylFlow","AdditionalDataFlow"]),"undefined"!==s&&s&&void 0!==s["vocento-vocuser-combined-siteflow"]&&s["vocento-vocuser-combined-siteflow"]&&(i[s["vocento-vocuser-combined-siteflow"]]=["SiteFlow"]),S.config({waitSeconds:0,bundles:i})((s=c,i="",c=l.getEnvironment(),void 0!==g&&g&&(i=["UserUtils","vocuser","BaseFlow","GroupFlow","SiteFlow","TagManagerFlow","AutoSubscribeFlow","NewslettersFlow","NfrylFlow","AdditionalDataFlow"],void 0!==s.VOCUSER_COREMARKETINGFLOW&&s.VOCUSER_COREMARKETINGFLOW&&i.push("vocento.coreMarketingFlow")),void 0!==c&&c&&"pro"!==c&&"prod"!==c&&(void 0!==g&&g?(i=[s.VOCUSER_USERUTILS,s.VOCUSER_CORE,s.VOCUSER_BASEFLOW,s.VOCUSER_GROUPFLOW,s.VOCUSER_SITEFLOW,s.VOCUSER_TAGMANAGERFLOW,s.VOCUSER_AUTOSUBSCRIBEFLOW,s.VOCUSER_NEWSLETTERSFLOW,s.VOCUSER_NFRYLFLOW,s.VOCUSER_ADDITIONALDATAFLOW],void 0!==s.VOCUSER_COREMARKETINGFLOW&&s.VOCUSER_COREMARKETINGFLOW&&i.push(s.VOCUSER_COREMARKETINGFLOW)):i=["VOCUSER_USERUTILS","VOCUSER_CORE","VOCUSER_BASEFLOW","VOCUSER_GROUPFLOW","VOCUSER_SITEFLOW","VOCUSER_TAGMANAGERFLOW","VOCUSER_AUTOSUBSCRIBEFLOW","VOCUSER_NEWSLETTERSFLOW","VOCUSER_NFRYLFLOW","VOCUSER_ADDITIONALDATAFLOW"]),i),pe)),!0}function we(t,e,o,i){var n,r=!1;return void 0!==t&&t&&(o=void 0===o||o,(n=document.createElement("script")).type="text/javascript",n.src=t,n.async=o,void 0!==e&&e&&(n.text=e),document.getElementsByTagName("head")[0].appendChild(n),void 0!==u&&u&&u.length?r=new u(function(e,o){n.onload=function(){e(t),void 0!==i&&"function"==typeof i&&i()},n.onreadystatechange=function(){!n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||e(t)}}):(n.onload=function(){void 0!==i&&"function"==typeof i&&i()},n.onreadystatechange=function(){!n.readyState&&"loaded"!==n.readyState&&"complete"!==n.readyState||void 0===i||"function"!=typeof i||i()})),r}function Se(e,o){var t=null;if(void 0===e||!e||document.cookie.length<=0)return t;if(-1===(i=document.cookie.indexOf(e+"=")))return t;var i=i+e.length+1,e=document.cookie.indexOf(";",i);-1===e&&(e=document.cookie.length);try{t=void 0!==o&&!1===o?document.cookie.substring(i,e):decodeURIComponent(document.cookie.substring(i,e))}catch(e){t=null}return t}function be(e){"beforeRequest"!==e.eventName&&"afterResponse"!==e.eventName||("beforeRequest"===e.eventName&&"socialize.notifyLogin"===e.methodName&&(q.notifyLoginEventFired=!0),"afterResponse"===e.eventName&&"socialize.notifyLogin"===e.methodName&&(void 0!==q.gigyaResponse&&q.gigyaResponse?"string"===q.socializeOnLogin&&(q.socializeOnLogin(q.gigyaResponse),q.accountsOnLogin(q.gigyaResponse)):(H=new u(function(e,o){gigya.socialize.refreshUI({callback:function(){return q.notifyLoginEventFired=!1,e()}})}),q.promiseNotifyLoginResolved=H)))}function Ce(e){var o=!1,t=Se("vocuser_information",!1),i="",n="";if(void 0!==t&&t){try{o=decodeURIComponent(t),i=decodeURIComponent(t)}catch(e){i=""}n=function(o){var t=!1;if("undefined"!==o&&o)try{t=JSON.parse(o.cookie)}catch(e){try{o.cookie=decodeURIComponent(o.cookie),t=JSON.parse(o.cookie)}catch(e){}}return t}({cookie:o=void 0!==i&&i&&""!==i?i:o})}return void 0===n||void 0===e?n:void 0!==n[e]&&n[e]?n[e]:null}function Ie(e,o,t,i){var n=!1,r=Ce();return void 0!==t&&t&&((r=void 0===r||!r?{}:r)[t]=i,t=JSON.stringify(r),(-1<a.indexOf("Safari")||-1<a.indexOf("Mobile")||-1<a.indexOf("-?"))&&(t=encodeURIComponent(r)),i="vocuser_information",r=t,t={domain:e,path:"/",expires:o},!(o=!(e=!0))!==e&&null!==Se(i)&&void 0!==Se(i)||(p.cookie(i,r,t),o=!0),n=o),n}function Ue(){var e=document.domain.split(".");return e=2<=e.length?e[e.length-2]+"."+e[e.length-1]:e}function ke(){void 0!==v&&v&&(d.simpleStorage=v),void 0!==f&&f&&(d.DOMPurify=f),void 0!==l&&l&&(d.configManager=l),void 0!==h&&h&&(d.AppWebview=h,q=p.extend(!0,q,h.getOptions()));var e=new T.VOCUSER_USERUTILS(p,q),o={},o=new T.VOCUSER_CORE(p,F,P,q,e,g,E,d,m),t=new T.VOCUSER_BASEFLOW(p,e);o.registerFlow(t);t=new T.VOCUSER_GROUPFLOW(p,e,d);o.registerFlow(t);var i,n,r,t=new T.VOCUSER_SITEFLOW(p,e);if(o.registerFlow(t),void 0!==T.VOCUSER_TAGMANAGERFLOW&&(i=new T.VOCUSER_TAGMANAGERFLOW(p,e),o.registerFlow(i)),void 0!==T.VOCUSER_AUTOSUBSCRIBEFLOW&&(i=new T.VOCUSER_AUTOSUBSCRIBEFLOW(p,e),o.registerFlow(i)),void 0!==T.VOCUSER_NEWSLETTERSFLOW&&(n=new T.VOCUSER_NEWSLETTERSFLOW(p,e),o.registerFlow(n)),void 0!==T.VOCUSER_NFRYLFLOW&&(n=new T.VOCUSER_NFRYLFLOW(p,e),o.registerFlow(n)),void 0!==T.VOCUSER_ADDITIONALDATAFLOW&&(r=new T.VOCUSER_ADDITIONALDATAFLOW(p,e),o.registerFlow(r)),void 0!==T.VOCUSER_COREMARKETINGFLOW&&(r=new T.VOCUSER_COREMARKETINGFLOW(p,e),o.registerFlow(r)),"undefined"!=typeof gigyaUXFlows&&gigyaUXFlows&&0<gigyaUXFlows.length){for(var a,s=0;s<gigyaUXFlows.length;s++)void 0!==gigyaUXFlows[s].version?o.registerFlow(gigyaUXFlows[s]):(a=new gigyaUXFlows[s](p,e),o.registerFlow(a));gigyaUXFlows=null}o.init(c),void 0!==g&&g?Ee("ready",o,g):window.gigyaUX=o,function(e,o){if(void 0!==b&&b&&!(-1<b.indexOf("pro"))&&void 0!==e&&e&&void 0!==o&&o){o=document.getElementById(o);if(void 0!==o&&o){var t={"URL     - href - return to origin":window.location.href};delete(t=p.extend(!0,t,e))["Vocento - group"],delete t["Vocento - environment - vocento.site.env"],delete t["VocUser - service"],delete t["VocUser - frameworkMainVersion"],delete t["VocUser - frameworkBuildVersion"],delete t["VocUser - frameworkBuildDate"],delete t["VocUser - configEnvironment"],delete t["---------------"];var i,n='<table border="1" cellpadding="3" id="printTable" style="text-align: left; color: gray"><tbody>';for(i in t)t.hasOwnProperty(i)&&(n+="<tr><th>"+i+"</th><td>"+t[i]+"</td></tr>");o.innerHTML=n+"</tbody></table>"}}}(Y(o.version()),"vocuser-debug-site-info")}function Ee(e,o,t){var i=!1;return void 0!==e&&e&&void 0!==o&&o&&void 0!==t&&t&&(t.promised("vocuser:"+e,o),i=!0),i}return function(){var e="service",o=function(e){var o=!1;void 0!==e&&e&&(-1<e.indexOf(".m.")||-1<e.indexOf("m.")&&"m"===e.charAt(0)&&"."===e.charAt(1)||-1<e.indexOf("m-origin"))&&(o=!0);return o}(window.location.hostname);q.systemName="vocuserFWJS",!0===(o="undefined"!=typeof voc_pl&&voc_pl?o||function(e){var o=!1;void 0!==e&&e&&"m"===e.toLowerCase()&&(o=!0);return o}(voc_pl):o)&&(q.quickRegistration=!0,e="service_movil");var t="app",i=-1<window.location.href.indexOf("screenset=app")||-1<window.location.href.indexOf("device=app")?t:"web",o=-1<window.location.href.indexOf("screenset=app")||-1<window.location.href.indexOf("device=app")?t:"mobile";q.screenSetTypeToShow=i,q.screenSetTypeToShowMobile=o,void 0!==h&&h&&(h.setScreenSetTypeToShow(q),h.setSystemName(q)),A=ie(E),C=l.getParamsVocentoCurrentEdition(),V=void 0!==C&&C&&void 0!==U.media[E][C]&&U.media[E][C]&&void 0!==U.media[E][C].apiKey&&U.media[E][C].apiKey?(R=U.media[E][C].apiKey,N=U.media[E][C].apiKeyParent,F=U.media[E][C].group,P=U.media[E][C][e],L=U.media[E][C].wrapperVersion,M=U.media[E][C].cnameEnabled,K=U.media[E][C].hasEcommerce,U.media[E][C].enableGigyaITP):(R=U.media[E].apiKey,N=U.media[E].apiKeyParent,F=U.media[E].group,P=U.media[E][e],L=U.media[E].wrapperVersion,M=U.media[E].cnameEnabled,K=U.media[E].hasEcommerce,U.media[E].enableGigyaITP),q.enableGigyaITP=V,q.notifyLoginEventFired=!1,q.promiseNotifyLoginResolved=H,!0===V&&(_="master-",void 0!==b&&b&&("local"!==b&&"dev"!==b&&"des"!==b&&"pre"!==b||(_="dev-")),q.cnamePrefix=_),void 0!==L&&(x=L||x),void 0!==r&&r&&(P=r),q.env=l.getEnvironment(),D=R,!0===Z()&&(D=N),!0===ee()&&void 0!==U.media[E].ecommerce&&U.media[E].ecommerce&&void 0!==U.media[E].ecommerce.apiKey&&U.media[E].ecommerce.apiKey&&(D=U.media[E].ecommerce.apiKey),!(t="")===oe()&&(t=te())&&(D=t),void 0!==(i=re($))&&i||(o="",void 0!==(e=$.split("-"))[0]&&e[0]&&(o=-1<e[0].indexOf("des")?"des-":o,o=-1<e[0].indexOf("dev")?"des-":o,o=-1<e[0].indexOf("pre")?"pre-":o,o=-1<e[0].indexOf("new")?"new-":o,o=-1<e[0].indexOf("tienda")?"tienda-":o),i=re(o+(void 0!==e[1]&&e[1]?e[1]:""))),void 0!==$&&$&&void 0!==i&&i&&(void 0!==i.wrapperVersion&&i.wrapperVersion&&(x=i.wrapperVersion),void 0!==i.apiKey&&i.apiKey&&(R=i.apiKey),D=R,void 0!==i.apiKeyParent&&i.apiKeyParent&&(N=i.apiKeyParent),!0===Z()&&(D=N),!0===ee()&&void 0!==U.media[E].ecommerce&&U.media[E].ecommerce&&void 0!==U.media[E].ecommerce.apiKey&&U.media[E].ecommerce.apiKey&&(D=U.media[E].ecommerce.apiKey),!0===oe()&&(t=te())&&(D=t),t=P,void 0!==i.service&&i.service&&(P=i.service),!1===K&&("ppll"===A?(P=t,delete i.service):void 0!==i.service&&i.service&&(P=i.service)),/^areapersonal/.test($)&&(-1<(t=window.location.href).indexOf("trial/success")&&(i.service="trial",P="trial"),-1<t.indexOf("servicios/newsletters")&&(i.service="NL_escaparate",P="NL_escaparate")),q=p.extend(!0,q,i)),void 0===M&&(M=!1),void 0!==q&&q&&void 0!==q.cnameEnabled&&(M=q.cnameEnabled),l.getCdnPathVocUser("akamai",I.subdomain),i=U,window.__gigyaConf=i.vocUserCustomValidation}(),{version:function(){return"4.0.0"},init:function(e){!0===W?void 0!==(t=Ce("extensionFlowUrl"))&&t&&we(t+B,"",!1):(Ie("extensionFlowUrl","",!0),Ie("lastAction","",!0)),void 0!==e&&e&&(q=p.extend(!0,q,e)),se(),void 0!==g&&g&&(y=S.onError,S.onError=function(e){});var o=(i="https"===j?"cdns":"cdn",!0===M?j+"://"+i+".gigya.com/js/gigya.js?apiKey="+D:j+"://"+i+".gigya.com/js/socialize.js"+B+"&apiKey="+D),t="",e=ce(),i={};i.text=e,window.onGigyaServiceReady=me,void 0!==g&&g?t=g.load(o,i):(t=we(o,e,!0),window.vocUserGigyaReady=""),t.then(function(e){c.timeGigyaNetworkScriptLoad=window.performance.now(),(i=[]).push({events:"beforeRequest",method:be,args:[function(e){return e}]}),i.push({events:"afterResponse",method:be,args:[function(e){return e}]}),i={eventMap:i},void 0!==gigya.defaultEventMaps&&gigya.defaultEventMaps||(gigya.defaultEventMaps=[]),gigya.defaultEventMaps.push(i);var o=null;void 0!==u&&u&&u.length&&(o=ve());var t,i=l.getEnvironment();"pro"===i||"prod"===i||!0===(t=!1,t=!(void 0===(i=n)||!i||void 0===i.vocuser||!i.vocuser)||t)?(pe(n.UserUtils,n.vocuser,n.BaseFlow,n.GroupFlow,n.SiteFlow,n.TagManagerFlow,n.AutoSubscribeFlow,n.NewslettersFlow,n.NfrylFlow,n.AdditionalDataFlow,n["vocento.coreMarketingFlow"]),o.then(function(){ge()},function(e){ge()})):(ye(de(t=ie(E)),t),o.then(function(){p.when(O).done(function(e){ge()})},function(e){p.when(O).done(function(e){ge()})}))}).catch(function(e){var o=void 0!==g&&g?"voontoApp loaded":"voontoApp not loaded",t="";try{t="string"==typeof e&&e?e:"object"==typeof e&&e?JSON.stringify(e):""}catch(e){}try{t=t+" | "+JSON.stringify(e,["message","arguments","type","name","stack"])}catch(e){}s({additionalInformation:o,vocUserJsVersion:"v4.102.2",eventNameFired:"gigyaReady",firedEventGigyaReady:!1,errorMessage:t})})},setApikey:function(e){return D=e,this},getApikey:function(){return D},setGroup:function(e){return F=e,this},getGroup:function(){return F},setService:function(e){return function(e){var o=!1;{var t;void 0!==e&&e&&(t=Ue(),Ie("."+t,365,"lastService",e),o=!0)}}(P=e),this},getService:function(){return P},getVersionJavascripts:function(){return x},className:function(){return"LoadGigya"}}}return"v3"===vocento.vocuser.VERSION&&(window.Vocento="undefined"!=typeof Vocento&&Vocento?Vocento:{},Vocento.LoadGigya=e),e}),function(e,o){"use strict";"v3"===vocento.vocuser.VERSION?e.returnExports=o():"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("UserUtils",o):"object"==typeof exports?module.exports=o():e.returnExports=o()}(this,function(){"use strict";return function UserUtils($,gigyaOptions){var version="4.0.0";function getClassName(){return"UserUtils"}var className=getClassName(),objectRow=function(){},objectCustomValidation=function(){},objectInsertCustomFields=function(){},e4,v4,w4,x4;function initRow(){return void 0!==Row&&Row?Row:Vocento.Row}function initCustomValidation(){return void 0!==customValidation&&customValidation?customValidation:Vocento.customValidation}function initInsertCustomFields(){return void 0!==insertCustomFields&&insertCustomFields?insertCustomFields:Vocento.insertCustomFields}function initUserUtils(){objectInsertCustomFields="undefined"!=typeof vocento&&vocento&&void 0!==vocento.vocuser&&vocento.vocuser&&void 0!==vocento.vocuser.VERSION&&vocento.vocuser.VERSION&&"v4"===vocento.vocuser.VERSION?(objectRow=initRow(),objectCustomValidation=initCustomValidation(),objectInsertCustomFields=initInsertCustomFields(),objectCustomValidation=new objectCustomValidation,new objectInsertCustomFields):objectCustomValidation=objectRow=null}function log(e,o){var t=!1,i="info";return void 0!==o&&o&&(i=o),"undefined"!=typeof console&&console&&(o="",o=void 0!==e&&e&&(e.length||"object"==typeof e)?JSON.stringify(e,null,4):e,"warn"===i&&console.warn("%c---- Log - VocUser: "+o,"color:"+"blue"+";"),"error"===i&&console.error("%c---- Log - VocUser: "+o),t=!0),t}function UnicodeToChar(e){var o=!1;if(void 0!==e&&e&&1===e.length)switch(e){case"a":o=String.fromCharCode(225);break;case"e":o=String.fromCharCode(233);break;case"i":o=String.fromCharCode(237);break;case"o":o=String.fromCharCode(243);break;case"u":o=String.fromCharCode(250);break;case"n":o=String.fromCharCode(241);break;case"A":o=String.fromCharCode(193);break;case"E":o=String.fromCharCode(201);break;case"I":o=String.fromCharCode(205);break;case"O":o=String.fromCharCode(211);break;case"U":o=String.fromCharCode(218);break;case"N":o=String.fromCharCode(209)}return o}function Row(fields,asColumns){var options={},data={},profile={},default_obj={inSchema:!0,displayText:"",required:!1,attr:{type:"",name:"",id:"",extraId:"",isPElement:"",cssClass:"",placeholder:"",value:"",onNewValue:"",screen:""}};function setOptions(e){return options=e,this}function setData(e){return data=e,this}function setProfile(e){return profile=e,this}function getIdForInput(e){var o,t="";return void 0!==e.attr.name&&e.attr.name&&void 0!==e.attr.screen&&e.attr.screen&&(o=e.attr.screen.substring(5),t=e.attr.name+o),t}function getFieldHTML(obj){var html="",value="";try{value=void 0!==eval(obj.attr.value)?eval(obj.attr.value):void 0!==obj.attr.onNewValue?obj.attr.onNewValue:""}catch(err){value=void 0!==obj.attr.onNewValue?obj.attr.onNewValue:""}var fieldStyle="";void 0!==obj.attr.style&&obj.attr.style&&(fieldStyle=obj.attr.style);var type="",id="",cls="",req="",name="",selected="",extraId="",selectClass="",textboxId=!1;switch(void 0===obj.attr.type||"textbox"!==obj.attr.type&&"password"!==obj.attr.type||(textboxId=getIdForInput(obj)),obj.attr.type){case"text":req=obj.required?'<span class="required" data-bound-to="'+obj.attr.name+'">*</label>':"",type=obj.attr.type?' type="'+obj.attr.type+'"':"",id=obj.attr.id?' id="'+obj.attr.id+'"':"",name="";var name=obj.inSchema?obj.attr.name?' name="'+obj.attr.name+'" data-gigya-name="'+obj.attr.name+'"':"":obj.attr.name?' vocento-name="'+obj.attr.name+'"':"",cls=obj.attr.cssClass?' class="gigya-input-text '+obj.attr.cssClass+'"':' class="gigya-input-text"',placeholder=obj.attr.placeholder?' placeholder="'+obj.attr.placeholder+'"':"",textStyle,value=value?' value="'+value+'"':"",html='<div class="gigya-composite-control gigya-composite-control-textbox" style="display: block; '+fieldStyle+'">';$.trim(obj.displayText)&&(textStyle=void 0!==fieldStyle&&fieldStyle?'style="'+fieldStyle+'"':"",gigyaOptions.userIsInAppWebviewFlow?html+='<label class="gigya-label form-control-placeholder--app">'+obj.displayText+":"+req+"</label>":html+='<label class="gigya-label">'+obj.displayText+":"+req+"</label>",html+='<label class="gigya-label">'+obj.displayText+":"+req+"</label>"),html+="<input"+type+id+cls+name+placeholder+value+'><span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span></div>';break;case"password":req=obj.required?' data-required="true" ':" ",extraId=""!==textboxId?' id="'+textboxId+'"':"",placeholder=obj.required?obj.displayText+" *":obj.displayText,html='<div class="gigya-layout-cell form-group"><div class="gigya-composite-control gigya-composite-control-password"><input type="'+obj.attr.type+'" '+extraId+' class="gigya-input-password form-control" data-display-name="'+obj.displayText+'" name="'+obj.attr.name+'" tabindex="0" show-valid-checkmark="true" '+req+'><label for="'+textboxId+'" class="form-control-placeholder">'+placeholder+'</label><span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span></div></div>';break;case"hidden":type=obj.attr.type?' type="'+obj.attr.type+'"':"",id=obj.attr.id?' id="'+obj.attr.id+'"':"",name=obj.inSchema?obj.attr.name?' name="'+obj.attr.name+'" data-gigya-name="'+obj.attr.name+'"':"":obj.attr.name?' vocento-name="'+obj.attr.name+'"':"",value=value?' value="'+value+'"':"",html="<input"+type+id+name+value+">";break;case"checkbox":req=obj.required?'<label class="required" data-bound-to="'+obj.attr.name+'">*</label>':"",type=obj.attr.type?' type="'+obj.attr.type+'"':"",id=obj.attr.id?' id="'+obj.attr.id+'"':"",extraId=obj.attr.extraId?' id="'+obj.attr.extraId+'"':"",name=obj.inSchema?obj.attr.name?' name="'+obj.attr.name+'" data-gigya-name="'+obj.attr.name+'"':"":obj.attr.name?' vocento-name="'+obj.attr.name+'"':"",cls=obj.attr.cssClass?' class="gigya-input-checkbox '+obj.attr.cssClass+'"':' class="gigya-input-checkbox"',value="true"===value||!0===value?' checked="checked"':"";var checkBoxStyle=void 0!==fieldStyle&&fieldStyle?'style="'+fieldStyle+'"':"";html='<div class="gigya-composite-control gigya-composite-control-checkbox"><label class="gigya-label vocuser-custominputwrap" '+extraId+"><input"+type+id+cls+name+value+'><span class="vocuser-custominput-checkbox"></span><span class="gigya-label-checkbox vocuser-custominput-text" '+checkBoxStyle+">"+obj.displayText+"</span>"+req+'</label><span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span></div>';break;case"hiddenCheckbox":req=obj.required?'<label class="required" data-bound-to="'+obj.attr.name+'">*</label>':"",type=obj.attr.type?' type="checkbox"':"",id=obj.attr.id?' id="'+obj.attr.id+'"':"",extraId=obj.attr.extraId?' id="'+obj.attr.extraId+'"':"",name=obj.inSchema?obj.attr.name?' name="'+obj.attr.name+'" data-gigya-name="'+obj.attr.name+'"':"":obj.attr.name?' vocento-name="'+obj.attr.name+'"':"",cls=obj.attr.cssClass?' class="gigya-input-checkbox '+obj.attr.cssClass+'"':' class="gigya-input-checkbox"',value="true"===value||!0===value?' checked="checked"':"";var checkBoxStyle=void 0!==fieldStyle&&fieldStyle?'style="'+fieldStyle+'"':"";html='<div class="gigya-composite-control gigya-composite-control-checkbox" style="visibility:hidden; position:absolute"><label class="gigya-label vocuser-custominputwrap" '+extraId+"><input"+type+id+cls+name+value+'><span class="vocuser-custominput-checkbox"></span><span class="gigya-label-checkbox vocuser-custominput-text" '+checkBoxStyle+">"+obj.displayText+"</span>"+req+'</label><span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span></div>';break;case"label":var labelStyle="",labelClass="",displayText=obj.required?obj.displayText+" *":obj.displayText;if(void 0!==fieldStyle&&fieldStyle&&(labelStyle='style="'+fieldStyle+'"'),obj.attr.isPElement){html="<p>"+displayText+"</p>";break}obj.attr.labelClass&&""!==obj.attr.labelClass&&(labelClass=' class="txt-select-age"'),html='<div class="gigya-composite-control gigya-composite-control-label" '+labelStyle+">",html+=labelClass&&""!==labelClass?"<label"+labelClass+">"+displayText+"</label>":"<label>"+displayText+"</label>",html+="</div>";break;case"textbox":name=obj.inSchema?obj.attr.name?' name="'+obj.attr.name+'" data-gigya-name="'+obj.attr.name+'"':"":obj.attr.name?' vocento-name="'+obj.attr.name+'"':"",req=obj.required?' data-required="true" ':" ",extraId=""!==textboxId?' id="'+textboxId+'"':"",placeholder=obj.required?obj.displayText+" *":obj.displayText,html=gigyaOptions.userIsInAppWebviewFlow?'<div class="gigya-composite-control gigya-composite-control-textbox form-group"><input type="text" class="gigya-input-text form-control" data-display-name="'+obj.displayText+'" '+name+" "+req+" "+extraId+'"><label for="'+textboxId+'" class="form-control-placeholder form-control-placeholder--app">'+placeholder+'</label><span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span></div></div>':'<div class="gigya-composite-control gigya-composite-control-textbox form-group"><input type="text" class="gigya-input-text form-control" data-display-name="'+obj.displayText+'" '+name+" "+req+" "+extraId+'"><label for="'+textboxId+'" class="form-control-placeholder">'+placeholder+'</label><span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span></div></div>';break;case"textboxPrf":html=gigyaOptions.userIsInAppWebviewFlow?(req=obj.required?' data-required="true" ':" ",'<label class="form-control-placeholder--app">'+obj.displayText+'</label><input class="gigya-input-text" name="'+obj.attr.name+'" data-display-name="" type="text" placeholder="'+obj.displayText+'" '+req+'><span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span>'):(req=obj.required?' data-required="true" ':" ","<label>"+obj.displayText+'</label><input class="gigya-input-text" name="'+obj.attr.name+'" data-display-name="" type="text" placeholder="'+obj.displayText+'" '+req+'><span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span>');break;case"select":name=obj.inSchema?obj.attr.name?' name="'+obj.attr.name+'" data-gigya-name="'+obj.attr.name+'"':"":obj.attr.name?' vocento-name="'+obj.attr.name+'"':"",req=obj.required?' data-required="true" ':" ",cls=obj.attr.cssClass?"gigya-composite-control gigya-composite-control-textbox "+obj.attr.cssClass:"gigya-composite-control gigya-composite-control-dropdown form-group",html='<div class="'+cls+'">',selectClass=fieldStyle?"gigya-input-text form-control "+fieldStyle:"gigya-input-text form-control",html+='<select data-gigya-placeholder="'+obj.attr.placeholder+' " class="'+selectClass+'" data-display-name="'+obj.attr.placeholder+'" '+name+" "+req+">",$.each(obj.attr.options,function(e,o){e===obj.attr.value?(selected='data-gigya-placeholder="'+obj.attr.placeholder+'" disabled selected="selected" ',e=obj.required?e+" *":e):selected="",html+='<option value="'+o+'" '+selected+">"+e+"</option>"}),html+="</select>",html+='<span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span></div>';break;case"profileSelect":name=obj.inSchema?obj.attr.name?' name="'+obj.attr.name+'" data-gigya-name="'+obj.attr.name+'"':"":obj.attr.name?' vocento-name="'+obj.attr.name+'"':"";var req=obj.required?' data-required="true" ':" ",profileSpan='<span class="tercio">';html=profileSpan+'<select data-gigya-placeholder="'+obj.attr.placeholder+'" data-display-name="'+obj.attr.placeholder+'" '+name+" "+req+">",$.each(obj.attr.options,function(e,o){e===obj.attr.value?(selected='data-gigya-placeholder="'+obj.attr.placeholder+'" disabled selected="selected" ',e=obj.required?e+" *":e):selected="",html+='<option value="'+o+'" '+selected+">"+e+"</option>"}),html+="</select>",html+='<span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span></span>';break;case"profileTextbox":name=obj.inSchema?obj.attr.name?' name="'+obj.attr.name+'" data-gigya-name="'+obj.attr.name+'"':"":obj.attr.name?' vocento-name="'+obj.attr.name+'"':"",req=obj.required?' data-required="true" ':" ",profileSpan='<span class="tercio">',html=profileSpan+'<input type="text" data-gigya-placeholder="'+obj.displayText+'" class="gigya-input-text" data-display-name="'+obj.displayText+'" '+name+" "+req+'  placeholder="'+obj.displayText+'  *"><span class="gigya-error-msg" data-bound-to="'+obj.attr.name+'"></span></span>';break;case"date":req=obj.required?' data-required="true" ':" ",selectClass=fieldStyle?"gigya-input-text form-control "+fieldStyle:"gigya-input-text form-control",html='<select data-gigya-placeholder="'+obj.attr.placeholder+' " class="'+selectClass+'" data-display-name="'+obj.attr.placeholder+'" name="'+obj.attr.name+'" ',html+='data-gigya-name="'+obj.attr.name+'" '+req+">",$.each(obj.attr.options,function(e,o){e===obj.attr.value?(selected='data-gigya-placeholder="'+obj.attr.placeholder+'" disabled selected="selected" ',e=obj.required?e+" *":e):selected="",html+='<option value="'+o+'" '+selected+">"+e+"</option>"}),html+="</select>"}return html}function getColumnHTML(e){var r="";return $.each(e,function(e,o){var t=o.columnId?' id="'+o.columnId+'"':"",i=o.columnClass?' class="gigya-layout-cell '+o.columnClass+'"':' class="gigya-layout-cell"',n=o.columnStyle?' style="'+o.columnStyle+'"':"";r+="<div"+t+i+n+">"+getFieldHTML(o)+"</div>"}),r+='<div class="gigya-clear"></div>'}function getHTML(){if(asColumns)return getColumnHTML(fields);var t="";return $.each(fields,function(e,o){t+=getFieldHTML(o)}),t}function getRowFields(){var e=!1,t=[];return $.each(fields,function(e,o){t[t.length]=o.attr.name}),e=void 0!==t&&t&&t.length?t:e}function changeDisplayText(e){return fields.field.displayText&&e&&(fields.field.displayText=e),this}function modifyAttr(e,o){return fields.field.attr.hasOwnProperty(e)&&o&&(fields.field.attr[e]=o),this}function modifyRequired(e){return fields.field.required&&"boolean"==typeof e&&(fields.field.required=e),this}return void 0!==fields&&fields&&void 0!==fields.field&&fields.field&&(fields.field=$.extend(!0,{},default_obj,fields.field)),{html:function(){return getHTML()},getRowFields:function(){return getRowFields()},setOptions:setOptions,setData:setData,setProfile:setProfile,changeDisplayText:changeDisplayText,modifyAttr:modifyAttr,modifyRequired:modifyRequired}}function insertCustomFields(){var l={},u={fields:{},fieldsGroup:{},externalFieldsSection:{},screens:{}};function p(e){var o=!1;return o=void 0!==e&&e&&e.length?!0:o}function g(e){return void 0!==e&&e?!0:!1}function t(c,d){$.each(u.fieldsGroup[d.group],function(e,o){var t=!1,i=!1,n=u.fields[o];n.setOptions(l),n.modifyAttr("screen",c);var r=function(e,o){var t="";switch(o){case"registrationEnterpriseRss":case"registrationEnterprisePositionRss":case"city":case"province":case"cardGold":case"occupation":case"education":case"cardPlatinum":case"gender":case"maritalStatus":case"children":t=e;break;default:t='<div class="gigya-layout-row" data-vocento-row-key="'+o+'">'+e+"</div>"}return t}(n.html(),o),a="",s="",n="";g(d.elementId)&&!1===i&&(n="#"+(s=d.elementId),!1===p(a=$("#"+c).find("div"+n))&&(a=$(n)),p(a)?(a.append(r),a.find("input[placeholder]:visible").placeholder(),i=!0):(n="#"+s,a=!1===p(a=$("#"+c).find("div"+n))?$(n):$(n='div [name="'+s+'"]'),p(a)&&(a.append(r),i=!0))),(g(d.beforeField)||g(d.afterField))&&!1===i&&(s=g(d.beforeField)?d.beforeField:d.afterField,p(a=$("div#"+c+(n=' form div [name="'+s+'"]')).parents(".gigya-layout-row:first"))?t=!0:(!1===p(a=$(n="div#"+c+' form [name="'+s+'"]'))&&(a=$(n)),p(a)&&(o="","gigya-complete-registration-screen"===c?p(o=a.closest('div[class^="gigya-composite-control gigya-composite-control-"]'))&&(t=!0,a=o):p(o=a.parents(".gigya-layout-row:first"))?(t=!0,a=o):p(o=a.parents(".gigya-layout-cell:first"))?(t=!0,a=o):t=!0)),!0===t&&(g(d.beforeField)?a.before(r):a.after(r),i=!0)),g(d.lastRow)&&!0===d.lastRow&&!1===i&&(s=d.lastRow,!(n=" .gigya-layout-row:last")===p(a=$("#"+c+n))&&(a=$(n)),p(a)?a.after(r):(!(n=" div.gigya-layout-row:last")===p(a=$("form."+c+n))&&(a=$(n)),p(a)&&a.append(r)))})}return{setOptions:function(e){return l=e,this},setManifest:function(e){return u=e,this},getHTML:function(e){if(void 0!==u&&u&&void 0!==u.screens&&u.screens&&void 0!==e&&e&&void 0!==u.screens[e])for(var o in u.screens[e])u.screens[e].hasOwnProperty(o)&&t(e,u.screens[e][o]);return this},removeHTML:function(){return $("div[data-vocento-row-key]").remove(),this},getExternalFieldsNames:function(){return $("form:visible [vocento-name]")},setExternalFields:function(e){$.each(e,function(e,o){e=$('form:visible [vocento-name="'+e+'"]');e.is("input:checkbox")&&e.attr("checked",o),e.val(o)})}}}function translateError(e){return e.errorCode,e.errorMessage}function customValidation(){var n={},r={};function i(e){return void 0!==UnicodeToChar&&UnicodeToChar?UnicodeToChar(e):Vocento.UnicodeToChar(e)}function a(e){var o=!0,t=null;if(void 0!==e)try{t=grecaptcha.getResponse(e)}catch(e){t=$("#g-recaptcha-response").val()}if(void 0!==t&&t){t=n.authServer+"/validate/captcha?captchaResponse="+t;try{var i=new XMLHttpRequest;if("withCredentials"in i?i.open("GET",t,!1):"undefined"!=typeof XDomainRequest?(i=new XDomainRequest).open("GET",t,!1):i=null,!i)return;i.send(null),'{"success":true}'===JSON.parse(i.responseText)&&(o=!0)}catch(e){}}return o}function s(e){var o=!0,t=void 0!==$(e).attr("name")&&$(e).attr("name")?$(e).attr("name"):$(e).attr("vocento-name"),i="profile.birthDay"!==t&&"profile.birthMonth"!==t&&"profile.birthYear"!==t?"":"profile.birthDate";return void 0!==t&&"function"==typeof r[t]&&(o=r[t]($(e),$('[data-bound-to="'+t+'"].gigya-error-msg'))),void 0!==i&&"function"==typeof r[i]&&(o=r[i]($(e),$('[data-bound-to="'+i+'"].gigya-error-msg'))),void 0!==t&&"object"==typeof r[t]&&(o=r[t].validationName($(e),$('[data-bound-to="'+t+'"].gigya-error-msg'),r[t].validationParams)),void 0!==i&&"object"==typeof r[i]&&(o=r[i].validationName($(e),$('[data-bound-to="'+i+'"].gigya-error-msg'),r[i].validationParams)),void 0!==$(e).attr("vocento-name")&&void 0===r[t]&&(void 0!==$.trim($(e).val())&&$.trim($(e).val())?$(e).addClass("vocuser-valid"):$(e).removeClass("vocuser-valid")),o}function c(e,o,t){var i,n,r;return void 0!==e&&e&&(n="",void 0!==(i=$(e))&&i&&i.length&&(n=i.attr("data-display-name")||"",t=t||"El campo %name% no es v&aacute;lido",void 0===(r=i.parents("form:visible").find("input[type=submit]")).data("originalValue")&&r.data("originalValue",r.val()),r.val("Corrige los errores"),void 0!==i.offset&&i.offset()&&void 0!==i.offset().top&&(void(e=0)!==(r=$("#header")).offset&&r.offset()&&void 0!==r.offset().top&&(e=r.offset().top),$("html, body").animate({scrollTop:i.offset().top-e-1},200)),void 0!==i.attr("vocento-name")&&i.removeClass("vocuser-valid"),i.addClass("gigya-error")),void 0!==o&&o&&($(o).addClass("gigya-error-msg gigya-error-msg-active"),$(o).html(t.replace("%name%",n)),$(o).show())),!1}function d(e,o){$(e).removeClass("gigya-error"),$(e).removeClass("gigya-error-msg gigya-error-msg-active"),void 0!==$(e).attr("vocento-name")&&$(e).addClass("vocuser-valid"),$(o).html("").hide();o=$(e).parents("form").find("input[type=submit]"),e=o.data("originalValue");return void 0!==e&&e&&o.val(o.data("originalValue")),!0}function l(e,o){return"checkbox"===$(e).attr("type")?$(e).is(":checked")?d(e,o):c(e,o,"El campo %name% es obligatorio"):void 0!==$.trim($(e).val())&&$.trim($(e).val())?d(e,o):c(e,o,"El campo %name% es obligatorio")}function u(e,o,t,i,n){var r=void 0!==n?n:"El campo %name% no es correcto",a=t;"string"==typeof t&&(t=new RegExp(t));n=$(e).val();return void 0!==(n=void 0!==i&&i?i:n).match(t)&&n.match(t)?d(e,o):(a.toString(),/^\d{5}$/.toString(),c(e,o,r))}function p(e){var o=["ESPA"+i("N")+"A","ESPANYA","SPAIN","ESP","ES"],e=$(e).parents("form:visible"),e=$(e).find('[name="profile.country"]').val();return void 0!==e&&-1!==o.indexOf(e.toUpperCase())}function g(e){return""!==$.trim($(e).val())}return{setOptions:function(e){return n=e,this},setUser:function(e){return this},setAccount:function(e){return this},setFields:function(e){return r=$.extend(!0,r,e),this},validateForm:function(e,o){var t=!0;return $(e="string"==typeof e?"form."+e+":visible":e).find('input:visible[name], input:visible[vocento-name], select:visible[name], select:visible[vocento-name], textarea:visible[name], textarea:visible[vocento-name], input[type="checkbox"]').each(function(e,o){t=s($(o))&&t}),void 0!==o&&!0===t&&!0!==a(o)&&(t=!1,void 0!==o&&grecaptcha.reset(o),$("#vocento-error-captcha-msg").show(),$("#vocento-error-captcha-msg").html("<p>El valor del captcha es incorrecto</p>"),$("#vocento-error-captcha-msg").addClass("gigya-error-msg gigya-error-msg-active")),t},validateField:s,showEmailErrorForRegistration:function(e){var o="";switch(e.result.accountStatusCode){case 200005:case 200009:case 200011:var t=window.location.protocol+"//"+window.location.host+n.route.loginURL,o="El correo electr&oacute;nico ya existe, <br />  Te ayudamos a "+('<a href="'+(window.location.protocol+"//"+window.location.host+n.route.recoveryURL)+'">recordar tu contrase&ntilde;a </a>')+" o "+('<a href="'+t+'"> Iniciar sesi&oacute;n </a>');break;case 200006:o="Esta cuenta est&aacute; pendiente de validaci&oacute;n. <br /> Para disfrutar de los beneficios de registrado puedes <a href='#' id='validationLink'> validar ahora </a>";break;case 200007:o="Ya est&aacute;s registrado con Facebook. <br /> Puedes "+"<a href='#' class='gigya-facebook-login-link'> iniciar sesi&oacute;n con Facebook </a>"+" o "+"<a href='#' class='gigya-facebook-set-password-link'> establecer una contrase&ntilde;a a tu cuenta </a>",e.result.accounts[0].providers.indexOf("facebook")<0&&(o="Ya est&aacute;s registrado con Google. <br /> Puedes "+"<a href='#' class='gigya-google-login-link'> iniciar sesi&oacute;n con Google </a>"+" o "+"<a href='#' class='gigya-google-set-password-link'> establecer una contrase&ntilde;a a tu cuenta </a>");break;case 200010:o="Ya est&aacute;s registrado con Facebook y Google.<br/>Inicia sesi&oacute;n con una de tus cuentas: <br/>"+"<img class='gigya-facebook-login-link' src=https://cdns3.gigya.com/gs/i/HTMLLogin/facebook_25.png style='float:left;'> <img class='gigya-google-login-link' src=https://cdns3.gigya.com/gs/i/HTMLLogin/googleplus_25.png style='float:left;'>"+"<br/><br/> o "+"<a href='#' class='gigya-facebook-set-password-link'> establecer una contrase&ntilde;a a tu cuenta </a>"}return 0<o.length&&(c($('form:visible input[data-gigya-name="email"]'),'#gigya-register-screen span[data-bound-to="email"]',o),!0)},addField:function(e,o){r[e]=o},showError:function(e,o,t){c(e,o,t)},hideError:function(e,o){d(e,o)},_validateCaptcha:a,_requiredField:l,_regexField:u,_isSpain:p,_hasValue:g,_isZip:function(e,o){var t="El campo %name% no es correcto, debes introducir 5 d"+i("i")+"gitos";return p(e)?l(e,o)&&u(e,o,/^\d{5}$/,!1,t):l(e,o)},_isBirthDate:function(e,o){var t=e.val(),i=e.parents("form:visible"),n=$(i).find('[name="profile.birthMonth"]').val(),r=$(i).find('[name="profile.birthDay"]').val();return r&&n&&t?(i=new Date(t,n-1,r))&&i.getFullYear()!==Number(t)||i.getMonth()!==Number(n)-1||i.getDate()!==Number(r)?c(e,o,"La fecha no es v&aacute;lida"):d(e,o):c(e,o,"La fecha de nacimiento es obligatoria")},_isSpanishPhone:function(e,o){return p(e)&&g(e)?u(e,o,/^(8|9)[\d]{8}$/,$(e).val().replace(/(\(|\)|-| )/g,"")):d(e,o)},_isSpanishMobilePhone:function(e,o){return p(e)&&g(e)?u(e,o,/^(6|7)[\d]{8}$/,$(e).val().replace(/(\(|\)|-| )/g,"")):d(e,o)},_isValidMobilePhone:function(e,o){return g(e)?u(e,o,/^(6|7)[\d]{8}$/,$(e).val().replace(/(\(|\)|-| )/g,"")):d(e,o)},_isValidSpanishPhoneRequired:function(e,o){return g(e)?u(e,o,/^(6|7|8|9)[\d]{8}$/,$(e).val().replace(/(\(|\)|-| )/g,"")):c(e,o)},_isSpanishNIF:function(e,o){var t,i,n,r=(t=function(e){if(8!==e.length&&9!==e.length)return!1;8===e.length&&(e="0"+e);var o=new RegExp("^\\d{8}[a-zA-Z]{1}$");if(!e.match(o))return!1;o=e.substring(0,e.length-1);return"TRWAGMYFPDXBNJZSQVHLCKET".charAt(o%23)===e.charAt(e.length-1).toUpperCase()},i=function(e){if(10!==e.length&&9!==e.length)return!1;if("X"!==e.charAt(0).toUpperCase()&&"Y"!==e.charAt(0).toUpperCase()&&"Z"!==e.charAt(0).toUpperCase())return!1;var o="0";return"Y"===e.charAt(0).toUpperCase()&&(o="1"),9===e.length?t(o+e.substring(1,e.length)):t(e.substring(1,e.length))},n=function(e){var o=new Array(0,2,4,6,8,1,3,5,7,9),t=e.toUpperCase(),i=0,n=new RegExp("^[a-zA-Z]{1}\\d{7}[a-jA-J0-9]{1}$");if(!t.match(n))return!1;if(!/^[ABCDEFGHJKLMNPRQSUVW]/.test(t))return!1;for(var r=2;r<=6;r+=2)i+=o[parseInt(e.substr(r-1,1))],i+=parseInt(e.substr(r,1));return 10===(i=10-(i+=o[parseInt(e.substr(7,1))])%10)&&(i=0),(t=e.toUpperCase().charAt(8))===i||1===i&&"A"===t||2===i&&"B"===t||3===i&&"C"===t||4===i&&"D"===t||5===i&&"E"===t||6===i&&"F"===t||7===i&&"G"===t||8===i&&"H"===t||9===i&&"I"===t||0===i&&"J"===t},{checkAll:function(e){return!!n(e)||(!!i(e)||!!t(e))}});return(p(e)&&g(e)&&!r.checkAll($(e).val())?c:d)(e,o)},_isValidNIF:function(e,o){var t,i,n,r=(t=function(e){if(8!==e.length&&9!==e.length)return!1;8===e.length&&(e="0"+e);var o=new RegExp("^\\d{8}[a-zA-Z]{1}$");if(!e.match(o))return!1;o=e.substring(0,e.length-1);return"TRWAGMYFPDXBNJZSQVHLCKET".charAt(o%23)===e.charAt(e.length-1).toUpperCase()},i=function(e){if(10!==e.length&&9!==e.length)return!1;if("X"!==e.charAt(0).toUpperCase()&&"Y"!==e.charAt(0).toUpperCase()&&"Z"!==e.charAt(0).toUpperCase())return!1;var o="0";return"Y"===e.charAt(0).toUpperCase()&&(o="1"),9===e.length?t(o+e.substring(1,e.length)):t(e.substring(1,e.length))},n=function(e){var o=new Array(0,2,4,6,8,1,3,5,7,9),t=e.toUpperCase(),i=0,n=new RegExp("^[a-zA-Z]{1}\\d{7}[a-jA-J0-9]{1}$");if(!t.match(n))return!1;if(!/^[ABCDEFGHJKLMNPRQSUVW]/.test(t))return!1;for(var r=2;r<=6;r+=2)i+=o[parseInt(e.substr(r-1,1))],i+=parseInt(e.substr(r,1));return 10===(i=10-(i+=o[parseInt(e.substr(7,1))])%10)&&(i=0),(t=e.toUpperCase().charAt(8))===i||1===i&&"A"===t||2===i&&"B"===t||3===i&&"C"===t||4===i&&"D"===t||5===i&&"E"===t||6===i&&"F"===t||7===i&&"G"===t||8===i&&"H"===t||9===i&&"I"===t||0===i&&"J"===t},{checkAll:function(e){return!!n(e)||(!!i(e)||!!t(e))}});return(g(e)&&!r.checkAll($(e).val())?c:d)(e,o)},_isValidPhone:function(e,o){return g(e)?u(e,o,/^(6|7|8|9)[\d]{8}$/,$(e).val().replace(/(\(|\)|-| )/g,"")):d(e,o)},_isNumber:function(e,o){return g(e)?u(e,o,/^[0-9]+$/,$(e).val().replace(/(\(|\)|-| )/g,""),"El campo %name% no es correcto, debes introducir solamente d"+i("i")+"gitos"):d(e,o)},_isNumberRequired:function(e,o){return g(e)?u(e,o,/^[0-9]+$/,$(e).val().replace(/(\(|\)|-| )/g,""),"El campo %name% no es correcto, debes introducir solamente d"+i("i")+"gitos"):c(e,o,"El campo %name% es obligatorio")},_maxLength:function(e,o,t){return g(e)&&void 0!==t&&t?u(e,o,"^.{1,"+t+"}$",!1,"El campo %name% no es correcto, debes introducir como m"+i("a")+"ximo "+t+" caracteres"):d(e,o)},_maxLengthRequired:function(e,o,t){return g(e)?void 0!==t&&t?u(e,o,"^.{1,"+t+"}$",!1,"El campo %name% no es correcto, debes introducir como m"+i("a")+"ximo "+t+" caracteres"):void 0:c(e,o,"El campo %name% es obligatorio")},_minLengthRequired:function(e,o,t){return g(e)?void 0!==t&&t?u(e,o,"^.{"+t+",}$",!1,"El campo %name% no es correcto, debes introducir como m"+i("i")+"nimo "+t+" caracteres"):void 0:c(e,o,"El campo %name% es obligatorio")},_minLength:function(e,o,t){return g(e)&&void 0!==t&&t?u(e,o,"^.{"+t+",}$",!1,"El campo %name% no es correcto, debes introducir como m"+i("i")+"nimo "+t+" caracteres"):d(e,o)},_isCard:function(e,o){var t="El campo %name% no es correcto, debes introducir 16 d"+i("i")+"gitos";return g(e)?l(e,o)&&u(e,o,/^\d{16}$/,!1,t):d(e,o)},_isValidEmailFormatRequired:function(e,o){return g(e)?u(e,o,"^(?=(.{1,64}@.{1,255}))([!#$%&'*+\\-\\/=?\\^_`{|}~a-zA-Z0-9}]{1,64}(\\.[!#$%&'*+\\-\\/=?\\^_`{|}~a-zA-Z0-9]{0,}){0,})@(?!ono\\.com)((\\[(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}\\])|([a-zA-Z0-9-]{1,63}(\\.[a-zA-Z0-9-]{2,63}){1,}))$",!1,"El campo %name% no tiene el formato correcto"):c(e,o,"El campo %name% es obligatorio")}}}function safeInvoke(e,o){return e?e(o):'safeInvoke => Método: "'+e+'" no encontrado. Parámetros: "'+o+'"'}function getContext(){var e=new Date,e=Math.floor(e.getTime()/1e3);return{url:window.location.href,timestamp:e}}function reload(){document.location.reload()}function getMainDomain(){var e=document.domain.split(".");return e=2<=e.length?e[e.length-2]+"."+e[e.length-1]:e}function webBrowserDetector(){var e="",o=navigator.userAgent,t="",i=o.match(/(opera|edge|chrome|safari|firefox|msie|mobile|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1]))e="IE "+((t=/\brv[ :]+(\d+)/g.exec(o)||[])[1]||"");else{if("Chrome"===i[1]){if(void 0!==(t=o.match(/\bOPR\/(\d+)/))&&t)return"Opera"+(void 0!==t[1]?" "+t[1]:"");if(void 0!==(t=o.match(/\bEdge\/(\d+)/))&&t)return"Edge"+(void 0!==t[1]?" "+t[1]:"")}i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=o.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),e=i.join(" ")}return e}function decodeHTMLEntities(e){if(void 0===e||!e)return"";var t={amp:"&",apos:"'","#x27":"'","#x2F":"/","#39":"'","#47":"/",lt:"<",gt:">",nbsp:" ",quot:'"'};try{return e.replace(/&([^;]+);/gm,function(e,o){return void 0!==t[o]&&t[o]?t[o]:e})}catch(e){return""}}function emailDomainBanned(e,o){var i=!1;if(void 0!==e&&e&&void 0!==o&&o){o=o+"/api/v1/emailDomainBanned";try{$.ajax({url:o+"?callback=?",data:{email:e},type:"get",contentType:"application/json",dataType:"jsonp",async:!1,success:function(e){void 0!==e&&e&&!0===e.result&&(i=!0)},error:function(e,o,t){i=!1}})}catch(e){}}return i}return initUserUtils(),e4=$,function(e,o){for(var t=e.split("."),i=o.split("."),n=0;n<t.length;++n){var r=parseInt(t[n]),a=parseInt(i[n]);if(i.length===n)return-1;if(r!==a)return a<r?-1:1}return t.length!==i.length?1:0}("1.7",e4().jquery)<0&&(e4.fn.on||(e4.fn.on=function(e,o,t,i){if(null===t&&null===i?(i=o,t=o=void 0):null===i&&("string"==typeof o?(i=t,t=void 0):(i=t,t=o,o=void 0)),!1===i)i=function(){return!1};else if(!i)return this;return e4(this).bind(e,t,i)})),v4=$,w4="placeholder"in document.createElement("input"),x4=window.opera&&parseFloat(window.opera.version())<10.5,v4.fn.placeholder=function(e){var s=v4.extend({},v4.fn.placeholder.defaults,e),c=s.placeholderCSS.left;return w4?this:this.each(function(){var e=v4(this),o=v4.trim(e.val()),t=e.width(),i=e.height(),n=this.id||"placeholder"+Math.floor(1123456789*Math.random()),r=e.attr("placeholder"),a=v4("<label for="+n+">"+r+"</label>");s.placeholderCSS.width=t,s.placeholderCSS.height=i,s.placeholderCSS.color=s.placeholderCSS.color,s.placeholderCSS.left=!x4||"email"!==this.type&&"url"!==this.type?c:"11%",a.css(s.placeholderCSS),e.wrap(s.inputWrapper),e.attr("id",n).after(a),o&&a.hide(),e.focus(function(){v4.trim(e.val())||a.hide()}),e.blur(function(){v4.trim(e.val())||a.show()})})},v4.fn.placeholder.defaults={inputWrapper:'<span class="placeholder_emulate" style="position:relative; display:block;"></span>',placeholderCSS:{color:"#aaaaaa",position:"absolute",left:"5px",top:"3px","overflow-x":"hidden",display:"block"}},{version:function(){return version},initUserUtils:initUserUtils,log:log,UnicodeToChar:UnicodeToChar,translateError:translateError,safeInvoke:safeInvoke,getContext:getContext,reload:reload,getMainDomain:getMainDomain,webBrowserDetector:webBrowserDetector,decodeHTMLEntities:decodeHTMLEntities,emailDomainBanned:emailDomainBanned,Row:objectRow,customValidation:objectCustomValidation,insertCustomFields:objectInsertCustomFields,className:function(){return className}}}}),function(e,o){"use strict";"v3"===vocento.vocuser.VERSION?e.returnExports=o():"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("vocuser",o):"object"==typeof exports?module.exports=o():e.returnExports=o()}(this,function(){"use strict";function vocuser($,ssoGroup,service,externalOptions,userUtils,voontoApp,currentMedia,dependencyContainer,internalDependencies,externalFunctions){var version=("v3"===vocento.vocuser.VERSION?"3":"4")+".103.1",authenticated=!1,user=null,account=null,initialParams={},getJsErrors=function(){},sendDataToNewRelic=function(){},timeAfterLoadGigyaLoads=0,totalStartingTime=0,timeBeforeCallingRenderScreenSets=0,timeUserIsLogged=0,timeScreenSetIsRender=0,timeBeforeCallingUserTypeEndpoint=0,timeUserTypeEndpointObtained=0,timeBeforeCallingGigyaGetUserInfo=0,timeUserTypeObtained=0,timeBeforeCallingVerifyUniqueNickNameEndpoint=0,timeVerifyUniqueNickNameObtained=0,timeBeforeCallingCustomerServiceEndpoint=0,timeCustomerServiceObtained=0,timeBeforeCallingMediaDataTransferEndpoint=0,timeMediaDataTransferObtained=0,timeBeforeCallingNotifyLoginEndpoint=0,timeNotifyLoginObtained=0,timeBeforeCallingNotifyLoginItpEndpoint=0,timeNotifyLoginItpObtained=0,timeBeforeCallingNewslettersSubscribeEndpoint=0,timeNewslettersSubscribeObtained=0,timeBeforeCallingNewslettersAutoSubscribeEndpoint=0,timeNewslettersAutoSubscribeObtained=0,timeBeforeCallingJwtTokenEndpoint=0,timeJwtTokenObtained=0,timeBeforeCallingRenderAdditionalFieldsInScreenSets=0,timeRenderAdditionalFieldsInScreenSetsObtained=0,timeBeforeCallingNotifySocialLoginEndpoint=0,timeNotifySocialLoginObtained=0,timeBeforeRenderUserMenuWithCookieVocUid=0,timeRenderedUserMenuWithCookieVocUidObtained=0,timeBeforeRenderUserMenuWithGigyaAccountsOnDataReady=0,timeRenderedUserMenuWithWithGigyaAccountsOnDataReadyObtained=0,timeBeforeRenderUserMenuWithGigyaAccountsOnDataNoReady=0,timeRenderedUserMenuWithWithGigyaAccountsOnDataNoReadyObtained=0,timeBeforeRenderUserMenuWithProductsOnReadyEndpoint=0,timeRenderedUserMenuWithWithProductsOnReadyObtained=0,firedEventGigyaAccountsOnLogin=!1,firedEventVocUserCookieVocUidUpdated=!1,firedEventAccountsSocializeUserDataReady=!1,firedEventAccountsOnDataNoReady=!1,firedEventSocializeOnDataNoReady=!1,eventProductsOnReady=$.Deferred(),eventSetAccountInfoCallback=$.Deferred(),eventCheckService=$.Deferred(),eventServiceAdd=$.Deferred(),eventTokenJWTCreated=$.Deferred(),eventRedirectToBackUrlOnLogin=$.Deferred(),eventAccountsOnLogin=$.Deferred(),eventSocializeOnLogin=$.Deferred(),eventGetAccountInfo=$.Deferred(),eventGetUserInfo=$.Deferred(),eventLastActionBeforeRedirect=$.Deferred(),eventAdditionalData=$.Deferred(),loginAttemps=0,userClickedLogout=!1,gigyaResponse=null,captcha,options={},isFirstComment=!1,flushedProducts=!1,mainEventListener=initEventListener(voontoApp),promiseNamespace=initPromiseNamespace(),browser=void 0!==userUtils.webBrowserDetector?userUtils.webBrowserDetector():"",eventPrefixNamespace="vocento",eventPrefixSeparator=".",eventProjectNamespace="v3"===vocento.vocuser.VERSION?"gigya":"vocuser",eventSeparator="v3"===vocento.vocuser.VERSION?".":":",eventNamespace=initEventNamespace(),page={loginPage:"/login/login.html",loginAdditionalDataPage:"/login/datos-adicionales.html",registerPage:"/registro/formulario.html",registerConfirmedPage:"/registro/confirmacion.html",resendMailPage:"/registro/reenviar-mail.html",mailSendedPage:"/registro/mail-enviado.html",validateMailPage:"/registro/validacion-mail.html",recoveryPage:"/clave/recuperar.html",sendedMailPage:"/clave/mail-enviado.html",changePasswdPage:"/clave/cambiar.html",passwdchangedPage:"/clave/cambiada.html",setPasswdPage:"/clave/asignar.html",passwdSetedPage:"/clave/asignada.html",profilePage:"/perfil/perfil.html",interestPage:"/perfil/intereses.html",changePasswdProfilePage:"/perfil/cambiar-clave.html",profileUpdatedPage:"/perfil/actualizado.html"},reactFw=initReactFramework(voontoApp),reactDOM=initReactDOMFramework(voontoApp),reactIsLoaded=reactLoaded(),urlAreaPersonal="",simpleStorageDependency=initSimpleStorage(dependencyContainer),protectedFunctionsSimpleStorageDependency=getSimpleStorageDependency(),configManager=initDependency(dependencyContainer,"configManager"),DOMPurify=initDependency(dependencyContainer,"DOMPurify"),configDOMPurify={USE_PROFILES:{html:!0}},userIsInAppWebviewFlowAux=!1,AppWebview="";void 0!==externalOptions.userIsInAppWebviewFlow&&externalOptions.userIsInAppWebviewFlow&&(AppWebview=initDependency(dependencyContainer,"AppWebview"),userIsInAppWebviewFlowAux=!0,isAgronomaApp()&&simpleStorageDependency.set("isAgronomaApp",!0,{TTL:3e5})),userUtils=initUserUtils(userUtils);var log=function(){},safeInvoke=function(){};userUtils.safeInvoke&&(safeInvoke=userUtils.safeInvoke);var getContext=function(){};userUtils.getContext&&(getContext=userUtils.getContext);var translateError=function(){};userUtils.translateError&&(translateError=userUtils.translateError);var screenSetTypeToShow=-1<window.location.href.indexOf("screenset=app")?"app":"web",screenSetTypeToShowMobile=-1<window.location.href.indexOf("screenset=app")?"app":"mobile",enableAdditionalDataPage=!1,additionalDataActivatedBy="",showInterestsFields=!1,showNewslettersFields=!1,additionalManifest={},customInterestsFields={},customNewsLettersFields={},newslettersChecksBox=[],userNewslettersList=[],dataValidationZipObject={};function getClassName(){return"vocuser"}var className=getClassName(),QUEID_COOKIE_NAME="queid_log",UID_COOKIE_NAME="voc_uid",JWT_COOKIE="id_token",EDITION_COOKIE_NAME="voc_edition",NFRYL_COOKIE_NAME="vocuser_nfryl_volver_al_origen",EVK_COOKIE_NAME="evk_",PAYWALL_COOKIE_NAME="voc_paywall",VOCUSER_NEW_PASSWORD_NAME="vocuser_new_password",NEWSLETTERS_COOKIE_NAME="vocuser_arealibre_newsletters",VOCUSER_COOKIE_NAME="vocuser_information",VOCUSER_THANKYOU_COOKIE_NAME="vocuser_user_email",AUTO_NEWSLETTERS_COOKIE_NAME="vocuser_autosuscripcion_newsletters",RESEND_EMAIL_COOKIE_NAME="vocuser_resend_email_verfication",FROM_QUALIFIO_COOKIE_NAME="vocuser_referrer_from_qualifio",userTypeEkos="",flows=[],vocServicesPath={voccore:{crossdomain:{GET:"/vocuser/v1/crossdomain",POST:"/vocuser/v1/crossdomain",UPDATE:"/vocuser/v1/crossdomain",DELETE:"/vocuser/v1/crossdomain",OPTIONS:"/vocuser/v1/crossdomain"},googlejwttoken:{GET:"/vocuser/v1/user/swg/accesstoken",POST:"/vocuser/v1/user/swg/accesstoken",UPDATE:"/vocuser/v1/user/swg/accesstoken",DELETE:"/vocuser/v1/user/swg/accesstoken",OPTIONS:"/vocuser/v1/user/swg/accesstoken"}},"media-data-transfer-service":{"data-transfer":{GET:"/media-data-transfer/data-transfer",POST:"/media-data-transfer/data-transfer",UPDATE:"/media-data-transfer/data-transfer",DELETE:"/media-data-transfer/data-transfer",OPTIONS:"/media-data-transfer/data-transfer"}},"ekos-technical-synchronized":{"ekos-technical-synchronized-product":{GET:"/technical-synchronized/V01/synchronized/product",POST:"/technical-synchronized/V01/synchronized/product",UPDATE:"/technical-synchronized/V01/synchronized/product",DELETE:"/technical-synchronized/V01/synchronized/product",OPTIONS:"/technical-synchronized/V01/synchronized/product"}}},vocServicesSubdomain={voccore:"voccore","voccore-sevilla":"voccore-sevilla","media-data-transfer-service":"api","ekos-technical-synchronized":"ekos-technical-synchronized"},vocServicesEnvironmentPrefix={voccore:{local:"des",des:"des",dev:"des",pre:"pre",pro:""},"media-data-transfer-service":{local:"des",des:"des",dev:"des",pre:"pre",pro:""},"ekos-technical-synchronized":{local:"pre",des:"des",dev:"des",pre:"pre",pro:""}},vocServicesPrefix={voccore:{local:"-",des:"-",dev:"-",pre:"-",pro:""},"voccore-sevilla":{local:"-",des:"-",dev:"-",pre:"-",pro:""},"media-data-transfer-service":{local:"-",des:"-",dev:"-",pre:"-",pro:""},"ekos-technical-synchronized":{local:"-",des:"-",dev:"-",pre:"-",pro:""}},vocServicesHeaderAuth={voccore:{local:{},des:{},pre:{},pro:{}},"media-data-transfer-service":{local:{},des:{},pre:{},pro:{}},"ekos-technical-synchronized":{local:{abc:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMTEyLTAwMyIsIm5hbWUiOiJQUkUifQ.F4DiysgTOVbtuxRXU5tQP2h5gZ8xExyjpKBCcLgXnOxjKkAw5xP92umEijt9lt5TW2ZkEddhIVNMjWyF9UsX5w",elcorreo:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA1LTAwMyIsIm5hbWUiOiJQUkUifQ.Civ4B7kFJAUSPShkXZuEL_H2IJDYAzitio8wDYWdXRZwY-D4eWCmYVLSgChOZut9eSvHUgimrQtSNnwVerW4Cw",larioja:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA4LTAwMyIsIm5hbWUiOiJQUkUifQ.xYXzSexT_cQEJpcFw1K_EnFjKV0tIZmhs-xBd06jRFHLYXBrtDz8OtgVTFXo7WJQOSObk_KTpm80iV7VoUC-ew",elnortedecastilla:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDE0LTAwMyIsIm5hbWUiOiJQUkUifQ.yO_A7VLEyKct7azvYyDhiMzuTmJ6a7-h0Bgp6lNfRoNoFZZEWY4Fyu8n9t5SRCFfdPTzCVyt82_TrQhzJ6LCuQ",diariovasco:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA2LTAwMyIsIm5hbWUiOiJQUkUifQ.KTv1DGIzsiaPW34HJeBuUOQObEZuG7NeGMhbSPyt5g6eVZgBh1cRRGCGjU0LG9dVh5XARA_m_d30xm2Q9el8Pg",eldiariomontanes:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA3LTAwMyIsIm5hbWUiOiJQUkUifQ.76fAru17oillp8hzQcq1s1Aszwvwf1k4-B8act402u6hO2uTNOOCNgVrzht8ZVdjpboZMoPmrAM7TiVZKPnqjg",laverdad:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA5LTAwMyIsIm5hbWUiOiJQUkUifQ.qMuwjLf-7K6vyZbttZ6zmihlQPfKABHi59jz3fn6M4Y69ImT_7N5XtggoFIvi2fzJugcQMkw5D8GHiL6z2IYgg",ideal:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDEwLTAwMyIsIm5hbWUiOiJQUkUifQ.HJRt9Pon6YfmwbDhWIlgMfwDEd5k7dusbGamxoJon48hkEwh9HysSXQlNDGy6cc57FqOcVtPrR51e1LchxnD2w",diariosur:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDEyLTAwMyIsIm5hbWUiOiJQUkUifQ.1E15QSdctwojamWyUCHl-OrpbKzs4WgjEIPXN_BLOeOr0hCS0Z4gWEOH36umqrct9MS5_B81aGSA7QOavrtJiw",elcomercio:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDM1LTAwMyIsIm5hbWUiOiJQUkUifQ.oMcs3qxSC4nw76iHoQ6ZPDJsxGxWgR2BFakzAKltME67h63j9bjKkjhDjsOndvNjI3qgO5VZIHojvpXSuQToKw",lasprovincias:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDg2LTAwMyIsIm5hbWUiOiJQUkUifQ.5VhMgmZYLfkyPeeBUcrlUXf3j7kmz1e8OENFH1v_cPpHjvqMdX2dLxRZKPHsig-RzVR0axtysLmK9_xwNYkTPw",hoy:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDExLTAwMyIsIm5hbWUiOiJQUkUifQ.BaopCsUgPLl_9h3n_MnNa1NU_0xO3GWkuQiLAwvIJIq2I3NRha_2DcpyV05zWOgbm-mDV5b5MjU6VgaEyWEAig"},des:{abc:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMTEyLTAwMyIsIm5hbWUiOiJERVMifQ.EQUciOkHHibBHtytgr4o-sENeRVF1l5wDPdTrjJb4sIUQV-CpSn0fIkzs37cNKuhg1BMuR7NIWafoUchp5fPWQ",elcorreo:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA1LTAwMyIsIm5hbWUiOiJERVMifQ.EjoS84hT7e93RQxoAKm8CN02CNRDCEOQNNiuM7Ly-4ImCqgTGxqSRgTHE7GZPF69Ed68_y2PL4YCwmAXZ7Wu7Q",larioja:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA4LTAwMyIsIm5hbWUiOiJERVMifQ.fh-YthkI5u2eCxge7POnpBJsEA9UjSTKpCzmly5QGjVWJ-efVLtqAOYpMW_XpGbtleknWoG2IK4-E6P2LAaSPA",elnortedecastilla:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDE0LTAwMyIsIm5hbWUiOiJERVMifQ.IXEaIAbkH6NoQCzr4ESYLYQAanxB750rpvxBIBtJilAhf0frSPTl505uxhGuDbi70ynGFb__RM-xzImbuElhow",diariovasco:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA2LTAwMyIsIm5hbWUiOiJERVMifQ.KvaFilce5f9NG4DidbNvTtPxqsBdRIXxB45dOXaNVyeN_9AB-qzFzZrBTrpBhaJyxM1RseGdJsSpqxuchdHIAg",eldiariomontanes:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA3LTAwMyIsIm5hbWUiOiJERVMifQ.3Oud0iD1AFW1eteg8MTy5pLo3tOkaDWbWel_M9VU_3uGEUqxGvU4nzThdoKnDPnkTc3wwB2nRqgILxEFjcz32A",laverdad:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA5LTAwMyIsIm5hbWUiOiJERVMifQ._DdsQ9XSgudStTbK_m6HGg_JGh9_uW0CGn4zk0eFJhvWrqNZD4Yj2L8JupL-GF7uSUHutosJNS-7OzmgALR2hw",ideal:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDEwLTAwMyIsIm5hbWUiOiJERVMifQ.VDhyW2LlT0GEnrxvIaY0z5y98fYExbrNjpDYYl60O7cOVtRacMi0d8J7IzjmpkiftoHf40xqBhRRLEBj3rbb8A",diariosur:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDEyLTAwMyIsIm5hbWUiOiJERVMifQ.4P1zoYHhOmGbGifJ4KuYVf3jCWENpJ4rbGNp9OOPwx91AZ2CeaouHhfXDR0AnatuQlsJRfeNgibDKjiDfpiqUQ",elcomercio:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDM1LTAwMyIsIm5hbWUiOiJERVMifQ.fqtPXmNMKm-XLBxTwXMPPFyXsKhe0rGQiX0mUvbd3IHKxEu5Z-P9eFW2DRsSWZ0fbOddBHRGCYEZd06zUroXYw",lasprovincias:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDg2LTAwMyIsIm5hbWUiOiJERVMifQ.sZW_ymw0YJZMCZMbzp79tkfCL4Ccranlfe7bLGysuNvGt-Nne_10fF1UrzN7nHg29d_882847tqqq1vUaV6UhA",hoy:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDExLTAwMyIsIm5hbWUiOiJQUkUifQ.BaopCsUgPLl_9h3n_MnNa1NU_0xO3GWkuQiLAwvIJIq2I3NRha_2DcpyV05zWOgbm-mDV5b5MjU6VgaEyWEAig"},pre:{abc:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMTEyLTAwMyIsIm5hbWUiOiJQUkUifQ.F4DiysgTOVbtuxRXU5tQP2h5gZ8xExyjpKBCcLgXnOxjKkAw5xP92umEijt9lt5TW2ZkEddhIVNMjWyF9UsX5w",elcorreo:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA1LTAwMyIsIm5hbWUiOiJQUkUifQ.Civ4B7kFJAUSPShkXZuEL_H2IJDYAzitio8wDYWdXRZwY-D4eWCmYVLSgChOZut9eSvHUgimrQtSNnwVerW4Cw",larioja:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA4LTAwMyIsIm5hbWUiOiJQUkUifQ.xYXzSexT_cQEJpcFw1K_EnFjKV0tIZmhs-xBd06jRFHLYXBrtDz8OtgVTFXo7WJQOSObk_KTpm80iV7VoUC-ew",elnortedecastilla:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDE0LTAwMyIsIm5hbWUiOiJQUkUifQ.yO_A7VLEyKct7azvYyDhiMzuTmJ6a7-h0Bgp6lNfRoNoFZZEWY4Fyu8n9t5SRCFfdPTzCVyt82_TrQhzJ6LCuQ",diariovasco:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA2LTAwMyIsIm5hbWUiOiJQUkUifQ.KTv1DGIzsiaPW34HJeBuUOQObEZuG7NeGMhbSPyt5g6eVZgBh1cRRGCGjU0LG9dVh5XARA_m_d30xm2Q9el8Pg",eldiariomontanes:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA3LTAwMyIsIm5hbWUiOiJQUkUifQ.76fAru17oillp8hzQcq1s1Aszwvwf1k4-B8act402u6hO2uTNOOCNgVrzht8ZVdjpboZMoPmrAM7TiVZKPnqjg",laverdad:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA5LTAwMyIsIm5hbWUiOiJQUkUifQ.qMuwjLf-7K6vyZbttZ6zmihlQPfKABHi59jz3fn6M4Y69ImT_7N5XtggoFIvi2fzJugcQMkw5D8GHiL6z2IYgg",ideal:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDEwLTAwMyIsIm5hbWUiOiJQUkUifQ.HJRt9Pon6YfmwbDhWIlgMfwDEd5k7dusbGamxoJon48hkEwh9HysSXQlNDGy6cc57FqOcVtPrR51e1LchxnD2w",diariosur:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDEyLTAwMyIsIm5hbWUiOiJQUkUifQ.1E15QSdctwojamWyUCHl-OrpbKzs4WgjEIPXN_BLOeOr0hCS0Z4gWEOH36umqrct9MS5_B81aGSA7QOavrtJiw",elcomercio:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDM1LTAwMyIsIm5hbWUiOiJQUkUifQ.oMcs3qxSC4nw76iHoQ6ZPDJsxGxWgR2BFakzAKltME67h63j9bjKkjhDjsOndvNjI3qgO5VZIHojvpXSuQToKw",lasprovincias:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDg2LTAwMyIsIm5hbWUiOiJQUkUifQ.5VhMgmZYLfkyPeeBUcrlUXf3j7kmz1e8OENFH1v_cPpHjvqMdX2dLxRZKPHsig-RzVR0axtysLmK9_xwNYkTPw",hoy:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDExLTAwMyIsIm5hbWUiOiJQUkUifQ.BaopCsUgPLl_9h3n_MnNa1NU_0xO3GWkuQiLAwvIJIq2I3NRha_2DcpyV05zWOgbm-mDV5b5MjU6VgaEyWEAig"},pro:{abc:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMTEyLTAwMyIsIm5hbWUiOiJQUk8ifQ.BWSRBk_3ib2I6io25NYjAxZqUK-FbF22txP-3yDEvaP5ThvkdrLZ3gCMAAAK6nvivkrc8t2Oz0W8HnRc4CdWTQ",elcorreo:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA1LTAwMyIsIm5hbWUiOiJQUk8ifQ.fj7E4OSZsqiH9eafedxuUGIbTf8mf6KSmYRFMibP2PTi1p_Q3qB7DkW5ZnAhgRbUg1ud_3wjHr4U6Kv-qepAeg",larioja:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA4LTAwMyIsIm5hbWUiOiJQUk8ifQ.FfaEzCOLw84Y-RvzdjLv7OTL-4D8lTNYI4YLwO_NiVSj5ynvGG4dt7XL8_juVSD9NIZ9e77abz5DBUkB1T_fig",elnortedecastilla:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDE0LTAwMyIsIm5hbWUiOiJQUk8ifQ.wxbaSWrPP1goBrD1GEUpJzqzkULcrzrPwIvTKLX7EmFOofCMLo_XEU4YAmy5sstJ7s2CGxFUBwgxhH4PUzNy2g",diariovasco:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA2LTAwMyIsIm5hbWUiOiJQUk8ifQ.6NWv37O8AdmjHLJSvbY17W1gDN1WVMxIGVTvjBAz2p6sY1RbEjlw0UqRqDeDZZJTAYjsZA3GswpYOnS0qsdkcw",eldiariomontanes:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA3LTAwMyIsIm5hbWUiOiJQUk8ifQ.W1Z7oIc19f6d8EwrMMQHHN-9-qTp9j6ACzrZKFVd63Tfqc9qqYACWi_SNJeDqe2lAPy5y76SSx8rIk78d1V2JA",laverdad:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDA5LTAwMyIsIm5hbWUiOiJQUk8ifQ.bbEhRWI3Zl08qiEiYXeFBNXUHLfphWuMgSZpDmEzJDd4MsXPTTIy3a09RRL5PFtYdE-yYTsB0zie1OXIQ4RcIw",ideal:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDEwLTAwMyIsIm5hbWUiOiJQUk8ifQ.gxG1Wx0vsmvoEos-paIiGCZ1rdUMvcR827w2kxANt-TXU4KUiPn8QVX4zhINwAgdpK_irM7eNI-8raegAyNGDw",diariosur:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDEyLTAwMyIsIm5hbWUiOiJQUk8ifQ.Hnw7Q88VQw_m5K6SCkfmPRbg_zuITkBWexEB3fhqU_Fzq1sqMZ0C-g7b8rZHMZunn9vy80sB4kh6ZF-WvjJlYA",elcomercio:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDM1LTAwMyIsIm5hbWUiOiJQUk8ifQ.E3PRQgVFUKxCYf-nlxMSiiXHOP6Np6l0ArqXZZzYqlg4ZmtkPcWfeLXntGlevXjZ3-_8klElm4YEw5AtJTYCqA",lasprovincias:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDg2LTAwMyIsIm5hbWUiOiJQUk8ifQ.xt_5e17fw6Un9cTrv_DyzjJem96DFdqIWBfUNkhPbeC-lSY1dtpXIKfK4ykGh1ISg8wWBhMieClsJN5mggJsLA",hoy:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJDMDExLTAwMyIsIm5hbWUiOiJQUk8ifQ.ATJUzyS8kRMr30E0Oy07IU7-1Eu4aqw6UqwesEe6RdITZUO0fTtEJfYizxFkU-f2ynyuHBeURF3Y1uDjJSpX7A"}}},domains={abc:"abc.es",sur:"diariosur.es",diariovasco:"diariovasco.com",elcomercio:"elcomercio.es",correo:"elcorreo.com",elcorreo:"elcorreo.com",diariomontanes:"eldiariomontanes.es",nortedecastilla:"elnortedecastilla.es",hoy:"hoy.es",ideal:"ideal.es",larioja:"larioja.com",lasprovincias:"lasprovincias.es",laverdad:"laverdad.es",lavoz:"lavozdigital.es",hoymujer:"mujerhoy.com",leonoticias:"leonoticias.com",surinenglish:"surinenglish.com",xlsemanal:"xlsemanal.com",codeanyapp:"diariovasco.com",burgosconecta:"burgosconecta.es",madridfusion:"madridfusion.net",pidentradas:"pidentradas.com",canarias7:"canarias7.es",salamancahoy:"salamancahoy.es",todoalicante:"todoalicante.es"};function initSubDomainEnvFront(e){var o="www";if(void 0===e||!e)return o;var t=window.location.host;return"pro"===e&&(o="secure"),"pre"===e&&(o="pre-secure"),"des"===e&&(o="des-secure"),/^www-/.test(t)&&(o="secure"),/^new-/.test(t)&&(o="secure"),/^pre-/.test(t)&&(o="pre-secure"),/^des-/.test(t)&&(o="des-secure"),o="local"===e?t.split(".")[0]:o}function initCurrentEnv(){var e="pro",o=void 0!==configManager&&configManager?configManager.getEnvironment():"";return(/^des/.test(window.location.host)||/^integracion/.test(window.location.host)||/^areapersonal-des/.test(window.location.host)||/^areapersonalm-des/.test(window.location.host)||/^docker/.test(window.location.host))&&(e="des"),(/^pre/.test(window.location.host)||/^areapersonal-pre/.test(window.location.host)||/^areapersonalm-pre/.test(window.location.host))&&(e="pre"),(/^pro/.test(window.location.host)||/^secure/.test(window.location.host)||/^new/.test(window.location.host)||/^www/.test(window.location.host))&&(e="pro"),(/^local/.test(window.location.host)||/^userplayground-miguelromero2000/.test(window.location.host)||/^desnlocal/.test(window.location.host)||/^deshared/.test(window.location.host)||/^desn-user/.test(window.location.host)||/^des-vocuser/.test(window.location.host))&&(e="local"),"local"===o&&(e="local"),e="pro"===o?"pro":e}function initUserUtils(e){return void 0!==e&&e?e:Vocento}function initSimpleStorage(e){var o=!1;return void 0!==e&&e&&void 0!==e.simpleStorage&&e.simpleStorage?o=e.simpleStorage:"undefined"!=typeof simpleStorage&&simpleStorage&&(o=simpleStorage),o}function initDependency(e,o){var t=!1;return t=void 0!==e&&e&&void 0!==e[o]&&e[o]?e[o]:t}function getSimpleStorageDependency(){var e={};return void 0!==simpleStorageDependency&&simpleStorageDependency?e=simpleStorageDependency:(e.get=function(){log("initSimpleStorage => get() => No se ha podido cargar la librería simpleStorage","warn")},e.set=function(){log("initSimpleStorage => set() => No se ha podido cargar la librería simpleStorage","warn")},e.deleteKey=function(){log("initSimpleStorage => deleteKey() => No se ha podido cargar la librería simpleStorage","warn")}),e}function promiseWithTimeout(e,o){if(void 0===e||!e)return new promiseNamespace(function(e,o){return o("promiseWithTimeout: bad parameter, promise not passed as first argument.")});var t=void 0!==o&&o?o:3e3,i=null,o=new promiseNamespace(function(e,o){i=setTimeout(function(){return clearTimeout(i),o("Timed out in "+t+" ms.")},t)}),o=promiseNamespace.race([e,o]);return o.then(function(e){clearTimeout(i)}),o}function initPromiseNamespace(){var e=window.Promise||(window.RSVP?window.RSVP.Promise:window.ES6Promise||function(e){});return void 0!==e&&e||log("VocUser::initPromiseNamespace => ERROR obteniendo el namespace de JS de Promise.","error"),e}function initReactFramework(e){var o=!1;return void 0!==(o=void 0!==e&&e&&void 0!==e.R&&e.R?e.R:o)&&o&&"function"!=typeof o||"undefined"!=typeof React&&React&&(o=React),o=!(void 0!==o&&o&&"function"!=typeof o||userIsInFlowScreen()||"abc"===ssoGroup)?Voonto.require("react").then(function(e){o=e}):o}function initReactDOMFramework(e){var o=!1;return void 0!==(o=void 0!==e&&e&&void 0!==e.RDOM&&e.RDOM?e.RDOM:o)&&o&&"function"!=typeof o||"undefined"!=typeof ReactDOM&&ReactDOM&&(o=ReactDOM),o}function reactLoaded(){return void 0!==reactFw&&reactFw&&void 0!==reactDOM&&reactDOM?!0:!1}function setInitialParams(e){return void 0!==e&&e?e:{}}function getTimeBeforeCallingRenderScreenSets(){return timeBeforeCallingRenderScreenSets}function setTimeBeforeCallingRenderScreenSets(e){void 0!==e&&e||(timeBeforeCallingRenderScreenSets=0),timeBeforeCallingRenderScreenSets=e}function trackScreenSetsRenderTime(e){if(void 0===e||!e)return!1;var o="Render Login Form";options.screenName.login===e&&(o="Render Login Form");o={nrEventId:"PWAEvent",type:"render",step:o=options.screenName.formulario===e?"Render Register Form":o,timeSinceLoad:Math.round(window.performance.now()),domain:location.hostname};return sendDataToNewRelic(o),!0}function trackGigyaApiScreenSetsRenderTime(e){if(void 0===e||!e)return!1;var o="Request Login Form";options.screenName.login===e&&(o="Request Login Form");o={nrEventId:"PWAEvent",type:"vocuser",step:o=options.screenName.formulario===e?"Request Register Form":o,timeSinceLoad:Math.round(getTimeBeforeCallingRenderScreenSets()),duration:Math.round(window.performance.now()-getTimeBeforeCallingRenderScreenSets()),domain:location.hostname};return sendDataToNewRelic(o),!0}function setTimeScreenSetIsRender(e){timeScreenSetIsRender=e}function setBeforeRenderUserMenuWithCookieVocUid(e){timeBeforeRenderUserMenuWithCookieVocUid=e}function setRenderedUserMenuWithCookieVocUidObtained(e){timeRenderedUserMenuWithCookieVocUidObtained=e}function setRenderedUserMenuWithGigyaAccountsOnDataReady(e){timeBeforeRenderUserMenuWithGigyaAccountsOnDataReady=e}function setRenderedUserMenuWithGigyaAccountsOnDataReadyObtained(e){timeRenderedUserMenuWithWithGigyaAccountsOnDataReadyObtained=e}function setRenderedUserMenuWithGigyaAccountsOnDataNoReady(e){timeBeforeRenderUserMenuWithGigyaAccountsOnDataNoReady=e}function setRenderedUserMenuWithGigyaAccountsOnDataNoReadyObtained(e){timeRenderedUserMenuWithWithGigyaAccountsOnDataNoReadyObtained=e}function setRenderedUserMenuWithProductsOnReadyEndpoint(e){timeBeforeRenderUserMenuWithProductsOnReadyEndpoint=e}function setRenderedUserMenuWithProductsOnReadyObtained(e){timeRenderedUserMenuWithWithProductsOnReadyObtained=e}function getOptions(){var e=window.location.protocol,o="",t="",i="",n="",r="",a="pro",s=e+"//postalcodes.vocento.com/pcodes/v1/get",c=void 0!==configManager&&configManager?configManager.getEnvironment():"",d="voccore.";checkUserFlowUrlsContains("sevilla",window.location.href)&&(d="voccore-sevilla.");domains[ssoGroup].split(".");var o="https://auth."+domains[ssoGroup],l="",u="",n=(r="https://"+l+u+d)+domains[ssoGroup];(/^des/.test(window.location.host)||/^integracion/.test(window.location.host)||/^areapersonal-des/.test(window.location.host)||/^areapersonalm-des/.test(window.location.host)||/^docker/.test(window.location.host)||/^userplayground-miguelromero2000/.test(window.location.host))&&"pro"!==c&&(o=e+"//pre-auth."+domains[ssoGroup],i=t="des-",l="des",u="-","https:"===window.location.protocol&&(o=e+"//pre-auth."+domains[ssoGroup]),d="voccore-",checkUserFlowUrlsContains("sevilla",window.location.href)&&(d="voccore-sevilla."),d="voccore.",n=(r="https://"+l+u+(d=checkUserFlowUrlsContains("sevilla",window.location.href)?"voccore-sevilla.":d))+domains[ssoGroup]),(/^pre/.test(window.location.host)||/^areapersonal-pre/.test(window.location.host)||/^areapersonalm-pre/.test(window.location.host))&&"pro"!==c&&(o=e+"//pre-auth."+domains[ssoGroup],i=t="pre-",l="pre",u="-","https:"===window.location.protocol&&(o=e+"//pre-auth."+domains[ssoGroup]),d="voccore-",checkUserFlowUrlsContains("sevilla",window.location.href)&&(d="voccore-sevilla."),d="voccore.",n=(r="https://"+l+u+(d=checkUserFlowUrlsContains("sevilla",window.location.href)?"voccore-sevilla.":d))+domains[ssoGroup]),(/^local/.test(window.location.host)||/^desnlocal/.test(window.location.host)||/^deshared/.test(window.location.host)||/^desn-user/.test(window.location.host)||/^des-vocuser/.test(window.location.host))&&"pro"!==c&&(o=e+"//pre-auth."+domains[ssoGroup],i=t="des-",l="pre",u="-","https:"===window.location.protocol&&(o=e+"//pre-auth."+domains[ssoGroup]),d="voccore.",n=(r="https://"+l+u+(d=checkUserFlowUrlsContains("sevilla",window.location.href)?"voccore-sevilla.":d))+domains[ssoGroup]);c=initSubDomainEnvFront(a=initCurrentEnv()),e="/personalizacion/perfil/perfil.html",l="/personalizacion/perfil/intereses.html",u="/personalizacion/perfil/cambiar-clave.html",d="/personalizacion/perfil/actualizado.html";return-1===window.location.host.indexOf("abc")&&-1===window.location.host.indexOf("lavozdigital")&&(e="/perfil/perfil.html",l="/perfil/intereses.html",u="/perfil/cambiar-clave.html",d="/perfil/actualizado.html"),{currentRoute:!1,cid:ssoGroup,ssoGroup:ssoGroup,service:service,authServer:o,envVoccore:i,envFront:c,authServerVocCore:n,authServerVocCoreSubDomain:r,currentEnvironment:a,debug:!1,hasPaywall:!1,hasEcommerce:!1,registerPaywall:!1,hasGlobalSSO:!1,autoVerifyUser:!1,loginOnVerify:!1,reloadOnLogin:!0,reloadOnLogout:!0,captcha:{isVisible:!1,loginAttemps:2},domains:domains,enableCNAME:!1,addPictureInLoginScreen:!1,addSubmenuOptionMusiK:!1,addSubmenuOptionLaButaca:!1,addSubmenuOptionDinero:!1,addSubmenuOptionTerritorio:!1,addSubmenuOptionEvasion:!1,forceProvidersLogout:!1,enabledProviders:"facebook,google",requiredCapabilities:"login",loggedInSelector:".gigya-logged-in",loggedOutSelector:".gigya-logged-out",loginLinkSelector:".gigya-login-link",registrationLinkSelector:".gigya-registration-link",recoveryLinkSelector:".gigya-recovery-link",backLinkSelector:".gigya-back-link",profileLinkSelector:".gigya-profile-link",profileAreaPersonalLinkSelector:".vocuser-profile-areapersonal-link",profileInterestsLinkSelector:".gigya-profile-interests-link",profileChangePasswdLinkSelector:".gigya-profile-change-passwd-link",loginAdditionalDataLinkSelector:".gigya-additional-data-link",logoutLinkSelector:".gigya-logout-link",rrssLinkSelector:{facebookLogin:".gigya-facebook-login-link",googleLogin:".gigya-google-login-link",setNewPasswordFacebook:".gigya-facebook-set-password-link",setNewPasswordGoogle:".gigya-google-set-password-link",dismissRrssNotCompletedAccount:".gigya-continue-site-registration-link",finishRrssRegistration:".gigya-finish-rrss-registration-link"},appWebview:{close:".gigya-close-appwebview",facebookClose:".gigya-close-appwebview-facebook",googleClose:".gigya-close-appwebview-google",appleClose:".gigya-close-appwebview-apple"},cookiePolicyLinkSelector:"a[name='cookies']",idDivHtmlCustomBenefits:"collapseExample",addConnectionsID:"gigya-add-connections",userThumbnailSelector:".gigya-user-thumbnail",userFirstNameSelector:".gigya-user-first-name",userLastNameSelector:".gigya-user-last-name",userEmailSelector:".gigya-user-email",url_creacion_mongo:"https://"+t+"voccore."+domains[ssoGroup]+"/v1/datastore/new",url_busqueda_mongo:"https://"+t+"voccore."+domains[ssoGroup]+"/v1/datastore/find",url_edicion_mongo:"https://"+t+"voccore."+domains[ssoGroup]+"/v1/datastore/edit",customerContact:{pro:"https://areapersonal."+domains[ssoGroup]+"/customer/contact/post/",pre:"https://areapersonal-predes."+domains[ssoGroup]+"/customer/contact/post/"},sectionsWithExternalFields:[],emailRegex:/^(?=(.{1,64}@.{1,255}))([!#$%&'*+\-\/=?\^_`{|}~a-zA-Z0-9}]{1,64}(\.[!#$%&'*+\-\/=?\^_`{|}~a-zA-Z0-9]{0,}){0,})@((\[(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}\])|([a-zA-Z0-9-]{1,63}(\.[a-zA-Z0-9-]{2,63}){1,}))$/,rtimAdditionalData:{"user-agent":navigator.userAgent,vhost:location.hostname,url:location.href,userType:"anonimo",referrer:location.origin,title:document.title,article_url:location.href,ev_ss:"",ev_sid:"",ev_did:""},evolokUrlForRtimData:{pro:"https://voc.evolok.net/acd/api/3.0/authorize/json?",pre:"https://voc.uat.evolok.net/acd/api/3.0/authorize/json?"},shoppingCartHTML:{productNameSelector:".vocuser-product-name",priceSelector:".vocuser-product-price",discountSelector:".vocuser-product-discount",totalSelector:".vocuser-product-total"},screenSetTypeToShow:screenSetTypeToShow,screenSetTypeToShowMobile:screenSetTypeToShowMobile,screenSet:{web:{auth:"",profile:""},mobile:{auth:"",profile:""},app:{auth:"",profile:""},appwebview:{auth:"",profile:""}},screenName:{login:"gigya-login-screen",registration:"gigya-register-screen",formulario:"gigya-register-screen",profile:"gigya-update-profile-screen",completeRegistration:"gigya-complete-registration-screen",completo:"gigya-complete-registration-screen",interests:"gigya-update-profile-screen-3",change:"gigya-change-password-screen",updated:"gigya-update-thanks-screen",setear:"gigya-set-password-screen",seteada:"gigya-set-password-success-screen"},parentDivClass:"",hasMenuOptionNewsletters:!1,hasMenuOptionFAQ:!0,setUserNewslettersByFieldAdsMedia:!1,saveGigyaCommunications:!1,updateSelligentCommunications:!1,saveGigyaCustomerServices:!0,progressiveProfile:!1,saveGigyaCustomerServiceFromComments:!1,serviceId:"100",device:"Sin especificar",platform:"Sin especificar",serviceReference:"",backURL:"/",page:page,pageLogged:{loginAdditionalDataPage:"/login/datos-adicionales.html",passwdSetedURL:"/clave/asignada.html",profilePage:"/perfil/perfil.html",interestPage:"/perfil/intereses.html",changePasswdProfilePage:"/perfil/cambiar-clave.html",profileUpdatedPage:"/perfil/actualizado.html",redirectionPage:"/registro/redireccion.html"},route:{loginURL:"/login/login.html",loginAdditionalDataURL:"/login/datos-adicionales.html",registerURL:"/registro/formulario.html",registerConfirmedURL:"/registro/confirmacion.html",resendMailURL:"/registro/reenviar-mail.html",mailSendedURL:"/registro/mail-enviado.html",validateMailURL:"/registro/validacion-mail.html",redirectionURL:"/registro/redireccion.html",recoveryURL:"/clave/recuperar.html",sendedMailURL:"/clave/mail-enviado.html",changePasswdURL:"/clave/cambiar.html",passwdchangedURL:"/clave/cambiada.html",setPasswdURL:"/clave/asignar.html",passwdSetedURL:"/clave/asignada.html",profileURL:e,interestURL:l,changePasswdProfileURL:u,profileUpdatedURL:d,personalAreaSuscriptionSectionURL:"/suscripcion/",personalAreaCheckoutSectionURL:"/checkout/"},popUpMode:!1,popUpModeProfile:!1,enableRedirect:!0,htmlBenefits:'<ul class="vocuser-listchecks"><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Podr&aacute;s participar en concursos, sorteos y promociones</span></li><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Disfrutar&aacute;s de ofertas exclusivas</span></li><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Estar informado sobre las noticias más relevantes del día a través de nuestra newsletter diaria así como sobre noticias asociadas a hechos de especial relevancia informativa</span></li><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Acceso a información sobre novedades editoriales de la Sociedad</span></li><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Podr&aacute;s compartir las noticias</span></li></ul>',privacyPolicy:"20220404",autosubscribeConfig:{},webComponents:!1,showAdditionalDataPage:!1,showGoldenRecords:!1,showAdsMedia:!1,showAdsGroup:!1,showAdsThirdparty:!1,goldenRecordsFields:[],additionalDataCustomText:{title:"",description:"",footer:""},interestsGroups:{},newslettersGroup:{},userIsInFlow:!1,userIsInFLowScreenSession:!1,userIsInAppWebviewFlow:userIsInAppWebviewFlowAux,vocServicesPath:vocServicesPath,serviceCallToMediaDataTransfer:!1,hasMenuOptionsForAreaPersonal:!0,urlPostalCode:s,showAdditionalDataPageWithExtraRequirements:!1,redirectedFromQualifio:!1,allowEditGoldenRecords:!1,allowEditAdditionalUserInfo:!1,editableFields:["profile.lastName","data.secondLastName","data.nif","data.phone","data.phoneMobile","data.industry"],mustToShowZipInNotEditorialFlow:!0,editorialRegistrationAccessFields:["passwordRetype"],editorialRegistrationPersonalDataFields:["zip"],extensionType:"",cleanFormFields:{}}}function updateAccountData(e){var o={};if(void 0!==e&&e){for(var t in void 0!==account.data&&account.data||(account.data={}),e)e.hasOwnProperty(t)&&(account.data[t]=e[t]);o=account.data}return o}function checkBackUrlCookieContains(e){var o,t=!1;return void 0===e||!e||void 0!==(o=getNfrylCookie())&&o&&-1<o.indexOf(e)&&(t=!0),t}function checkUserFlowUrlsContains(e,o){var t=!1;return t=void 0!==e&&e&&!1===(t=void 0!==o&&o&&-1<o.indexOf(e)?!0:t)?checkBackUrlCookieContains(e):t}function registerFlow(e){var o;return void 0!==e&&e&&(void 0!==e.className&&isStringInArray(o=e.className(),getAllFlowsNames(flows))?log("La clase "+o+" ya está registrada","warn"):flows.push(e)),this}function getAllFlowsNames(e){for(var o=[],t=0;t<e.length;t++)void 0!==e&&e&&void 0!==e[t].className()&&o.push(e[t].className());return o}function isStringInArray(e,o){var t=!1;if(void 0!==e&&e&&void 0!==o&&o)for(var i=0;i<o.length;i++)o[i]===e&&(t=!0);return t}function initOptions(){for(var e=0,e=0;e<flows.length;e++)options=$.extend(!0,options,flows[e].getOptions());options=$.extend(!0,options,externalOptions)}function initProtectedFunctions(){for(var e=0;e<flows.length;e++)void 0!==flows[e].getProtectedFunctions&&(protectedFunctions=$.extend(!0,protectedFunctions,flows[e].getProtectedFunctions()));void 0!==externalFunctions&&externalFunctions&&(protectedFunctions=$.extend(!0,protectedFunctions,externalFunctions))}function initCustomValidationPlugin(){var e=!1;if(userUtils.customValidation.setOptions){userUtils.customValidation.setOptions(options);for(var o=0;o<flows.length;o++)void 0!==flows[o].getCustomValidationFields&&userUtils.customValidation.setFields(flows[o].getCustomValidationFields());e=!0}return e}function initFlows(){for(var e=0;e<flows.length;e++)flows[e].setOptions(options),flows[e].setProtectedFunctions(protectedFunctions);return!0}function executeFlows(){for(var e=0;e<flows.length;e++)flows[e].execute()}function openScreenByRoute(){for(var e in options.page){var o=options.page[e];-1!==window.location.pathname.indexOf(o)&&(options.currentRoute=!0,callToShowScreenFunction(e))}}function callToShowScreenFunction(e){var o=!1;switch(e){case"changePasswdPage":void 0!==(o=getQueryVariable("errorCode"))&&o?"400006"===o.substring(0,6)&&showScreen(options.screenName.expiredPwdToken):showScreen(options.screenName.resetear);break;case"changePasswdProfilePage":showScreen(options.screenName.cambiar,options.screenSet[options.screenSetTypeToShow].profile,options.screenSet[options.screenSetTypeToShowMobile].profile);break;case"interestPage":showScreen(options.screenName.intereses,options.screenSet[options.screenSetTypeToShow].profile,options.screenSet[options.screenSetTypeToShowMobile].profile);break;case"loginAdditionalDataPage":showAditionalDataScreen();break;case"loginPage":showScreen(options.screenName.login);break;case"mailSendedPage":showScreen(options.screenName.reenviado);break;case"passwdchangedPage":showScreen(options.screenName.cambiado);break;case"setPasswdPage":showScreen(options.screenName.setear);break;case"passwdSetedPage":showScreen(options.screenName.seteada);break;case"profilePage":showScreen(options.screenName.perfil,options.screenSet[options.screenSetTypeToShow].profile,options.screenSet[options.screenSetTypeToShowMobile].profile);break;case"profileUpdatedPage":showScreen(options.screenName.actualizado,options.screenSet[options.screenSetTypeToShow].profile,options.screenSet[options.screenSetTypeToShowMobile].profile);break;case"recoveryPage":showScreen(options.screenName.recuperar);break;case"registerConfirmedPage":showScreen(options.screenName.confirmacion);break;case"registerPage":showScreen(options.screenName.formulario);break;case"resendMailPage":showScreen(options.screenName.reenviar);break;case"sendedMailPage":showScreen(options.screenName.enviado);break;case"validateMailPage":void 0!==(o=getQueryVariable("errorCode"))&&o?("0"===o&&showScreen(options.screenName.validacion),"403002"===o.substring(0,6)&&showScreen(options.screenName.expirado),"404000"===o.substring(0,6)&&showScreen(options.screenName.unexist),"400010"===o.substring(0,6)&&showScreen(options.screenName.reserved)):showScreen(options.screenName.validacion),"206005"===o.substring(0,6)&&showScreen(options.screenName.autologin)}}function getQueryVariable(e){for(var o=window.location.search.substring(1).split("&"),t=0;t<o.length;t++){var i=o[t].split("=");if(decodeURIComponent(i[0])===e){var i=decodeURIComponent(i[1]);return i=void 0!==i&&"undefined"!==i?i:null}}}function cleanInput(e){return DOMPurify.sanitize(e,configDOMPurify)}function addProtectedFunctionsToUnitTesting(){var e=!1;if(void 0!==objectUnitTesting&&objectUnitTesting){for(var o in protectedFunctions)protectedFunctions.hasOwnProperty(o)&&void 0!==protectedFunctions[o]&&(objectUnitTesting[o]=protectedFunctions[o]);e=!0}return e}function addPublicFunctionsToUnitTesting(){var e=!1;if(void 0!==objectUnitTesting&&objectUnitTesting){for(var o in publicFunctions)publicFunctions.hasOwnProperty(o)&&void 0!==publicFunctions[o]&&(objectUnitTesting[o]=publicFunctions[o]);e=!0}return e}function deleteUnitTesting(e){var o=!1;return void 0!==e&&e&&("desn"===e||"des"===e||"desnlocal"===e||"local"===e||"desnlocal-vocuser"===e)||(void 0!==objectUnitTesting&&(objectUnitTesting=null),"undefined"!=typeof gigyaUX&&gigyaUX&&void 0!==gigyaUX.objectUnitTesting&&gigyaUX.objectUnitTesting&&(gigyaUX.objectUnitTesting=null),o=!0),o}function mockupSetMenuStructure(){var e,o=!1,t=$(".voc-header-right.voc-affix-hidden");return void 0!==(t=void 0===(t=void 0===t||!t||t.length<=0?$(".voc-header-right"):t)||!t||t.length<=0?$("#voc-header-right"):t)&&t&&t.length&&((void 0===(e=$("div [data-voc-vocuser-menu]"))||!e||e.length<=0)&&(t.html(""),t.append("<div data-voc-vocuser-button-onplus></div><div data-voc-vocuser-menu></div>")),o=!0),o}function addCustomFieldsInScreen(e,o){if(void 0!==o&&o||(o=options),userUtils.insertCustomFields.setOptions(o),void 0!==e||e)for(var t=0;t<flows.length;t++)userUtils.insertCustomFields.setManifest(flows[t].getInsertCustomField()),userUtils.insertCustomFields.getHTML(e)}function enableAdditionalData(e){return enableAdditionalDataPage=!!e,!0}function isActivatedAdditionalData(){return enableAdditionalDataPage}function getEventAdditionalData(){return eventAdditionalData}function showAditionalDataScreen(){var e;isActivatedAdditionalData()&&(e=getEventAdditionalData(),$.when(e).done(function(e){showScreen(options.screenName.additionalData)}))}function removeInterestsFromManifest(t){var e;t.fieldsGroup.hasOwnProperty("interestsFields")&&(e=t.fieldsGroup.interestsFields,$.each(e,function(e,o){t.fields.hasOwnProperty(o)&&delete t.fields[o]}),delete t.fieldsGroup.interestsFields)}function removeBirthDateFromManifest(t){var e;t.fieldsGroup.hasOwnProperty("additionalBirthDateFields")&&(e=t.fieldsGroup.additionalBirthDateFields,$.each(e,function(e,o){t.fields.hasOwnProperty(o)&&delete t.fields[o]}),delete t.fieldsGroup.additionalBirthDateFields)}function customizeBirthDateInManifest(t,i){var e,n;i.fieldsGroup.hasOwnProperty("additionalBirthDateFields")&&(i.fields.hasOwnProperty("labelBirthDate")&&(i.fields.labelBirthDate.changeDisplayText(options.showBirthDateFields.label),i.fields.labelBirthDate.modifyRequired(options.showBirthDateFields.required)),i.fields.hasOwnProperty("birthDay")&&i.fields.birthDay.modifyRequired(options.showBirthDateFields.required),i.fields.hasOwnProperty("birthMonth")&&i.fields.birthMonth.modifyRequired(options.showBirthDateFields.required),i.fields.hasOwnProperty("birthYear")&&i.fields.birthYear.modifyRequired(options.showBirthDateFields.required),"short"===options.showBirthDateFields.type&&(removeFieldsFromGroupsManifest(i,"additionalBirthDateFields","birthDay"),delete i.fields.birthDay),options.screenName.additionalData===t&&i.fieldsGroup.additionalBirthDateFields.reverse(),2===Object.keys(options.showBirthDateFields.position).length&&"string"==typeof options.showBirthDateFields.position.field&&"string"==typeof options.showBirthDateFields.position.place&&("profile.country"===options.showBirthDateFields.position.field&&"afterField"===options.showBirthDateFields.position.place||("beforeField"===options.showBirthDateFields.position.place&&options.screenName.additionalData!==t&&i.fieldsGroup.additionalBirthDateFields.reverse(),i.screens.hasOwnProperty(t)&&options.screenName.additionalData!==t&&(e=i.screens[t],n=options.showBirthDateFields.position.place,$.each(e,function(e,o){"additionalBirthDateFields"===o.group&&(delete i.screens[t][e],(e={group:"additionalBirthDateFields"})[n]=options.showBirthDateFields.position.field,i.screens[t].push(e))})))))}function injectFieldsInRegisterScreen(e,o){var t=getManifestOfScreenNameFromFlows(e);void 0===o.extensionType||"ecommerce"!==o.extensionType&&"redencion"!==o.extensionType&&"regalo"!==o.extensionType||(t=customizeRegisterFieldsForEcommerce(t)),void 0!==o.userIsInAppWebviewFlow&&o.userIsInAppWebviewFlow&&(t=customizeRegisterFieldsForAppWebview(t)),isActivatedAdditionalData()&&getInterestsActivationStatus()?t=customizeInterestsFieldsInManifest(t):removeInterestsFromManifest(t),isActivatedAdditionalData()&&getsNewslettersActivationStatus()&&(t=addNewslettersManifestInManifest(e,t)),o.showBirthDateFields.enabled?customizeBirthDateInManifest(e,t):removeBirthDateFromManifest(t),addCustomManifestInScreen(e,o,t)}function injectFieldsInCompleteRegistationScreen(e){var o=getManifestOfScreenNameFromFlows(e.screenName.completo);void 0===e.extensionType||"ecommerce"!==e.extensionType&&"redencion"!==e.extensionType&&"regalo"!==e.extensionType||(o=customizeCompletRegisterFieldsForEcommerce(o)),isActivatedAdditionalData()&&getInterestsActivationStatus()?o=customizeInterestsFieldsInManifest(o):removeInterestsFromManifest(o),isActivatedAdditionalData()&&getsNewslettersActivationStatus()&&(o=addNewslettersManifestInManifest(e.screenName.completo,o)),e.showBirthDateFields.enabled?customizeBirthDateInManifest(e.screenName.completo,o):removeBirthDateFromManifest(o),addCustomManifestInScreen(e.screenName.completo,e,o)}function addNewslettersManifestInManifest(e,o){var t=o,o=createNewslettersManifestFromCustomizeOptions();return o&&0<Object.keys(o).length&&($.each(o.fields,function(e,o){t.fields[e]=o}),o.fieldsGroup.hasOwnProperty("newslettersDataGroupFields")&&0<o.fieldsGroup.newslettersDataGroupFields.length&&(t.fieldsGroup.newslettersDataGroupFields=o.fieldsGroup.newslettersDataGroupFields),e&&""!==e&&o.screens.hasOwnProperty(e)&&(t.screens.hasOwnProperty(e)||(t.screens[e]=[]),t.screens[e].push(o.screens[e][0]))),t}function injectFieldsinScreensByScreenNameExceptAdditionalDataScreen(e){timeBeforeCallingRenderAdditionalFieldsInScreenSets=window.performance.now(),void 0!==e&&e&&(e!==options.screenName.additionalData&&e!==options.screenName.formulario&&addCustomFieldsInScreen(e,options),e===options.screenName.formulario&&injectFieldsInRegisterScreen(e,options),e!==options.screenName.login&&e!==options.screenName.formulario||injectFieldsInCompleteRegistationScreen(options)),timeRenderAdditionalFieldsInScreenSetsObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber renderizado los campos adicionales en los screenSets."})}function objectHasProperties(e,o){for(var t=e,i=o.split("."),n=0;n<i.length;n++){if(!t.hasOwnProperty(i[n]))return!1;t=t[i[n]]}return!0}function getValueFromObjectProperties(e,o){for(var t=e,i=o.split("."),n=0;n<i.length;n++){if(!t.hasOwnProperty(i[n]))return!1;t=t[i[n]]}return t="false"===t?!1:t}function fieldNameHasToBeRemovedFromManifest(e,o,t){var i,n=!1;return n=e.fields.hasOwnProperty(t)&&""!==(i=e.fields[t].getRowFields()[0])&&fieldHasToBeRemovedFromManifest(o,i)?!0:n}function removeFieldsFromFieldsManifest(e,o,t){var i,n=!1;return o.fields.hasOwnProperty(t)&&""!==(i=o.fields[t].getRowFields()[0])&&fieldHasToBeRemovedFromManifest(e,i)&&(delete o.fields[t],n=!0),n}function removeNewsletterFieldFromFieldsManifest(e,o){var t,i=!1;return e.fields.hasOwnProperty(o)&&""!==(t=e.fields[o].getRowFields()[0].replace("newsletter-",""))&&newslettersHasSuscription(t)&&(delete e.fields[o],i=!0),i}function removeHiddenCountryFromHtml(){var e=$("#gigya-login-additional-data-screen").find("div#hiddenCountry");void 0!==e&&e&&e.remove()}function removeFieldsFromGroupsManifest(e,o,t){t=e.fieldsGroup[o].indexOf(t);0<=t&&e.fieldsGroup[o].splice(t,1)}function getAdditionalManifest(){return additionalManifest=0===Object.keys(additionalManifest).length?getAdditionalManifestFromFlows():additionalManifest}function getInterestsCustomFieldsForCustomize(){return customInterestsFields}function getNewslettersCustomFieldsForCustomize(){return customNewsLettersFields}function getUserNewslettersList(){return userNewslettersList}function setUserNewslettersList(e){userNewslettersList=e}function getNewslettersListFromResponse(e){var o=[];return o=void 0!==e&&e&&void 0!==e.data&&e.data&&void 0!==e.data.newsletter&&e.data.newsletter&&0<e.data.newsletter.length?e.data.newsletter:o}function loadNewslettersListFromResponse(e){return isActivatedAdditionalData()&&getsNewslettersActivationStatus()&&setUserNewslettersList(getNewslettersListFromResponse(e)),!0}function newsletterFieldNameHasToBeRemovedFromManifest(e,o){var t,i=!1;return i=e.fields.hasOwnProperty(o)&&""!==(t=e.fields[o].getRowFields()[0].replace("newsletter-",""))&&userHasSuscriptionToNewsletterCode(t)?!0:i}function userHasSuscriptionToNewsletterCode(e){var o=!1;return o=e&&""!==e&&newslettersHasSuscription(e)?!0:o}function newslettersHasSuscription(t){var i=!1,e=getUserNewslettersList();return $.each(e,function(e,o){if(o.ID===t&&"subscribe"===o.status)return i=!0}),i}function prepareDataForAdditionalFilledMark(e,o,t){var i=void 0!==o?o:options.serviceReference,o=void 0!==t?t:options.serviceId,t=void 0!==e.data&&e.data?e.data:{};return void 0!==i&&i&&(e={},void 0!==t&&t&&void 0!==t.additionalDataFilled&&t.additionalDataFilled&&0<t.additionalDataFilled.length&&(e=t.additionalDataFilled),t.additionalDataFilled=protectedFunctions.setAdditionalDataStructure(e,i,o)),t}function processInterestsOptions(e){var t=0,i="text",n={controlTexts:{counterTexts:0,texts:[]},texts:[],interestsFields:[]};if(!(e&&0<Object.keys(e).length))return 1;$.each(e,function(e,o){1<=t&&(i="text"+t,n.controlTexts.texts.push(i)),o.displayText&&""!==o.displayText?n.texts[i]=o.displayText:n.texts[i]="Selecciona los temas que te interesen:",n.controlTexts.counterTexts++,o.interestsFields&&0<o.interestsFields.length&&(o.interestsFields.unshift(i),0<n.interestsFields.length&&(n.interestsFields=n.interestsFields.concat(o.interestsFields)),0===n.interestsFields.length&&(n.interestsFields=o.interestsFields)),t++}),customInterestsFields=n}function processNewslettersOptions(e){var t={displayText:"",newsletters:{}};e.hasOwnProperty("displayText")&&e.displayText&&""!==e.displayText?t.displayText=e.displayText:t.displayText="Suscr&iacute;bete a nuestras newsletters:",e&&e.hasOwnProperty("newsletters")&&0<Object.keys(e.newsletters).length&&$.each(e.newsletters,function(e,o){o.newsletterCode&&""!==o.newsletterCode&&o.newsletterLabel&&""!==o.newsletterLabel&&(t.newsletters[o.newsletterCode]=o.newsletterLabel)}),customNewsLettersFields=t}function modifyAndAddInterestsFieldsLabelInManifest(e,i){var n=e,r="";return n&&"object"==typeof n&&0<i.controlTexts.counterTexts&&(i.texts.hasOwnProperty("text")&&(r=i.texts.text,n.fields.text.changeDisplayText(r),n.fields.text.modifyAttr("isPElement",!0)),1<i.controlTexts.counterTexts&&0<i.controlTexts.texts.length&&$.each(i.controlTexts.texts,function(e,o){var t;i.texts.hasOwnProperty(o)&&(r=i.texts[o],(t={}).field={displayText:r,attr:{type:"label"}},n.fields[o]=new userUtils.Row(t),n.fields[o].modifyAttr("isPElement",!0))})),n}function changeInterestsGroupsFieldInManifest(e,t){var i=e;return i&&"object"==typeof i&&0<t.controlTexts.counterTexts&&0<t.interestsFields.length&&(e=t.interestsFields,$.each(e,function(e,o){i.fields.hasOwnProperty(o)||t.interestsFields.splice(e,1)}),$.each(i.fieldsGroup,function(e,o){0<=e.indexOf("interests")&&($.each(t.interestsFields,function(e,o){i.fields.hasOwnProperty(o)&&i.fields[o].modifyAttr("extraId","check-column-interests")}),i.fieldsGroup[e]=t.interestsFields)})),i}function customizeInterestsFieldsInManifest(e){var o,t=e;return isActivatedAdditionalData()&&getInterestsActivationStatus()&&(t=modifyAndAddInterestsFieldsLabelInManifest(t,o=getInterestsCustomFieldsForCustomize()),t=changeInterestsGroupsFieldInManifest(e,o)),t}function customizeRegisterFieldsForEcommerce(e){if(void 0===e||!e)return{};void 0!==options.mustToShowZipInNotEditorialFlow&&!0===options.mustToShowZipInNotEditorialFlow&&(options.editorialRegistrationPersonalDataFields=options.editorialRegistrationPersonalDataFields.filter(function(e){return"zip"!==e}));var t=e;return $.each(options.editorialRegistrationAccessFields,function(e,o){removeFieldsFromGroupsManifest(t,"registrationAccessVisibleFields",o)}),$.each(options.editorialRegistrationPersonalDataFields,function(e,o){removeFieldsFromGroupsManifest(t,"registrationPersonalDataVisibleFields",o)}),t}function customizeCompletRegisterFieldsForEcommerce(e){if(void 0===e||!e)return{};void 0!==options.mustToShowZipInNotEditorialFlow&&!0===options.mustToShowZipInNotEditorialFlow&&(options.editorialRegistrationPersonalDataFields=options.editorialRegistrationPersonalDataFields.filter(function(e){return"zip"!==e}));var t=e;return $.each(options.editorialRegistrationPersonalDataFields,function(e,o){removeFieldsFromGroupsManifest(t,"registrationPersonalDataVisibleFields",o)}),t}function customizeRegisterFieldsForAppWebview(e){if(void 0===e||!e)return{};var t=e;return $.each(options.editorialRegistrationAccessFields,function(e,o){removeFieldsFromGroupsManifest(t,"registrationAccessVisibleFields",o)}),t}function createNewslettersManifestFromCustomizeOptions(){var e={},o={displayText:"Suscr&iacute;bete a nuestras newsletters",attr:{type:"label",isPElement:!0}},t={displayText:"",inSchema:!1,attr:{type:"checkbox",name:"",value:"false",extraId:"check-column-newsletters"}},i=[],n={},r={},a={},s=getNewslettersCustomFieldsForCustomize(),c="newsletterField";if(s.displayText&&""!==s.displayText&&(o.displayText=s.displayText,(r={}).field=o,n[c+"Label"]=new userUtils.Row(r)),!(s.newsletters&&0<Object.keys(s.newsletters).length))return e;var d=1;return $.each(s.newsletters,function(e,o){t.attr.name="newsletter-"+e,t.displayText=o,(r={}).field=t,n[c+d]=new userUtils.Row(r),d++}),r={},0<Object.keys(n).length&&$.each(n,function(e,o){r[e]=o,i.push(e)}),0<i.length&&(a.newslettersDataGroupFields=i),e.fields=r,e.fieldsGroup=a,e.screens={"gigya-register-screen":[{group:"newslettersDataGroupFields",elementId:"vocento-vocuser-newsletters-fields"}],"gigya-complete-registration-screen":[{group:"newslettersDataGroupFields",elementId:"vocento-vocuser-newsletters-fields"}],"gigya-login-additional-data-screen":[{group:"newslettersDataGroupFields",elementId:"vocento-vocuser-newsletters-fields"}]},e}function calculateGroupsActivation(n,r){var a=[],o={},s=["hiddenCity","hiddenProvince","hiddenMunicipality"];return activatedByOptions(),additionalDataActivatedBy&&""!==additionalDataActivatedBy&&(a=additionalDataActivatedBy.split(",")),""!==additionalDataActivatedBy&&($.each(r.fieldsGroup,function(t,e){var i={};if(0<=t.indexOf("interests"))o[t]=!0;else{if(0<=t.indexOf("golden"))return i[t]=[],$.each(e,function(e,o){"firstName"!==o||options.allowEditGoldenRecords||fieldNameHasToBeRemovedFromManifest(r,n,o)&&i[t].push(o),"zip"!==o||options.allowEditGoldenRecords||fieldNameHasToBeRemovedFromManifest(r,n,o)&&(i[t].push(o),$.each(s,function(e,o){i[t].push(o)}))}),void(0<=i[t].length&&(o[t]=r.fieldsGroup[t].length-i[t].length));if(0<=t.indexOf("communication"))return i[t]=[],$.each(e,function(e,o){"adsMedia"===o&&(fieldNameHasToBeRemovedFromManifest(r,n,o)||a.indexOf("adsMedia")<0)&&i[t].push(o),"adsGroupVisible"===o&&(fieldNameHasToBeRemovedFromManifest(r,n,o)||a.indexOf("adsGroupVisible")<0)&&i[t].push(o),"adsThirdparty"===o&&(fieldNameHasToBeRemovedFromManifest(r,n,o)||a.indexOf("adsThirdparty")<0)&&i[t].push(o)}),void(0<=i[t].length&&(o[t]=r.fieldsGroup[t].length-i[t].length));if(0<=t.indexOf("additional"))return i[t]=[],$.each(e,function(e,o){options.allowEditAdditionalUserInfo&&validateIfEditableField(r,o)||fieldNameHasToBeRemovedFromManifest(r,n,o)&&i[t].push(o)}),void 0!==i.additionalBirthDateFields&&3===i.additionalBirthDateFields.length&&i.additionalBirthDateFields.push("labelBirthDate"),void(0<=i[t].length&&(o[t]=r.fieldsGroup[t].length-i[t].length));if(0<=t.indexOf("newsletters")){i[t]=[],$.each(e,function(e,o){"newsletterFieldLabel"!==o&&newsletterFieldNameHasToBeRemovedFromManifest(r,o)&&i[t].push(o)});e=$(r.fieldsGroup[t]).not(i[t]).get();return e&&1===e.length&&"newsletterFieldLabel"===e[0]&&i[t].push("newsletterFieldLabel"),void(0<=i[t].length&&(o[t]=r.fieldsGroup[t].length-i[t].length))}0<=t.indexOf("extra")&&(o[t]=!0)}}),o)}function mustToShowAdditionalDataPage(e,o,t){var i=!1;if(checkAdditionalDataFilled(e,void 0!==o?o:options.serviceReference,void 0!==t?t:options.serviceId))return i;var n=0,r=!1,t=protectedFunctions.getAdditionalManifest();return loadNewslettersListFromResponse(e),t=calculateGroupsActivation(e,t),$.each(t,function(e,o){0<=e.indexOf("additional")&&(n+=o),0<=e.indexOf("communication")&&(n+=o),0<=e.indexOf("golden")&&(n=o),0<=e.indexOf("interests")&&(r=o),0<=e.indexOf("newslettersDataGroupFields")&&(n+=o),0<=e.indexOf("extra")&&(n+=o)}),0===n&&(i="marca"),i=0<n||r?!0:i}function removeFilledFieldsFromManifest(i,e){var n={},r=[],a=e,s=["hiddenCity","hiddenProvince","hiddenMunicipality"];return activatedByOptions(),additionalDataActivatedBy&&""!==additionalDataActivatedBy&&(r=additionalDataActivatedBy.split(",")),""!==additionalDataActivatedBy&&($.each(a.fieldsGroup,function(t,e){return n[t]=[],0<=t.indexOf("golden")?($.each(e,function(e,o){"firstName"!==o||options.allowEditGoldenRecords||fieldNameHasToBeRemovedFromManifest(a,i,o)&&(n[t].push(o),removeFieldsFromFieldsManifest(i,a,o)),"zip"!==o||options.allowEditGoldenRecords||fieldNameHasToBeRemovedFromManifest(a,i,o)&&(n[t].push(o),removeFieldsFromFieldsManifest(i,a,o),$.each(s,function(e,o){n[t].push(o),removeFieldsFromFieldsManifest(i,a,o)}),removeHiddenCountryFromHtml())}),0<n[t].length&&!options.allowEditGoldenRecords&&$.each(n[t],function(e,o){removeFieldsFromGroupsManifest(a,t,o)}),void(0===a.fieldsGroup[t].length&&delete a.fieldsGroup[t])):(r.indexOf("golden")<0&&removeHiddenCountryFromHtml(),0<=t.indexOf("communication")?($.each(e,function(e,o){"adsMedia"===o&&(fieldNameHasToBeRemovedFromManifest(a,i,o)||r.indexOf("adsMedia")<0)&&(n[t].push(o),removeFieldsFromFieldsManifest(i,a,o)),"adsGroupVisible"===o&&(fieldNameHasToBeRemovedFromManifest(a,i,o)||r.indexOf("adsGroupVisible")<0)&&(n[t].push(o),removeFieldsFromFieldsManifest(i,a,o)),"adsThirdparty"===o&&(fieldNameHasToBeRemovedFromManifest(a,i,o)||r.indexOf("adsThirdparty")<0)&&(n[t].push(o),removeFieldsFromFieldsManifest(i,a,o))}),0<n[t].length&&$.each(n[t],function(e,o){removeFieldsFromGroupsManifest(a,t,o)}),void(0===a.fieldsGroup[t].length&&delete a.fieldsGroup[t])):0<=t.indexOf("additional")?($.each(e,function(e,o){options.allowEditAdditionalUserInfo&&validateIfEditableField(a,o)||fieldNameHasToBeRemovedFromManifest(a,i,o)&&(n[t].push(o),removeFieldsFromFieldsManifest(i,a,o))}),0<n[t].length&&$.each(n[t],function(e,o){removeFieldsFromGroupsManifest(a,t,o)}),0===a.fieldsGroup[t].length&&delete a.fieldsGroup[t],void(void 0!==a.fieldsGroup.additionalBirthDateFields&&1===a.fieldsGroup.additionalBirthDateFields.length&&"labelBirthDate"===a.fieldsGroup.additionalBirthDateFields[0]&&delete a.fieldsGroup.additionalBirthDateFields)):void(0<=t.indexOf("newsletters")&&($.each(e,function(e,o){"newsletterFieldLabel"!==o&&newsletterFieldNameHasToBeRemovedFromManifest(a,o)&&(n[t].push(o),removeNewsletterFieldFromFieldsManifest(a,o))}),0<n[t].length&&$.each(n[t],function(e,o){removeFieldsFromGroupsManifest(a,t,o)}),1===a.fieldsGroup[t].length&&"newsletterFieldLabel"===a.fieldsGroup[t][0]&&(removeNewsletterFieldFromFieldsManifest(a,"newsletterFieldLabel"),removeFieldsFromGroupsManifest(a,t,"newsletterFieldLabel")),0===a.fieldsGroup[t].length&&delete a.fieldsGroup[t])))}),a)}function activatedByOptions(){var e="";options.showAdditionalDataPage&&(e+="additional,"),options.showGoldenRecords&&(e+="golden,"),(options.showAdsMedia||options.showAdsGroup||options.showAdsThirdparty)&&(e+="communication,",options.showAdsMedia&&(e+="adsMedia,"),options.showAdsGroup&&(e+="adsGroupVisible,"),options.showAdsThirdparty&&(e+="adsThirdparty,")),getInterestsActivationStatus()&&(e+="interests,"),getsNewslettersActivationStatus()&&(e+="newsletters,"),0<getSectionsWithExternalFields().length&&(e+="extra,"),e=e.replace(/\,$/,""),additionalDataActivatedBy=e}function getAdditionalManifestFromFlows(){var n,e,r=0,a="gigya-login-additional-data-screen",s={},c={},d={},o={},l=[],u=[];for(activatedByOptions(),additionalDataActivatedBy&&""!==additionalDataActivatedBy&&(u=additionalDataActivatedBy.split(",")),r=0;r<flows.length;r++)flows[r].getInsertCustomField().hasOwnProperty("screens")&&flows[r].getInsertCustomField().screens.hasOwnProperty(a)&&0<flows[r].getInsertCustomField().screens[a].length&&(e=flows[r].getInsertCustomField().screens[a],$.each(e,function(e,t){var i=t.group;$.each(u,function(e,o){"adsGroupVisible"!==o&&"adsThirdparty"!==o&&"adsMedia"!==o&&(0<=i.toLowerCase().indexOf(o.toLowerCase())&&"additionalBirthDateFields"!==i||"additionalBirthDateFields"===i&&options.showBirthDateFields.enabled&&0===e)&&(l.push(t),flows[r].getInsertCustomField().hasOwnProperty("fieldsGroup")&&flows[r].getInsertCustomField().fieldsGroup.hasOwnProperty(i)&&0<flows[r].getInsertCustomField().fieldsGroup[i].length&&(c[i]=flows[r].getInsertCustomField().fieldsGroup[i],n=flows[r].getInsertCustomField().fieldsGroup[i],$.each(n,function(e,o){flows[r].getInsertCustomField().fields.hasOwnProperty(o)&&(s[o]=flows[r].getInsertCustomField().fields[o])})),d[a]=l)})}));return o.fields=s,o.fieldsGroup=c,o.screens=d,o=isActivatedAdditionalData()&&getsNewslettersActivationStatus()?addNewslettersManifestInManifest(a,o):o}function getManifestOfScreenNameFromFlows(e){for(var i,o,n=0,r=void 0!==e?e:"",a={},s={},c={},e={},d=[],n=0;n<flows.length;n++)r&&""!==r&&flows[n].getInsertCustomField().hasOwnProperty("screens")&&flows[n].getInsertCustomField().screens.hasOwnProperty(r)&&0<flows[n].getInsertCustomField().screens[r].length&&(o=flows[n].getInsertCustomField().screens[r],$.each(o,function(e,o){var t=o.group;d.push(o),flows[n].getInsertCustomField().hasOwnProperty("fieldsGroup")&&flows[n].getInsertCustomField().fieldsGroup.hasOwnProperty(t)&&0<flows[n].getInsertCustomField().fieldsGroup[t].length&&(s[t]=flows[n].getInsertCustomField().fieldsGroup[t],i=flows[n].getInsertCustomField().fieldsGroup[t],$.each(i,function(e,o){flows[n].getInsertCustomField().fields.hasOwnProperty(o)&&(a[o]=flows[n].getInsertCustomField().fields[o])})),c[r]=d}));return e.fields=a,e.fieldsGroup=s,e.screens=c,e}function fieldHasToBeRemovedFromManifest(e,o){var t=!1;return t=void 0!==e&&e&&"object"==typeof e&&o&&""!==o&&objectHasProperties(e,o)&&""!==getValueFromObjectProperties(e,o)&&getValueFromObjectProperties(e,o)?!0:t}function addCustomFieldsInAdditionalDataScreen(e,o,t){void 0!==o&&o||(o=options),userUtils.insertCustomFields.setOptions(o),void 0===e&&!e||(userUtils.insertCustomFields.setManifest(t),userUtils.insertCustomFields.getHTML(e),eventAdditionalData.resolve())}function addCustomManifestInScreen(e,o,t){void 0!==o&&o||(o=options),userUtils.insertCustomFields.setOptions(o),void 0===e&&!e||(userUtils.insertCustomFields.setManifest(t),userUtils.insertCustomFields.getHTML(e))}function activateInterestsFields(){showInterestsFields=!0}function getInterestsActivationStatus(){return showInterestsFields}function activateNewslettersFields(){showNewslettersFields=!0}function getsNewslettersActivationStatus(){return showNewslettersFields}function activateAdditionalData(){options.showAdditionalDataPageWithExtraRequirements&&(options.showGoldenRecords=!0),options.interestsGroups&&0<Object.keys(options.interestsGroups).length&&(activateInterestsFields(),processInterestsOptions(options.interestsGroups)),options.newslettersGroup&&options.newslettersGroup.hasOwnProperty("newsletters")&&0<Object.keys(options.newslettersGroup.newsletters).length&&(activateNewslettersFields(),processNewslettersOptions(options.newslettersGroup)),enableAdditionalData(options.showGoldenRecords||options.showAdditionalDataPage||options.showAdsMedia||options.showAdsGroup||options.showAdsThirdparty||getInterestsActivationStatus()||getsNewslettersActivationStatus()||0<options.sectionsWithExternalFields.length)}function getNewslettersCookie(){var o=!1,t=$.cookie(NEWSLETTERS_COOKIE_NAME);if(void 0!==t&&t)try{o=decodeURIComponent(t)}catch(e){if(log("Error en getNewslettersCookie() al decodificar la cookie: "+e,"error"),void 0!==(t=$.cookie(NEWSLETTERS_COOKIE_NAME))&&t)try{o=decodeURIComponent(t)}catch(e){log("Error en getNewslettersCookie() al decodificar la cookie: "+e,"error")}}if(void 0===o||!o)return!1;try{o=decodeURIComponent(t)}catch(e){log("Error en getNewslettersCookie() al decodificar la cookie: "+e,"error")}return o}function getDataFromNewsLettersCookie(e,o){var t=!(void 0===e||!e)&&e,i=!(void 0===o||!o)&&o,n="",r=[],e=!1,o=getNewslettersCookie();if(!1===o)return o;if("object"==typeof(e=o.split("|"))&&e[0]&&e[1]){if(o=e[0].replace("UID=",""),n=e[1].replace("newsletters=","").split("*"),""===o&&""===n)return!1;if(""===o&&!1===t&&!1===i)return n;if(""===o&&!1===t&&i)return e[1].replace("newsletters=","");if("object"==typeof n&&""!==o&&t&&!1===i)return r.UID=o,r.newsletters=n,r;if("object"==typeof n&&!1!==o&&t&&"UIDOnly"===i)return o;if("object"==typeof n&&""!==o&&t&&i)return e[0].replace("UID=","")+"|"+e[1].replace("newsletters=","")}else if(!1===e)return e;return"object"==typeof n?n:""!==n&&!1!==n&&void 0}function getNlsFreeZone(){var e=[],o=getDataFromNewsLettersCookie();if("object"==typeof o&&o&&0<o.length)for(var t=0;t<o.length;t++)e.push(o[t]);return e}function saveNlsOnLogin(e,o,t,i){return void 0!==o&&o||(o=getCookieVocUid("uidSignature")),void 0!==t&&t||(t=getCookieVocUid("signatureTimestamp")),!(void 0===e||!e||void 0===i||!i)&&(timeBeforeCallingNewslettersSubscribeEndpoint=window.performance.now(),$.ajax({url:options.authServerVocCore+"/vocuser/v1/user/newsletters/subscribe/freezone",type:"POST",dataType:"json",data:{UID:e,UIDSignature:o,signatureTimestamp:t,registrationToken:"false",NL_ID:i},async:!0,success:handleSuccessSaveNlsOnLogin}),!0)}function handleSuccessSaveNlsOnLogin(e){timeNewslettersSubscribeObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint newslettersSubscribe."})}function saveNlsOnRegister(e,o,t){var i=!1;return void 0!==e&&e&&void 0!==o&&o&&void 0!==t&&t&&(t={UID:e,registrationToken:o,NL_ID:t},timeBeforeCallingNewslettersAutoSubscribeEndpoint=window.performance.now(),$.ajax({url:options.authServerVocCore+"/vocuser/v1/user/newsletters/subscribe/freezone",type:"POST",dataType:"json",data:t,success:handleSuccessSaveNlsOnRegister}),i=!0),i}function handleSuccessSaveNlsOnRegister(e){timeNewslettersAutoSubscribeObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint newslettersAutoSubscribe."})}function updateUserNL(e,o,t,i){var n=!1;return void 0!==e&&e&&void 0!==o&&o&&void 0!==t&&t&&void 0!==i&&i&&($.ajax({url:options.authServerVocCore+"/vocuser/v1/user/newsletters/subscribe",type:"POST",dataType:"json",data:{UID:e,UIDSignature:o,signatureTimestamp:t,newObject:i},async:!0,success:handleSuccessupdateUserNL}),n=!0),n}function handleSuccessupdateUserNL(e){}function createStringResponseForCookie(e,o){var t=!(void 0===e||!e)&&e,i=!(void 0===o||!o)&&o,e="UID=",o="newsletters=";return t&&(e+=t),i&&(o+=i),e+"|"+o}function setNewslettersChecksBox(e){var o=!1;return void 0!==e&&e&&(newslettersChecksBox.push(e),o=!0),o}function getNewslettersChecksBox(){return newslettersChecksBox}function printFrameworkOptions(){log(options,"info"),!1===options.hasPaywall&&log("---- Log - VocUser: No se realizarán llamadas a Evolok. El medio no tiene paywall; hasPaywall = false","warn"),!1===options.hasEcommerce&&log("---- Log - VocUser: No se realizarán llamadas a servicios de Ecommerce. (busSynchronize, userProducts - MDM, Evolok). El medio no tiene Ecommerce; hasEcommerce = false","warn")}function activateAdditionaleDataPageWithExtraRequirements(e,o){e===options.screenName.additionalData&&void 0!==o&&o&&activateGoldenRecordsAndAdditionalDataPage()}function activateGoldenRecordsAndAdditionalDataPage(){enableAdditionalData(options.showGoldenRecords=!0)}function validateIfEditableField(e,o){var t=!1,i="";return void 0!==e&&"object"==typeof e&&void 0!==o&&"string"==typeof o&&e.fields.hasOwnProperty(o)&&(i=e.fields[o].getRowFields()[0]),t=void 0!==options.editableFields&&"object"==typeof options.editableFields&&options.editableFields&&0<options.editableFields.length&&""!==i&&"undefined"!==i&&0<=options.editableFields.indexOf(i)?!0:t}function initExtraDataOnChange(){$.each(options.sectionsWithExternalFields,function(e,o){var t=$("form:visible [vocento-name="+o+"]");$(t).on("change",function(){userUtils.customValidation.validateField(t)})})}function disableAdobeDtmYoutubeTimerHook(){options.userIsInFlow&&"undefined"!=typeof s_YTO&&s_YTO&&void 0!==s_YTO.ut&&s_YTO.ut&&clearTimeout(s_YTO.ut)}function jsErrorsFromInitialParams(){getJsErrors=void 0!==initialParams&&initialParams&&void 0!==initialParams.getJsErrors&&initialParams.getJsErrors?initialParams.getJsErrors:function(){}}function sendDataToNewRelicFromInitialParams(){var o=void 0!==initialParams&&initialParams&&void 0!==initialParams.sendDataToNewRelic&&initialParams.sendDataToNewRelic?initialParams.sendDataToNewRelic:function(){};sendDataToNewRelic=function(e){e=$.extend(e=void 0!==e&&e?e:{},{user:user,account:account,userType:getUserType(),userIsAuthenticated:authenticated,ssoGroup:ssoGroup,timeAfterLoadGigyaLoads:timeAfterLoadGigyaLoads,totalStartingTime:totalStartingTime,timeUserIsLogged:timeUserIsLogged,timeBeforeRenderScreenSets:getTimeBeforeCallingRenderScreenSets(),timeScreenSetIsRender:timeScreenSetIsRender,timeBeforeCallingUserTypeEndpoint:timeBeforeCallingUserTypeEndpoint,timeUserTypeEndpointObtained:timeUserTypeEndpointObtained,timeBeforeCallingGigyaGetUserInfo:timeBeforeCallingGigyaGetUserInfo,timeUserTypeObtained:timeUserTypeObtained,timeBeforeCallingVerifyUniqueNickNameEndpoint:timeBeforeCallingVerifyUniqueNickNameEndpoint,timeVerifyUniqueNickNameObtained:timeVerifyUniqueNickNameObtained,timeBeforeCallingCustomerServiceEndpoint:timeBeforeCallingCustomerServiceEndpoint,timeCustomerServiceObtained:timeCustomerServiceObtained,timeMediaDataTransferObtained:timeMediaDataTransferObtained,timeBeforeCallingMediaDataTransferEndpoint:timeBeforeCallingMediaDataTransferEndpoint,timeBeforeCallingNotifyLoginEndpoint:timeBeforeCallingNotifyLoginEndpoint,timeNotifyLoginObtained:timeNotifyLoginObtained,timeBeforeCallingNotifyLoginItpEndpoint:timeBeforeCallingNotifyLoginItpEndpoint,timeNotifyLoginItpObtained:timeNotifyLoginItpObtained,timeBeforeCallingNewslettersSubscribeEndpoint:timeBeforeCallingNewslettersSubscribeEndpoint,timeNewslettersSubscribeObtained:timeNewslettersSubscribeObtained,timeBeforeCallingNewslettersAutoSubscribeEndpoint:timeBeforeCallingNewslettersAutoSubscribeEndpoint,timeNewslettersAutoSubscribeObtained:timeNewslettersAutoSubscribeObtained,timeBeforeCallingJwtTokenEndpoint:timeBeforeCallingJwtTokenEndpoint,timeJwtTokenObtained:timeJwtTokenObtained,timeBeforeCallingRenderAdditionalFieldsInScreenSets:timeBeforeCallingRenderAdditionalFieldsInScreenSets,timeRenderAdditionalFieldsInScreenSetsObtained:timeRenderAdditionalFieldsInScreenSetsObtained,timeBeforeCallingNotifySocialLoginEndpoint:timeBeforeCallingNotifySocialLoginEndpoint,timeNotifySocialLoginObtained:timeNotifySocialLoginObtained,timeBeforeRenderUserMenuWithCookieVocUid:timeBeforeRenderUserMenuWithCookieVocUid,timeRenderedUserMenuWithCookieVocUidObtained:timeRenderedUserMenuWithCookieVocUidObtained,timeBeforeRenderUserMenuWithGigyaAccountsOnDataReady:timeBeforeRenderUserMenuWithGigyaAccountsOnDataReady,timeRenderedUserMenuWithWithGigyaAccountsOnDataReadyObtained:timeRenderedUserMenuWithWithGigyaAccountsOnDataReadyObtained,timeBeforeRenderUserMenuWithGigyaAccountsOnDataNoReady:timeBeforeRenderUserMenuWithGigyaAccountsOnDataNoReady,timeRenderedUserMenuWithWithGigyaAccountsOnDataNoReadyObtained:timeRenderedUserMenuWithWithGigyaAccountsOnDataNoReadyObtained,timeBeforeRenderUserMenuWithProductsOnReadyEndpoint:timeBeforeRenderUserMenuWithProductsOnReadyEndpoint,timeRenderedUserMenuWithWithProductsOnReadyObtained:timeRenderedUserMenuWithWithProductsOnReadyObtained});o(e)},protectedFunctions.sendDataToNewRelic=sendDataToNewRelic}function socializeOnLogin(e){var o;authenticated=!1,void 0===e.UID&&getAccountInfo(),void 0!==e&&e&&void 0!==e.UID&&e.UID&&(authenticated=!0),createCookies(user=e.user,!0),getJWT(),authenticated&&(timeUserIsLogged=window.performance.now(),firePromiseUserLogged(),options.userIsInAppWebviewFlow&&(o={eventName:"userlogged",eventData:user},logout(),AppWebview.postMessageToWebkit(o,window.location.href))),options.reloadOnLogin||(fireEvent("socialize"+eventSeparator+"onLogin",e),getUserInfo({})),eventSocializeOnLogin.resolve(e)}function socializeOnLoginItp(e){var o;authenticated=!1,void 0!==e&&e&&void 0!==e.UID&&e.UID&&(authenticated=!0),createCookies(user=e.user,!0),getJWT(),authenticated&&options.userIsInAppWebviewFlow&&(o=JSON.stringify({name:"userLogged",data:user}),AppWebview.postMessageToWebkit(o,window.location.href)),options.reloadOnLogin||fireEvent("socialize"+eventSeparator+"onLogin",e),eventSocializeOnLogin.resolve(e)}function accountsOnLoginItp(e){authenticated=!(firedEventGigyaAccountsOnLogin=!0),void 0!==user&&user||(user=e),void 0!==(account=e)&&e&&void 0!==e.UID&&e.UID?(authenticated=!0,actionsAfterLastLoginIsSet(e)):sendDataToNewRelic({eventNameFired:"accountsOnLogin",additionalInformation:"accounts.onLogin fired by Gigya. Detected no user data.",errorMessage:"accounts.onLogin fired by Gigya. Detected no user data. Possible error: "+e.errorMessage}),fireEvent("accounts"+eventSeparator+"onLogin",e),eventAccountsOnLogin.resolve(e)}function accountsOnLogin(e){authenticated=!(firedEventGigyaAccountsOnLogin=!0),void 0!==user&&user||(user=e),void 0!==(account=e)&&e&&void 0!==e.UID&&e.UID?(authenticated=!0,actionsAfterLogin(e)):sendDataToNewRelic({eventNameFired:"accountsOnLogin",additionalInformation:"accounts.onLogin fired by Gigya. Detected no user data.",errorMessage:"accounts.onLogin fired by Gigya. Detected no user data. Possible error: "+e.errorMessage}),fireEvent("accounts"+eventSeparator+"onLogin",e),eventAccountsOnLogin.resolve(e)}function reloadUserFrameworkConfigOnFlowLoaded(){void 0!==voontoApp&&voontoApp&&voontoApp.when("vocuser:user-flow-loaded").then(function(e){const o=e.data;options=$.extend(!0,options,o.getOptions()),protectedFunctions=$.extend(!0,protectedFunctions,o.getProtectedFunctions()),flows[flows.length]=o,initFlows(),o.execute()})}function redirectItpOnFlowLoad(e,o){!options.userIsInFlow||e!==options.screenName.login&&e!==options.screenName.registration||void 0!==options.enableGigyaITP&&options.enableGigyaITP&&(void 0!==(e=getQueryVariable("gig_ssoToken"))&&e||redirectToGigyaCentralLoginPage(o),gigya.hasSession().then(function(e){e&&gigyaITPSsoContinue()}))}function redirectItpToRegisterWithToken(e){var o;void 0!==options.enableGigyaITP&&options.enableGigyaITP&&(void 0!==(o=getQueryVariable("gig_ssoToken"))&&o?redirectToUrlWithGigyaToken(window.location.href,e):redirectToGigyaCentralLoginPage(e),gigya.hasSession().then(function(e){e&&gigyaITPSsoContinue()}))}function redirectItpToCurrentPageWithToken(e){void 0!==options.enableGigyaITP&&options.enableGigyaITP&&options.userIsInFlow&&redirectToGigyaCentralLoginPage(e)}function init(e){if(timeAfterLoadGigyaLoads=window.performance.now(),initialParams=setInitialParams(e),jsErrorsFromInitialParams(),sendDataToNewRelicFromInitialParams(),(options=getOptions()).userIsInFlow=userIsInFlowScreen(),options.userIsInFLowScreenSession=userIsInFlowScreenSession(),-1<window.location.href.indexOf(options.route.redirectionURL)){var o="/"!==options.backURL?options.backURL:getNfrylCookie();return removeNfrylCookie(),redirectToUrl(o,0),!1}!0===options.userIsInFlow&&(service=getLastServiceFromVocUserInformationCookie(),options.service=service),options.userIsInFlow||clearFieldReturnUrlInCookieVocUser(),createJWTToken(),updateLastestBackUrl(getNfrylCookie()),options.extensionType=null!==getCookieVocUserInformation("extensionType")?getCookieVocUserInformation("extensionType"):"",setOptionIfRedirectedFromQualifio(),initAreaPersonalPageRouting(),initOptions(),options.envFront=initSubDomainEnvFront(options.currentEnvironment),initProtectedFunctions();var t=getCurrentScreenName();redirectItpOnFlowLoad(t),activateAdditionalData(),openScreenByRoute(),initFlows(),initCustomValidationPlugin(),addGigyaEventMap();o=$("div#"+options.idDivHtmlCustomBenefits);void 0!==o&&o.append(options.htmlBenefits),!1===options.userIsInFlow&&(deleteFieldInCookieVocuser("extensionFlowUrl"),deleteFieldInCookieVocuser("logoUrl"),deleteFieldInCookieVocuser("logoFooter"),deleteFieldInCookieVocuser("extensionType"),deleteFieldInCookieVocuser("productId"),deleteFieldInCookieVocuser("cart"),deleteFieldInCookieVocuser("analytics"),deleteFieldInCookieVocuser("rtim"),deleteFieldInCookieVocuser("analyticsVocuser"),updateFieldInCookieVocUser("lastAction","",!0)),redirectToGoogleContentUrl(options.userIsInFlow),saveLastServiceInCookieVocUser(options.service,!1),log=options.debug&&userUtils.log?userUtils.log:function(){},firePromiseGetUserTypeOnEvents(),listenerProductsOnReadyForAnalytic();var i,o=$("#vocento-vocuser-screen-container");return void 0!==o&&o&&o.length&&isAppWebView()&&(o.addClass("voc-user-app"),-1<window.location.href.indexOf("appwebviewtoken")&&listenAppsSessionToken()),isAppWebView()&&void 0!==simpleStorageDependency&&simpleStorageDependency&&(i=void 0!==simpleStorageDependency.get("isAgronomaApp")&&simpleStorageDependency.get("isAgronomaApp"),AppWebview.setIsAgronoma(i)),executeFlows(),reloadUserFrameworkConfigOnFlowLoaded(),processesOutsideUserFlows(),printFrameworkOptions(),userDataReady(),registerUI(),options.userIsInFlow&&redirectToBackUrlOnLogin(),gigya.socialize.addEventHandlers({onLogin:function(e){socializeOnLogin(e)},onLogout:function(e){!1!==userClickedLogout?(sendDataToNewRelic({eventNameFired:"socializeOnLogout",firedEventLogout:!0,additionalInformation:"socialize.logout OK fired by user action.",errorMessage:"socialize.logout fired by user action."}),removeCookies(),removeSimpleStorage(),clearFieldReturnUrlInCookieVocUser(),options.reloadOnLogout||(fireEvent("socialize"+eventSeparator+"onLogout",e),user=null,registerUI())):sendDataToNewRelic({eventNameFired:"socializeOnLogoutByGigya",firedEventLogout:!0,additionalInformation:"socialize.logout fired by Gigya. Detected no user signature token.",errorMessage:"socialize.logout fired by Gigya. Detected no user signature token."})}}),gigya.accounts.addEventHandlers({onLogin:function(e){accountsOnLogin(e)},onLogout:function(e){!1!==userClickedLogout?(sendDataToNewRelic({eventNameFired:"accountsOnLogout",firedEventLogout:!0,additionalInformation:"accounts.logout OK fired by user action.",errorMessage:"accounts.logout fired by user action."}),removeCookies(),removeSimpleStorage(),clearFieldReturnUrlInCookieVocUser(),options.reloadOnLogout?userUtils.reload():(fireEvent("accounts"+eventSeparator+"onLogout",e),account=null)):sendDataToNewRelic({eventNameFired:"accountsOnLogoutByGigya",firedEventLogout:!0,additionalInformation:"accounts.logout fired by Gigya. Detected no user signature token.",errorMessage:"accounts.logout fired by Gigya. Detected no user signature token."})}}),getUserInfo({}),getAccountInfo({}),$.when(eventServiceAdd,eventCheckService,eventSetAccountInfoCallback).done(function(e,o,t){fireEvent("accounts"+eventSeparator+"addServiceCompleted",t)}),userUtils.insertCustomFields.removeHTML(),activateAdditionaleDataPageWithExtraRequirements(t,options.showAdditionalDataPageWithExtraRequirements),isActivatedAdditionalData()&&(additionalManifest=getAdditionalManifest()),t!==options.screenName.additionalData&&injectFieldsinScreensByScreenNameExceptAdditionalDataScreen(t),t===options.screenName.additionalData&&isActivatedAdditionalData()&&$.when(eventGetAccountInfo).done(function(e){loadNewslettersListFromResponse(e),options.showBirthDateFields.enabled?customizeBirthDateInManifest(options.screenName.additionalData,additionalManifest):removeBirthDateFromManifest(additionalManifest),additionalManifest=customizeInterestsFieldsInManifest(additionalManifest=removeFilledFieldsFromManifest(e,additionalManifest)),addCustomFieldsInAdditionalDataScreen(t,options,additionalManifest)}),"http:"===window.location.protocol&&"pro"!==options.currentEnvironment?(-1<window.location.href.indexOf("desnlocal-vocuser")&&alert("ERROR: Página de desarrollo cargada con http, por favor cambie a httpS."),void console.error("ERROR: Página de desarrollo cargada con http, por favor cambie a httpS.")):(options.userIsInFlow&&t===options.screenName.login&&("larioja.com"!==(i=getDomainTld(window.location.href))&&"leonoticias.com"!==i||void 0!==document.referrer&&document.referrer&&""!==document.referrer&&"/"!==document.referrer&&i!==getDomainTld(document.referrer)&&(createCookieForNfryl(document.referrer),updateLastestBackUrl(document.referrer))),disableAdobeDtmYoutubeTimerHook(),deleteUnitTesting(options.envFront),addProtectedFunctionsToUnitTesting(),addPublicFunctionsToUnitTesting(),totalStartingTime=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber inicializado vocento.gigya.js: init()."}),this)}function getVoontoApp(){return voontoApp}function voontoPromised(e,o,t){var i=!1;return void 0!==e&&e&&void 0!==o&&o&&void 0!==t&&t&&(t.promised(eventProjectNamespace+eventSeparator+e,o),window.vocento="undefined"!=typeof vocento?window.vocento:{},window.vocento[eventProjectNamespace]=void 0!==vocento[eventProjectNamespace]?window.vocento[eventProjectNamespace]:{},window.vocento[eventProjectNamespace][e]=void 0!==vocento[eventProjectNamespace][e]?window.vocento[eventProjectNamespace][e]:o,i=!0),i}function addGigyaEventMap(){var e=[];e.push({events:"beforeRequest",method:globalHookEventMapGigya,args:[function(e){return e}]}),e.push({events:"onRefreshExternalComponentsEvent",method:globalHookEventMapGigya,args:[function(e){return e}]}),e.push({events:"afterResponse",method:globalHookEventMapGigya,args:[function(e){return e}]});e={eventMap:e};return void 0!==gigya.defaultEventMaps&&gigya.defaultEventMaps||(gigya.defaultEventMaps=[]),gigya.defaultEventMaps.push(e),!0}function setNewCommunicationsStructure(obj){var result=!1,communicationsArray,date;return void 0!==obj&&obj&&void 0!==obj.params&&obj.params&&void 0!==obj.params.data&&obj.params.data&&(communicationsArray=[],date=(new Date).toISOString(),obj.params.data.hasOwnProperty("adsGroup")&&communicationsArray.push({ID:"adsGroup",status:obj.params.data.adsGroup,updateDate:date}),obj.params.data.hasOwnProperty("adsThirdparty")&&communicationsArray.push({ID:"adsThirdparty",status:obj.params.data.adsThirdparty,updateDate:date}),obj.params.data.hasOwnProperty("adsMedia")&&obj.params.data.adsMedia.hasOwnProperty(obj.params.cid)&&communicationsArray.push({ID:"adsMedia",status:eval("obj.params.data.adsMedia."+obj.params.cid),updateDate:date}),1<=communicationsArray.length&&(result=communicationsArray)),result}function setNewCustomerServicesStructure(e){var o=!1,t=[],i=(new Date).toISOString(),o=getCustomerServiceFromCookieAndUpdateOptions();return t.push({ID:options.serviceId,firstService:!0,siteID:options.siteId,createdDate:i,platform:options.platform,device:options.device,serviceReference:options.serviceReference}),o=1<=t.length?t:o}function setAdditionalDataStructure(e,o,t){e=void 0!==e?e:{};var i=!1,n=(new Date).toISOString(),r=[],a={};return a.serviceID=void 0!==t&&t?t:options.serviceId,a.serviceReference=void 0!==o&&o?o:options.serviceReference,a.createdAt=n,(r=0<e.length?e:r).push(a),i=1<=r.length?r:i}function globalHookEventMapGigya(i){var e,o=$("#gigya-complete-registration-screen:visible"),t=$("#gigya-update-profile-screen:visible");"beforeRequest"!==i.eventName&&"afterResponse"===i.eventName&&"socialize.notifyLogin"!==i.methodName||(("accounts.register"===i.methodName||"accounts.setAccountInfo"===i.methodName&&(void 0!==o&&o&&0<o.length||void 0!==t&&t&&0<t.length))&&(!options.saveGigyaCommunications||!1!==(e=setNewCommunicationsStructure(i))&&(void 0!==i.params.data&&i.params.data||(i.params.data={}),i.params.data.communications=e),void 0!==options.cleanFormFields&&0<Object.keys(options.cleanFormFields).length&&$.each(options.cleanFormFields,function(e,o){var t=e.split(".");1===t.length&&(i.params[e]=o),2!==t.length||"data"!==t[0]&&"profile"!==t[0]||(e=t[0],t=t[1],i.params[e][t]=o)})),("accounts.register"===i.methodName||"accounts.setAccountInfo"===i.methodName&&void 0!==o&&o&&0<o.length)&&options.saveGigyaCustomerServices&&(options.userIsInAppWebviewFlow||!1!==(e=setNewCustomerServicesStructure(i))&&(void 0!==i.params.data&&i.params.data||(i.params.data={}),i.params.data.customerService=e)),("accounts.register"===i.methodName||"accounts.setAccountInfo"===i.methodName&&void 0!==o&&o&&0<o.length)&&(!isActivatedAdditionalData()||isActivateTestMode()||!1!==(o=setAdditionalDataStructure())&&(void 0!==i.params.data&&i.params.data||(i.params.data={}),i.params.data.additionalDataFilled=o),void 0!==i.params.email&&i.params.email&&(i.params.email=i.params.email.toLowerCase())),"afterResponse"===i.eventName&&"socialize.notifyLogin"===i.methodName&&(void 0!==gigyaResponse&&gigyaResponse?(socializeOnLogin(gigyaResponse),accountsOnLogin(gigyaResponse)):gigya.socialize.refreshUI({callback:function(){externalOptions.notifyLoginEventFired=!1,getUserInfo({}),getAccountInfo({})}})))}function isActivateTestMode(){var e=getNfrylCookie(),i={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,o,t){i[o]=t}),!0===protectedFunctions.isVarNotNull(i)&&void 0!==i.test_mode&&"1"===i.test_mode}function sendCustomerService(e,o){var t=!1;if(void 0===e||!e)return t;if(options.userIsInAppWebviewFlow)return t;var i=getNfrylCookie();void 0!==(i=void 0===i||!i||"/"===i?window.location.href:i)&&i&&"/"===i[i.length-1]&&(i=i.substring(0,i.length-1));var n=getCookieVocUid("uid"),r=getCookieVocUid("uidSignature"),a=getCookieVocUid("signatureTimestamp"),s=getCookieVocUserInformation("regToken"),c="",c={UID:n,UIDSignature:r,signatureTimestamp:a,url:i,serviceId:e,customerServiceAdditionalInformation:c=void 0!==o&&o?o:c};void 0!==s&&s&&(c.regToken=s);s=options.authServerVocCore+"/vocuser/v1/user/customer-service/subscribe-by-id";try{timeBeforeCallingCustomerServiceEndpoint=window.performance.now(),t=$.ajax({url:s,type:"POST",data:c,async:!0,dataType:"json",success:function(e){timeCustomerServiceObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber obtenido la información del endpoint customer service."})},error:function(e){timeCustomerServiceObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber obtenido la información del endpoint customer service."})}})}catch(e){}return t}function saveRegTokenOnRegister(e,o){var t=!1;return t=void 0!==e&&e&&void 0!==o&&o&&(options.screenName.formulario===o||options.screenName.completo===o)?updateFieldInCookieVocUser("regToken",e,!0):t}function saveLastActionInVocUserCookie(e){var o=!1;return o=void 0!==e&&e?updateFieldInCookieVocUser("lastAction",e,!0):o}function saveExtensionFlowUrlInVocUserCookie(e){var o=!1;return o=void 0!==e&&e?updateFieldInCookieVocUser("extensionFlowUrl",e,!0):o}function createJWTToken(){$.when(eventGetUserInfo).done(function(e){return!authenticated||existsCookieTokenJWT()?(eventTokenJWTCreated.resolve(),!1):void getJWT()})}function checkLegalTerms(e){e.profile;e=e.data;return void 0!==e&&e&&(void 0===e.legaltermsLastUpdate||(e.legaltermsLastUpdate,options.legaltermsLastUpdate)),this}function isFirstLogin(e){var o=!1,e=getGigyaResponse(e);return void 0!==e&&e&&void 0!==e.data&&e.data?void 0!==(e=e.data).initLoginComplete&&!1!==e.initLoginComplete||(o=!0):void 0!==account&&account&&void 0!==account.data&&account.data&&(void 0===account.data.initLoginComplete||!1===account.data.initLoginComplete)&&(o=!0),o}function userCreatedWithinTenMinutes(e){var o=!1,e=getGigyaResponse(e);return void 0!==e&&e&&void 0!==e.createdTimestamp&&e.createdTimestamp&&(Date.now||(Date.now=function(){return(new Date).getTime()}),o=!(600<Math.floor(Date.now()/1e3)-e.createdTimestamp/1e3)),o}function checkFirstLogin(e){return!0===isFirstLogin(e)&&fireEvent("user"+eventSeparator+"firstLogin",e),this}function setLastLogin(e){var o=getContext(),t={};return t.lastLogin={url:options.backURL,timestamp:o.timestamp},setAccountInfo({data:t,callback:e.callback})}function setCurrentService(e){var o=!1;return void 0!==e&&e&&(service=e,o=saveLastServiceInCookieVocUser(options.service=e,!0)),o}function getCurrentService(){return service}function getAuthServer(){return options.authServer}function saveServiceAndServices(e,o){if(void 0!==(e=void 0===e||!e?{}:e)&&e&&void 0!==o&&o){var t=!1;if(void 0===e[options.ssoGroup]||!1===e[options.ssoGroup])e[options.ssoGroup]=o,t=!0;else{for(var i=e[options.ssoGroup].split(","),n=!1,r=0;r<i.length;r++)o.toLowerCase()===i[r].toLowerCase()&&(n=!0);!1===n&&(e[ssoGroup]+=","+o,t=!0)}t&&((t={}).services=e,setAccountInfo({data:t}).then(function(e){return!0},function(e){return!0}))}return!1}function checkService(e){var o=e.data,t=getLastServiceFromVocUserInformationCookie();return saveServiceAndServices(void 0!==o&&o&&void 0!==o.services&&o.services?o.services:{},t)&&(e={e:e,account:account},eventCheckService.resolve(e)),this}function checkNickname(o){var e,t=o.profile;o.data;void 0!==t&&t&&void 0!==t.nickname&&t.nickname?(e=!1,void 0!==simpleStorageDependency&&simpleStorageDependency&&(void 0!==(e=simpleStorageDependency.get("verifyUniqueNicknameFlushed"))&&!0===e||(timeBeforeCallingVerifyUniqueNickNameEndpoint=window.performance.now(),t=options.authServer+"/verify_unique_nickname.html?UID="+o.UID+"&nickname="+encodeURIComponent(t.nickname)+"&callback=?",$.getJSON(t,function(e){timeVerifyUniqueNickNameObtained=window.performance.now(),simpleStorageDependency.set("verifyUniqueNicknameFlushed",!0,{TTL:3e5}),e.isValid||fireEvent("user"+eventSeparator+"duplicateNickname",o),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber obtenido la información del endpoint verify_unique_nickname."})})))):fireEvent("user"+eventSeparator+"noNickname",o)}function safeEncodeUserSignature(e,o,t){var i=!1;return i=void 0!==e&&void 0!==o&&void 0!==t?"UID="+encodeURIComponent(e)+"&UIDSignature="+encodeURIComponent(o)+"&signatureTimestamp="+encodeURIComponent(t):i}function verifyUser(o){return $.ajax({url:options.authServer+"/api/v1/verifiedRegistration?callback=?",data:{UID:o.response.UID,UIDSignature:o.response.UIDSignature,signatureTimestamp:o.response.signatureTimestamp},type:"GET",dataType:"jsonp",success:function(e){e.success&&options.loginOnVerify&&notifyLoginUser(o)},error:function(e,o,t){log("verifyUser => ERROR xhr","error")}})}function notifyLoginUser(e){return timeBeforeCallingNotifyLoginEndpoint=window.performance.now(),$.ajax({url:options.authServer+"/api/notifylogin",data:{email:e.response.profile.email,UID:e.response.UID,UIDSignature:e.response.UIDSignature,signatureTimestamp:e.response.signatureTimestamp},type:"POST",dataType:"json",success:function(e){var o,t;timeNotifyLoginObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint notifyLogin."}),log("notifyLoginUser => Login notificado a Gigya","info"),void 0===options.extensionType||!options.extensionType||"ecommerce"!==options.extensionType&&"redencion"!==options.extensionType&&"regalo"!==options.extensionType?isAppWebView()||userUtils.reload():(createSessionCookie(e),o=getExtensionCustomReturnUrl(),t=void 0!==options.exitoRegistro[options.extensionType]&&options.exitoRegistro[options.extensionType]?options.exitoRegistro[options.extensionType]:"",e=0<=o.indexOf("#")?"&":"#",redirectToUrl(o+e+t,1e3))},error:function(e,o,t){timeNotifyLoginObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint notifyLogin."}),log("notifyLoginUser => ERROR xhr","error")}})}function isAppWebView(){var e=!1;return e=-1<navigator.userAgent.indexOf("VocDeviceApp")&&(-1<window.location.href.indexOf("device=app")||-1<window.location.href.indexOf("screenset=appwebview"))?!0:e}function userIsInAppCoreWebView(){return-1<navigator.userAgent.indexOf("VocDeviceApp")}function isAgronomaApp(){return-1<window.location.href.indexOf("appname=agronoma")}function createSessionCookie(e){var o={},t=void 0!==e.data&&e.data?e.data:"";void 0!==(o=t?JSON.parse(t):o)&&0<Object.keys(o).length&&void 0!==o.statusCode&&o.statusCode&&200===o.statusCode&&(e=void 0!==o.cookieDomain&&o.cookieDomain?"."+o.cookieDomain:"."+userUtils.getMainDomain(),void 0!==o.cookieValue&&o.cookieValue&&void 0!==o.cookieName&&o.cookieName&&(t=o.cookieValue,createCookie(o.cookieName,t,{domain:e,path:"/",expires:365},!0)))}function getExtensionCustomReturnUrl(){var e=options.backURL;return e=void 0!==options.extensionCustomReturnUrl&&options.extensionCustomReturnUrl?options.extensionCustomReturnUrl:e}function getCustomerService(e){var o={ID:null,createdDate:null,firstService:!1};if(void 0!==e&&e&&void 0!==e.data&&e.data)if(void 0!==e.data.customerService&&e.data.customerService&&e.data.customerService.length)for(var t=e.data.customerService.length,i=0;void 0!==e.data.customerService[i].firstService&&e.data.customerService[i].firstService&&(o.ID=e.data.customerService[i].ID,o.createdDate=e.data.customerService[i].createdDate,o.firstService=e.data.customerService[i].firstService),(i+=1)<t&&!1===o.firstService;);else log("getCustomerService => Atención, el usuario no tiene customerService.","warn");return o}function initializeCookieVocUid(e,o,t){var i,n,r,a,s=!1,c="",d=gigya.partnerSettings.ssoKey,l="",u="",p="",g="",v="",m="",f="",h="",y="",w="",S="";return void 0!==account&&account&&(l=account.UID,u=account.UIDSignature,p=account.signatureTimestamp,void 0!==account.data&&account.data&&void 0!==account.data.registration&&account.data.registration&&void 0!==account.data.registration.service&&account.data.registration.service&&(y=account.data.registration.service),n=(i=getCustomerService(account)).createdDate?new Date(i.createdDate):"",void 0!==i.ID&&i.ID&&n&&(r=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,a=n.getDate()<10?"0"+n.getDate():n.getDate(),w=i.ID,S=n.getFullYear()+"-"+r+"-"+a)),void 0!==user&&user&&(l=user.UID,u=user.UIDSignature,p=user.signatureTimestamp,g=user.age,v=user.zip,m=user.gender,f=user.firstName,h=user.lastName),void 0!==account&&account&&void 0!==user&&user&&(c=('{"uid":"'+l+'","uidSignature":"'+u+'","signatureTimestamp":"'+p+'","ssoApiKey":"'+d+'","age":"'+g+'","zip":"'+v+'","gender":"'+m+'","firstName":"'+userUtils.decodeHTMLEntities(f)+'","lastName":"'+userUtils.decodeHTMLEntities(h)+'","dataRegistrationService":"'+userUtils.decodeHTMLEntities(y)+'","customerService":"'+w+'","customerServiceDate":"'+S+'","env":"'+options.currentEnvironment+'"}').replace(";","."),w=JSON.parse(c),void 0!==(S=getCookieVocUid())&&S&&(void 0!==S.descProducto&&S.descProducto&&(S.descProducto=S.descProducto.replace("%","")),S=t?$.extend({},S,w,!0):$.extend({},w,S,!0),c=JSON.stringify(S)),(-1<browser.indexOf("Safari")||-1<browser.indexOf("Mobile")||-1<browser.indexOf("-?"))&&(c=encodeURIComponent(c)),s=createCookie(UID_COOKIE_NAME,c,{domain:e,path:"/",expires:o},t),firedEventVocUserCookieVocUidUpdated=!0),s}function createCookieVocUser(e,o,t,i){var n="",r=service,r='{    "lastService": "'+(r=void 0!==i.lastService?i.lastService:r)+'" }',n=r;(-1<browser.indexOf("Safari")||-1<browser.indexOf("Mobile")||-1<browser.indexOf("-?"))&&(n=encodeURIComponent(r)),createCookie(VOCUSER_COOKIE_NAME,n,{domain:e,path:"/",expires:o},t)}function decodeJsonCookieToObject(o){var t=!1;if("undefined"!==o&&o&&o)try{t=JSON.parse(o.cookie)}catch(e){try{o.cookie=decodeURIComponent(o.cookie),t=JSON.parse(o.cookie)}catch(e){}}return t}function getLastServiceFromVocUserInformationCookie(){var e=!1;return e=void 0===(e=getCookieVocUserInformation("lastService"))||!e?service:e}function getCookieVocUserInformation(e){var o=!1,t=getCookiePureJS(VOCUSER_COOKIE_NAME,!1),i="",n="";if(void 0!==t&&t){try{o=decodeURIComponent(t),i=decodeURIComponent(t)}catch(e){i=""}n=decodeJsonCookieToObject({cookie:o=void 0!==i&&i&&""!==i?i:o})}return void 0===n||void 0===e?n:void 0!==n[e]&&n[e]?n[e]:null}function getCookieVocUid(e){$.cookie.raw=!0;var o=$.cookie(UID_COOKIE_NAME),t="";return void 0===o||!o||!(o={cookie:o=-1<browser.indexOf("Safari")||-1<browser.indexOf("Mobile")||-1<browser.indexOf("-?")?decodeURIComponent(o):o})===(t=decodeJsonCookieToObject(o))&&(t=decodeJsonCookieToObject(o)),void 0===t||void 0===e?t:t[e]}function saveLastServiceInCookieVocUser(e,o){return updateFieldInCookieVocUser("lastService",void 0!==e&&e?e:service,void 0===o||!1===o?!options.userIsInFlow:o)}function updateFieldInCookieVocUser(e,o,t){var i,n=!1;return void 0!==e&&e&&(i={},(i=void 0===(i=getCookieVocUserInformation())||!i?{}:i)[e]=o=void 0===o?"":o,o=JSON.stringify(i),i=userUtils.getMainDomain(),(-1<browser.indexOf("Safari")||-1<browser.indexOf("Mobile")||-1<browser.indexOf("-?"))&&(o=encodeURIComponent(o)),n=createCookie(VOCUSER_COOKIE_NAME,o,{domain:i,path:"/",expires:365},t)),n}function deleteFieldInCookieVocuser(e){var o,t=!1;return void 0!==e&&e&&(o={},(o=void 0===(o=getCookieVocUserInformation())||!o?{}:o).hasOwnProperty(e)&&delete o[e],e=JSON.stringify(o),o=userUtils.getMainDomain(),(-1<browser.indexOf("Safari")||-1<browser.indexOf("Mobile")||-1<browser.indexOf("-?"))&&(e=encodeURIComponent(e)),t=createCookie(VOCUSER_COOKIE_NAME,e,{domain:o,path:"/",expires:365},!0)),t}function updateFieldInCookieVocUid(e,o,t){var i=!1;if(void 0!==e&&e){var n={};if(void 0!==(n=getCookieVocUid())&&n||(n={}),"string"==typeof(o=void 0===o?"":o)&&(o=o.replace(";",".")),""===(n[e]=o)&&"dataServicesSsoGroup"===e&&delete n[e],void 0===n||!n||"object"==typeof n&&Object.keys(n).length<=0)return;e=JSON.stringify(n),n=userUtils.getMainDomain();(-1<browser.indexOf("Safari")||-1<browser.indexOf("Mobile")||-1<browser.indexOf("-?"))&&(e=encodeURIComponent(e));i=createCookie(UID_COOKIE_NAME,e,{domain:n,path:"/",expires:365},t)}return i}function updateReturnUrlInVocUserCookie(e){var o=!1;return void 0!==e&&e&&(o=updateFieldInCookieVocUser("returnUrl",e,!0)),o}function updateReturnUrlTimeoutInVocUserCookie(e){var o=!1;return void 0!==e&&e&&(o=updateFieldInCookieVocUser("returnUrlTimeout",e,!0)),o}function getResendEmailCookie(){var e=$.cookie(RESEND_EMAIL_COOKIE_NAME),o="";if(void 0!==e&&e){e={cookie:e=-1<browser.indexOf("Safari")||-1<browser.indexOf("Mobile")||-1<browser.indexOf("-?")?decodeURIComponent(e):e};return o=!1===(o=decodeJsonCookieToObject(e))?decodeJsonCookieToObject(e):o}}function hasToResendEmailCookieFound(){var e=!1,o=getResendEmailCookie();return e=void 0!==o&&""!==o&&o.hasOwnProperty("userMail")&&""!==o.userMail&&o.hasOwnProperty("regToken")&&""!==o.regToken&&o.hasOwnProperty("sended")&&("false"===o.sended||!1===o.sended)?o:e}function hasToRemoveCookieResend(){var e=!1,o=getResendEmailCookie();return e=void 0!==o&&""!==o&&o.hasOwnProperty("userMail")&&""!==o.userMail&&o.hasOwnProperty("regToken")&&""!==o.regToken&&o.hasOwnProperty("sended")&&("true"===o.sended||!0===o.sended)?!0:e}function removeResendMailVerficationCookie(){var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?$.removeCookie(RESEND_EMAIL_COOKIE_NAME,{domain:e,path:"/"}):$.cookie(RESEND_EMAIL_COOKIE_NAME,null,{domain:e,path:"/"})}function updateFieldInCookieResend(e,o,t){if(void 0!==e&&e){var i={};if(void 0===(i=getResendEmailCookie())||!i||""===i)return!1;if(void 0===o&&(o=""),!i.hasOwnProperty(e)||""===i[e])return!1;i[e]=o;o=JSON.stringify(i),i="."+userUtils.getMainDomain();(-1<browser.indexOf("Safari")||-1<browser.indexOf("Mobile")||-1<browser.indexOf("-?"))&&(o=encodeURIComponent(o)),createCookie(RESEND_EMAIL_COOKIE_NAME,o,{domain:i,path:"/",expires:1},t)}return!1}function updateSendedInResendCookie(){return updateFieldInCookieResend("sended","true",!0)}function userIsInFlowScreen(){var e,o=!1;for(e in page)if(page.hasOwnProperty(e)){var t=page[e];if(-1!==window.location.pathname.indexOf(t))return o=!0}return o}function userIsInFlowScreenSession(){var e,o=!1;for(e in options.pageLogged)if(options.pageLogged.hasOwnProperty(e)){var t=options.pageLogged[e];if(-1!==window.location.pathname.indexOf(t))return o=!0}return o}function getCurrentScreenName(){var e=!1,o=options.page.loginPage;return!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.login),o=options.page.loginAdditionalDataPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.additionalData),o=options.page.registerPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.formulario),o=options.page.registerConfirmedPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.confirmacion),o=options.page.resendMailPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.reenviar),o=options.page.mailSendedPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.reenviado),o=options.page.validateMailPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.validacion),o=options.page.recoveryPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.recuperar),o=options.page.sendedMailPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.enviado),o=options.page.changePasswdPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.resetear),o=options.page.passwdchangedPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.actualizado),o=options.page.setPasswdPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.setear),o=options.page.passwdSetedPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.seteada),o=options.page.profilePage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.perfil),o=options.page.interestPage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.intereses),o=options.page.changePasswdProfilePage,!0===new RegExp(o+"$").test(window.location.pathname)&&(e=options.screenName.cambiar),o=options.page.profileUpdatedPage,e=!0===new RegExp(o+"$").test(window.location.pathname)?options.screenName.actualizado:e}function getJWTToken(e){var o=userUtils.getMainDomain(),t="https://user-auth."+o+"/auth/token";if("pro"!==options.currentEnvironment&&(t="https://pre-user-auth."+o+"/auth/token"),void 0!==e.UID&&e.UID){e={uid:e.UID,fields:["firstName","lastName","nickname","email","UID","photoURL"]};return $.ajax({url:t,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(e),xhrFields:{withCredentials:!0},success:function(e){eventTokenJWTCreated.resolve()},fail:function(e){eventTokenJWTCreated.resolve()}})}}function createCookies(e,o){log("createCookies => Creando cookies","info");var t="."+userUtils.getMainDomain();void 0!==e&&e&&void 0===e.bio&&(e.bio="");$.cookie.raw=!0,$.cookie(QUEID_COOKIE_NAME,"1",{path:"/",expires:365}),!0===options.hasPaywall&&createCookieEvolok(),initializeCookieVocUid(t,365,o),fireEvent("user"+eventSeparator+"createCookie")}function createCookieAutoNewsletters(e){var o="."+userUtils.getMainDomain(),e=encodeURIComponent(e);createCookie(AUTO_NEWSLETTERS_COOKIE_NAME,e,{domain:o,path:"/",expires:1},!0)}function getCookieAutoNewsletters(){var e=!1,o=$.cookie(AUTO_NEWSLETTERS_COOKIE_NAME);if(void 0!==o&&o)try{o=decodeURIComponent(o)}catch(e){if(log("Error en getCookieAutoNewsletters() al decodificar la cookie: "+e,"error"),void 0!==(o=$.cookie(AUTO_NEWSLETTERS_COOKIE_NAME))&&o)try{o=decodeURIComponent(o)}catch(e){log("Error en getCookieAutoNewsletters() al decodificar la cookie: "+e,"error")}}if(o)try{e=decodeURIComponent(o)}catch(e){log("Error en getCookieAutoNewsletters() al decodificar la cookie: "+e,"error")}else e=o;return e}function removeAutoNewslettersCookie(){var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?$.removeCookie(AUTO_NEWSLETTERS_COOKIE_NAME,{domain:e,path:"/"}):$.cookie(AUTO_NEWSLETTERS_COOKIE_NAME,null,{domain:e,path:"/"})}function createCookieVocUserTemporal(e){var o="."+userUtils.getMainDomain(),e=encodeURIComponent(e);createCookie(VOCUSER_THANKYOU_COOKIE_NAME,e,{domain:o,path:"/",expires:1},!0)}function getCookieVocUserTemporal(){var e=!1,o=$.cookie(VOCUSER_THANKYOU_COOKIE_NAME);if(void 0!==o&&o)try{o=decodeURIComponent(o)}catch(e){if(log("Error en getCookieVocUserTemporal() al decodificar la cookie: "+e,"error"),void 0!==(o=$.cookie(VOCUSER_THANKYOU_COOKIE_NAME))&&o)try{o=decodeURIComponent(o)}catch(e){log("Error en getCookieVocUserTemporal() al decodificar la cookie: "+e,"error")}}if(o)try{e=decodeURIComponent(o)}catch(e){log("Error en getCookieVocUserTemporal() al decodificar la cookie: "+e,"error")}else e=o;return e}function removeCookieVocUserTemporal(){var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?$.removeCookie(VOCUSER_THANKYOU_COOKIE_NAME,{domain:e,path:"/"}):$.cookie(VOCUSER_THANKYOU_COOKIE_NAME,null,{domain:e,path:"/"})}function getNfrylCookie(){var e=!1,o=$.cookie(NFRYL_COOKIE_NAME);if(void 0!==o&&o)try{o=decodeURIComponent(o)}catch(e){if(log("Error en getNfrylCookie() al decodificar la cookie: "+e,"error"),void 0!==(o=$.cookie(NFRYL_COOKIE_NAME))&&o)try{o=decodeURIComponent(o)}catch(e){log("Error en getNfrylCookie() al decodificar la cookie: "+e,"error")}}void 0!==(o=void 0===o||!o?window.location.href:o)&&o&&"/"===o&&(o="https://www."+getDomainTld(window.location.href));try{e=decodeURIComponent(o)}catch(e){log("Error en getNfrylCookie() al decodificar la cookie: "+e,"error")}return e}function cookieNewPasswordExists(){var e=!1;return e=void 0!==$.cookie(VOCUSER_NEW_PASSWORD_NAME)&&null!==$.cookie(VOCUSER_NEW_PASSWORD_NAME)?!0:e}function removeNfrylCookie(){var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?$.removeCookie(NFRYL_COOKIE_NAME,{domain:e,path:"/"}):$.cookie(NFRYL_COOKIE_NAME,null,{domain:e,path:"/"})}function removeNewslettersCookie(){var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?$.removeCookie(NEWSLETTERS_COOKIE_NAME,{domain:e,path:"/"}):$.cookie(NEWSLETTERS_COOKIE_NAME,null,{domain:e,path:"/"})}function removeNewPasswordCookie(){var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?$.removeCookie(VOCUSER_NEW_PASSWORD_NAME,{domain:e,path:"/"}):$.cookie(VOCUSER_NEW_PASSWORD_NAME,null,{domain:e,path:"/"})}function removeVocUserInformationCookie(){var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?$.removeCookie(VOCUSER_COOKIE_NAME,{domain:e,path:"/"}):$.cookie(VOCUSER_COOKIE_NAME,null,{domain:e,path:"/"})}function createCookieForNfryl(e){var o="."+userUtils.getMainDomain(),e=encodeURIComponent(e),o={domain:o,path:"/",expires:1};"https:"===window.location.protocol&&(o.secure="secure"),createCookie(NFRYL_COOKIE_NAME,e,o,!0)}function createCookieForNewPassword(){var e="."+userUtils.getMainDomain(),o=encodeURIComponent(!0);createCookie(VOCUSER_NEW_PASSWORD_NAME,o,{domain:e,path:"/",expires:1},!0)}function createCookieEvolok(){var e={domain:"."+userUtils.getMainDomain(),path:"/",expires:360},o=EVK_COOKIE_NAME+gigya.partnerSettings.ssoKey,t=!1,i=getUserInfoFromAccountOrUser(),n="";null===$.cookie(o)||void 0===$.cookie(o)?createCookie(o,n='"'+i.UID+"|"+i.UIDSignature+"|"+i.signatureTimestamp+'"',e,t):(n=$.cookie(o),deleteCookie(o,{path:"/"}),t=!0,void 0!==n&&n&&("%"===n[0]&&(n=decodeURIComponent(n),sendDataToNewRelic({eventNameFired:"evkFixed"})),"%"===n[0]&&(n=decodeURIComponent(n),sendDataToNewRelic({eventNameFired:"evkFixed"})),'"'!==n[0]&&(n='"'+n+'"',sendDataToNewRelic({eventNameFired:"evkFixed"})),"|"===n.replace(/"/g,"")[0]&&(n='"'+i.UID+"|"+i.UIDSignature+"|"+i.signatureTimestamp+'"',sendDataToNewRelic({eventNameFired:"evkFixed"}))),createCookie(o,n,e,t))}function createCookieTokenJWT(e){var o="."+userUtils.getMainDomain();createCookie(JWT_COOKIE,e,{domain:o,path:"/",expires:360},!1),eventTokenJWTCreated.resolve()}function existsCookieTokenJWT(){var e=$.cookie(JWT_COOKIE);return null!=e}function processesOutsideUserFlows(){var e;!1===options.currentRoute&&(createCookieForNfryl(window.location.href),updateLastestBackUrl(getNfrylCookie()),""===(e=protectedFunctions.getCookieVocUserInformation("customerService"))&&void 0===e||protectedFunctions.updateFieldInCookieVocUser("customerService","",!0),deleteCookie("registro",{path:"/"}),updateFieldInCookieVocUid("dataServicesSsoGroup","",!1))}function getFromQualifioCookie(){var o=!1,t=$.cookie(FROM_QUALIFIO_COOKIE_NAME);if(void 0!==t&&t)try{o=decodeURIComponent(t)}catch(e){log("Error en getNfrylCookie() al decodificar la cookie: "+e,"error"),void 0!==(t=$.cookie(FROM_QUALIFIO_COOKIE_NAME))&&t&&(o=decodeURIComponent(t))}return void 0!==o&&o||(o=window.location.href),decodeURIComponent(o)}function cookieFromQualifioNoExists(){var e=!1;return e=void 0===$.cookie(FROM_QUALIFIO_COOKIE_NAME)||null===$.cookie(FROM_QUALIFIO_COOKIE_NAME)?!0:e}function setOptionIfRedirectedFromQualifio(){cookieFromQualifioNoExists()||"true"!==getFromQualifioCookie()||(options.redirectedFromQualifio=!0)}function createCookie(e,o,t,i){t.path+="; SameSite=None; Secure";var n=!1;return!0!==i&&null!==$.cookie(e)&&void 0!==$.cookie(e)||($.cookie(e,o,t),n=!0),n}function deleteCookie(e,o){log("deleteCookie => Eliminando cookie","info"),void 0!==$.removeCookie?$.removeCookie(e,o):$.cookie(e,null,o)}function removeCookies(){log("removeCookies => Eliminando cookies","info");var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?($.removeCookie(QUEID_COOKIE_NAME,{path:"/"}),$.removeCookie(UID_COOKIE_NAME,{domain:e,path:"/"}),$.removeCookie(EVK_COOKIE_NAME+gigya.partnerSettings.ssoKey,{path:"/"}),$.removeCookie(EVK_COOKIE_NAME+gigya.partnerSettings.ssoKey,{domain:e,path:"/"}),$.removeCookie(JWT_COOKIE,{domain:e,path:"/"})):($.cookie(QUEID_COOKIE_NAME,null,{path:"/"}),$.cookie(UID_COOKIE_NAME,null,{domain:e,path:"/"}),$.cookie(EVK_COOKIE_NAME+gigya.partnerSettings.ssoKey,null,{path:"/"}),$.cookie(EVK_COOKIE_NAME+gigya.partnerSettings.ssoKey,null,{domain:e,path:"/"}),$.cookie(JWT_COOKIE,{domain:e,path:"/"})),removeEcommerceCookies(),fireEvent("user"+eventSeparator+"deleteCookie")}function removeFromQualifioCookie(){var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?$.removeCookie(FROM_QUALIFIO_COOKIE_NAME,{domain:e,path:"/"}):$.cookie(FROM_QUALIFIO_COOKIE_NAME,null,{domain:e,path:"/"})}function clearFieldReturnUrlInCookieVocUser(){return updateFieldInCookieVocUser("returnUrl","",!0)}function fireEvent(e,o){var t,i,n,r;"string"!==e&&e?(n=(t=getEventNamespaceForBody())+(i=e.replace(":",".")),(r=$.Event(n)).gigya_event=o,$("body").trigger(r),log("fireEvent => Evento disparado:"+n,"info"),log(o,"info"),void 0!==voontoApp&&voontoApp&&(t=getEventNamespaceForVoonto(),i=e.replace(".",":"),(r=$.Event(n=t+i)).gigya_event=o,$("body").trigger(r),log("fireEvent => Evento disparado:"+n,"info"),log(o,"info"))):log("fireEvent => Evento NO disparado, no se ha especificado el nombre del evento","warn")}function getUserInfoActionsUserNotLogged(e){void 0!==e&&e&&void 0!==e.errorCode&&e.errorCode&&(compareGigyaErrorCode(e.errorCode,"500026")||compareGigyaErrorCode(e.errorCode,"400106")||compareGigyaErrorCode(e.errorCode,"403048"))?log("getUserInfo => Usuario no autenticado. BUG GIGYA. ERROR de red o APIRate Limit: ( "+e.errorCode+"): "+e.errorMessage,"error"):(removeCookies(),removeSimpleStorage(!1),options.userIsInFlow||clearFieldReturnUrlInCookieVocUser())}function getUserInfoOnDataReady(e){log("getUserInfo => Usuario autenticado","info"),createCookies(user=e.user,!0),fireEvent("user"+eventSeparator+"onDataReady",e)}function getUserInfo(o){if(timeBeforeCallingGigyaGetUserInfo=window.performance.now(),void 0!==externalOptions.notifyLoginEventFired&&!0===externalOptions.notifyLoginEventFired){if(void 0===options.promiseNotifyLoginResolved||!options.promiseNotifyLoginResolved)return;options.promiseNotifyLoginResolved.then(function(e){getUserInfo(o)},function(e){console.log("***** Error failureNotifyLoginResolved *****")})}o.includeAllIdentities=o.includeAllIdentities||!0,o.cid=o.cid||options.cid,o.context=o.context||getContext();var t={callback:o.callback},i=function(e){var o;authenticated=!1,(authenticated=e.user.UID&&""!==e.user.UID)?getUserInfoOnDataReady(e):(log("getUserInfo => Usuario no autenticado. ERROR ( "+e.errorCode+"): "+e.errorMessage,"info"),executeNotifyLoginByConditions(),executeActionsUserNotLoggedByCookieEnvironment(e),firedEventSocializeOnDataNoReady=!0,o="string"===e.errorMessage&&e.errorMessage?"errorMessage: "+e.errorMessage:"",o=void 0!==e.errorCode?o+" ; errorCode: "+e.errorCode:o,o=void 0!==e.errorDetails?o+" ; errorDetails: "+e.errorDetails:o,sendDataToNewRelic({eventNameFired:"socializeOnDataNoReady",firedEventSocializeOnDataNoReady:firedEventSocializeOnDataNoReady,errorMessage:o,callId:""}),account=user=null,fireEvent("user"+eventSeparator+"onDataNoReady",e)),setEmailVerifiedMessage(authenticated),registerUI(),eventGetUserInfo.resolve(e)},e=$.extend(o,{callback:function(e){i(e),safeInvoke(t.callback,e)}});gigya.socialize.getUserInfo(e)}function checkFirstComment(e){if(isFirstComment=!0,void 0!==e&&e&&void 0!==e.data&&e.data&&void 0!==e.data.customerService&&0<e.data.customerService.length)for(var o=0,t=e.data.customerService.length;o<t;o++)if("110"===e.data.customerService[o].ID){isFirstComment=!1;break}}function checkAdditionalDataFilled(e,o,t){var i=!1,n=0,r=0;if(void 0!==e&&e&&void 0!==e.data&&e.data&&void 0!==e.data.additionalDataFilled&&e.data.additionalDataFilled&&0<Object.keys(e.data.additionalDataFilled).length){for(n=0,r=e.data.additionalDataFilled.length;n<r;n++)if(e.data.additionalDataFilled[n].serviceReference===o&&e.data.additionalDataFilled[n].serviceID===t){i=!0;break}}else if(void 0!==account&&account&&void 0!==account.data&&account.data&&void 0!==account.data.additionalDataFilled&&account.data.additionalDataFilled&&0<Object.keys(account.data.additionalDataFilled).length)for(n=0,r=account.data.additionalDataFilled.length;n<r;n++)if(account.data.additionalDataFilled[n].serviceReference===o&&account.data.additionalDataFilled[n].serviceID===t){i=!0;break}return i}function getAccountInfo(r){return new promiseNamespace(function(t,e){if(void 0!==externalOptions.notifyLoginEventFired&&!0===externalOptions.notifyLoginEventFired){if(void 0===options.promiseNotifyLoginResolved||!options.promiseNotifyLoginResolved)return;options.promiseNotifyLoginResolved.then(function(e){getAccountInfo(r)},function(e){console.log("***** Error failureNotifyLoginResolved *****")})}r.cid=r.cid||options.cid,r.context=r.context||getContext(),r.extraProfileFields=r.extraProfileFields||"nickname, firstName, lastName, birthDay, birthMonth, birthYear, address, zip, city, country, gender, work, professionalHeadline";var o={callback:r.callback},i=function(e){if(authenticated=!1,authenticated=void 0!==e&&e&&void 0!==e.UID&&e.UID?!0:authenticated){log("getAccountInfo => Usuario autenticado","info"),checkFirstComment(account=e),!0===isFirstLogin(e)&&removeSimpleStorage();return initializeCookieVocUid("."+userUtils.getMainDomain(),365,!0),!0===options.hasPaywall&&!0===options.hasEcommerce&&checkPaywallId(e,sincronizarLlamadasEcommercePaywall),!0===options.hasPaywall&&!1===options.hasEcommerce&&checkPaywallId(e),checkService(e),checkLegalTerms(e),checkNickname(e),checkFirstLogin(e),fireEvent("accounts"+eventSeparator+"onDataReady",e),voontoPromised("accountsondataready",{responseAccountsOnDataReady:e},voontoApp),eventGetAccountInfo.resolve(e),t(e)}log("getAccountInfo => Usuario no autenticado. ERROR ( "+e.errorCode+"): "+e.errorMessage,"info"),account=user=null,fireEvent("accounts"+eventSeparator+"onDataNoReady",e),compareGigyaErrorCode(e.errorCode,0)&&log("getAccountInfo => Usuario no autenticado. BUG GIGYA. ERROR ( "+e.errorCode+"): "+e.errorMessage,"error"),firedEventAccountsOnDataNoReady=!0;var o="string"===e.errorMessage&&e.errorMessage?"errorMessage: "+e.errorMessage:"",o=void 0!==e.errorCode?o+" ; errorCode: "+e.errorCode:o;return o=void 0!==e.errorDetails?o+" ; errorDetails: "+e.errorDetails:o,sendDataToNewRelic({eventNameFired:"accountsOnDataNoReady",firedEventAccountsOnDataNoReady:firedEventAccountsOnDataNoReady,errorMessage:o,callId:""}),eventGetAccountInfo.resolve(e),t(e)},n=$.extend(r,{callback:function(e){i(e),safeInvoke(o.callback,e)}});return gigya.accounts.getAccountInfo(n),!1})}function getConflictingAccount(n){return new promiseNamespace(function(o,e){if(n.cid=n.cid||options.cid,n.context=n.context||getContext(),void 0===n.regToken||n.regToken.length<=0)return e();var t={callback:n.callback},i=function(e){return o(e)},e=$.extend(n,{callback:function(e){i(e),safeInvoke(t.callback,e)}});gigya.accounts.getConflictingAccount(e)})}function setAccountInfo(i){return new promiseNamespace(function(a,s){i.cid=i.cid||options.cid,i.context=i.context||getContext();var o={callback:i.callback},t=function(e){var o="string"!==e.callId?e.callId:"",t={e:e,account:account};if(compareGigyaErrorCode(e.errorCode,0))return log("setAccountInfo => Datos de cuenta de usuario enviados","info"),sendDataToNewRelic({eventNameFired:"setAccountInfoSuccess",callId:o}),eventSetAccountInfoCallback.resolve(t),fireEvent("accounts"+eventSeparator+"setAccountInfo",t),a(e);log("setAccountInfo => ERROR ( "+e.errorCode+"): "+e.errorMessage,"error");var i="";void 0!==e.validationErrors&&e.validationErrors&&void 0!==e.validationErrors[0]&&e.validationErrors[0]&&void 0!==e.validationErrors[0].fieldName&&e.validationErrors[0].fieldName&&void 0!==e.validationErrors[0].message&&e.validationErrors[0].message&&(i="setAccountInfo => Error al guardar campo: "+(n=e.validationErrors[0].fieldName)+"; "+e.validationErrors[0].message,r="",r=-1!==n.indexOf("data")?(n=n.replace("data.",""),e.requestParams.data[n]):e.requestParams[n],log(i=i+"; Intentado escribir el valor: "+r,"error"));var n="string"===e.errorMessage&&e.errorMessage?"errorMessage: "+e.errorMessage:"",n=void 0!==e.errorCode?n+" ; errorCode: "+e.errorCode:n;n=void 0!==e.errorDetails?n+" ; errorDetails: "+e.errorDetails:n;var r="string"!==e.errorMessage?e.errorMessage:0;return sendDataToNewRelic({eventNameFired:"setAccountInfoError",errorMessage:n,errorCode:r,callId:o,additionalInformation:i}),eventSetAccountInfoCallback.resolve(t),fireEvent("accounts"+eventSeparator+"setAccountInfo",t),s(e)},e=$.extend(i,{callback:function(e){t(e),safeInvoke(o.callback,e)}});gigya.accounts.setAccountInfo(e)})}function executeNotifyLoginByConditions(){var e,o;"http:"!==window.location.protocol&&(options.userIsInFlow&&!options.userIsInFLowScreenSession||(e=!0===(void 0!==options.enableGigyaITP&&options.enableGigyaITP)?5:2,void 0!==(o=getCookieVocUserInformation("notifyLoginCount"))&&o&&e<=o?getUserInfoActionsUserNotLogged():((o=getCookieVocUid("env"))===options.currentEnvironment||"des"===o&&"pre"===options.currentEnvironment||"pre"===o&&"des"===options.currentEnvironment)&&handleNotifyLoginResponse()))}function executeActionsUserNotLoggedByCookieEnvironment(e){var o=getCookieVocUid("env");(o===options.currentEnvironment||"des"===o&&"pre"===options.currentEnvironment||"pre"===o&&"des"===options.currentEnvironment||void 0===o||!o)&&(void 0!==(o=getCookieVocUid("uid"))&&o||getUserInfoActionsUserNotLogged(e))}function addLoginReloadCountToVocUserInformationCookie(e){var o=void 0!==e&&e?e:1,e=getCookieVocUserInformation("loginReloadCount");return updateFieldInCookieVocUser("loginReloadCount",e=void 0!==e&&e?e+o:1,!0),e}function addNotifyLoginCountToVocUserInformationCookie(e){var o=void 0!==e&&e?e:1,e=getCookieVocUserInformation("notifyLoginCount");return updateFieldInCookieVocUser("notifyLoginCount",e=void 0!==e&&e?e+o:1,!0),e}function updateNotifyLoginFiredFlagToVocUserInformationCookie(e){return updateFieldInCookieVocUser("firedEventNotifyLogin",e,!0)}function handleNotifyLoginResponse(){var e={};if(e.siteUID=getCookieVocUid("uid"),e.UIDSig=getCookieVocUid("uidSignature"),e.UIDTimestamp=getCookieVocUid("signatureTimestamp"),void 0!==e.siteUID&&e.siteUID&&void 0!==e.UIDSig&&e.UIDSig&&void 0!==e.UIDTimestamp&&e.UIDTimestamp){e=notifyLoginITP(e);return e.then(function(e){gigyaResponse=e,updateNotifyLoginFiredFlagToVocUserInformationCookie(!(options.reloadOnLogin=!1)),addNotifyLoginCountToVocUserInformationCookie(1),gigya.socialize.refreshUI({callback:function(e){compareGigyaErrorCode(e.errorCode,0)}})},function(e){getUserInfoActionsUserNotLogged(e),updateNotifyLoginFiredFlagToVocUserInformationCookie(!1),addNotifyLoginCountToVocUserInformationCookie(1)}),e}updateNotifyLoginFiredFlagToVocUserInformationCookie(!1)}function notifyLoginITP(e){return new promiseNamespace(function(o,i){if(e.UID=void 0!==e.siteUID&&e.siteUID?e.siteUID:"",e.UIDSignature=void 0!==e.UIDSig&&e.UIDSig?e.UIDSig:"",e.signatureTimestamp=void 0!==e.UIDTimestamp&&e.UIDTimestamp?e.UIDTimestamp:"",void 0===e.UID||!e.UID||void 0===e.UIDSignature||!e.UIDSignature||void 0===e.signatureTimestamp||!e.signatureTimestamp)return i();timeBeforeCallingNotifyLoginItpEndpoint=window.performance.now(),$.ajax({url:options.authServer+"/api/notifyloginitp",data:{email:e.email,UID:e.UID,UIDSignature:e.UIDSignature,signatureTimestamp:e.signatureTimestamp},type:"POST",async:!0,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){return timeNotifyLoginItpObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint notifyLoginItp."}),void 0!==e&&void 0!==e.statusCode&&200!==e.statusCode?(log("notifyLogin => Usuario no autenticado. ERROR ( "),account=user=null,sendDataToNewRelic({eventNameFired:"socializeNotifyLoginError",errorMessage:e.errorMessage}),i(e)):(log("notifyLogin => Usuario autenticado","info"),sendDataToNewRelic({eventNameFired:"socializeNotifyLoginSuccess",errorMessage:""}),o(e))},error:function(e,o,t){return timeNotifyLoginItpObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint notifyLoginItp."}),log("notifyLogin => Usuario no autenticado. ERROR ( "),account=user=null,sendDataToNewRelic({eventNameFired:"socializeNotifyLoginError",errorMessage:""}),i(e)}}),sendDataToNewRelic({eventNameFired:"socializeNotifyLogin"})})}function notifyLogin(e){return new promiseNamespace(function(n,r){if(e.cid=(void 0!==e.cid&&e.cid?e:options).cid,e.context=void 0!==e.context&&e.context?e.context:getContext(),e.siteUID=void 0!==e.siteUID&&e.siteUID?e.siteUID:"",e.UIDSig=void 0!==e.UIDSig&&e.UIDSig?e.UIDSig:"",e.UIDTimestamp=void 0!==e.UIDTimestamp&&e.UIDTimestamp?e.UIDTimestamp:"",!(void 0!==e.siteUID&&e.siteUID&&void 0!==e.UIDSig&&e.UIDSig&&void 0!==e.UIDTimestamp&&e.UIDTimestamp||void 0!==e.providerSessions))return r();e.callback=function(e){var o=!1,t=void 0!==e.callId&&e.callId?e.callId:"",i="string"===e.errorMessage&&e.errorMessage?"errorMessage: "+e.errorMessage:"",i=void 0!==e.errorCode?i+" ; errorCode: "+e.errorCode:i;return i=void 0!==e.errorDetails?i+" ; errorDetails: "+e.errorDetails:i,compareGigyaErrorCode(e.errorCode,0)?void 0!==e&&e&&void 0!==e.UID&&e.UID&&(o=authenticated=!0):o=!1,o?(log("notifyLogin => Usuario autenticado","info"),sendDataToNewRelic({eventNameFired:"socializeNotifyLoginSuccess",errorMessage:i,callId:t}),n(e)):(log("notifyLogin => Usuario no autenticado. ERROR ( "+e.errorCode+"): "+e.errorMessage,"info"),account=user=null,compareGigyaErrorCode(e.errorCode,0)&&log("notifyLogin => Usuario no autenticado. BUG GIGYA. ERROR ( "+e.errorCode+"): "+e.errorMessage,"error"),sendDataToNewRelic({eventNameFired:"socializeNotifyLoginError",errorMessage:i,callId:t}),r(e))},gigya.socialize.notifyLogin(e),sendDataToNewRelic({eventNameFired:"socializeNotifyLogin"})})}function notifySocialLogin(e){return new promiseNamespace(function(o,i){if(e.media=void 0!==e.media&&e.media?e.media:"",e.UID=void 0!==e.siteUID&&e.siteUID?e.siteUID:"",e.UIDSignature=void 0!==e.UIDSig&&e.UIDSig?e.UIDSig:"",e.signatureTimestamp=void 0!==e.UIDTimestamp&&e.UIDTimestamp?e.UIDTimestamp:"",!(void 0!==e.siteUID&&e.siteUID&&void 0!==e.UIDSig&&e.UIDSig&&void 0!==e.UIDTimestamp&&e.UIDTimestamp||void 0!==e.providerSessions))return i();timeBeforeCallingNotifySocialLoginEndpoint=window.performance.now(),$.ajax({url:options.authServer+"/api/notifysociallogin",data:{media:e.media,providerSessions:e.providerSessions},type:"POST",async:!0,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){return timeNotifySocialLoginObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint notifySocialLogin."}),(200===e.statusCode?o:i)(e)},error:function(e,o,t){return timeNotifySocialLoginObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint notifySocialLogin."}),log("notifyLogin => ERROR ( "),account=user=null,sendDataToNewRelic({eventNameFired:"socializeNotifySocialLoginError",errorMessage:""}),i(e)}}),sendDataToNewRelic({eventNameFired:"socializeNotifySocialLogin"})})}function logoutWithoutActions(e){(e=e||{}).forceProvidersLogout=e.forceProvidersLogout||options.forceProvidersLogout,e.cid=e.cid||options.cid,e.context=e.context||getContext(),options.reloadOnLogout=(void 0!==e.reloadOnLogout?e:options).reloadOnLogout,userClickedLogout=!0;var o={callback:e.callback},t=function(e){log("logout => logout correcto","info"),authenticated=!1,user=null,registerUI()},e=$.extend(e,{callback:function(e){t(e),safeInvoke(o.callback,e)}});sendDataToNewRelic({eventNameFired:"logout",firedEventLogout:!0,callId:"",additionalInformation:"logoutWithoutActions"}),gigya.accounts.logout(e)}function logout(e){(e=e||{}).forceProvidersLogout=e.forceProvidersLogout||options.forceProvidersLogout,e.cid=e.cid||options.cid,e.context=e.context||getContext(),options.reloadOnLogout=(void 0!==e.reloadOnLogout?e:options).reloadOnLogout,userClickedLogout=!0;var o={callback:e.callback},t=function(e){log("logout => logout correcto","info"),authenticated=!1,user=null,registerUI()},e=$.extend(e,{callback:function(e){t(e),safeInvoke(o.callback,e)}});return removeCookies(),sendDataToNewRelic({eventNameFired:"logout",firedEventLogout:!0,callId:""}),removeNfrylCookie(),removeNewslettersCookie(),removeVocUserInformationCookie(),removeSimpleStorage(),removeResendMailVerficationCookie(),removeFromQualifioCookie(),gigya.accounts.logout(e),!1}function resetPassword(e){(e=e||{}).cid=e.cid||options.cid,e.context=e.context||getContext();var o={callback:e.callback},t=function(e){log("resetPassword => reset password correcto","info"),authenticated=!1,user=null,registerUI()},e=$.extend(e,{callback:function(e){t(e),safeInvoke(o.callback,e)}});return cookieNewPasswordExists()||(removeCookies(),removeSimpleStorage(!1),clearFieldReturnUrlInCookieVocUser()),gigya.accounts.resetPassword(e),!1}function finalizeRegistration(e){(e=e||{}).cid=e.cid||options.cid,e.context=e.context||getContext();var o={callback:e.callback},t=function(e){log("finalizeRegistration => correcto","info"),updateLastestBackUrl(void 0===options.extensionType||"ecommerce"!==options.extensionType&&"redencion"!==options.extensionType&&"upgrade"!==options.extensionType&&"regalo"!==options.extensionType?protectedFunctions.getNfrylCookie():protectedFunctions.getExtensionCustomReturnUrl()),redirectOnCallVocUserService(options.backURL,0)},e=$.extend(e,{callback:function(e){t(e),safeInvoke(o.callback,e)}});gigya.accounts.finalizeRegistration(e)}function switchScreen(e){(e=e||{}).cid=e.cid||options.cid,e.context=e.context||getContext();var o={callback:e.callback},t=function(e){log("accounts.switchScreen =>  Cambio Screen correcto","info")},e=$.extend(e,{callback:function(e){t(e),safeInvoke(o.callback,e)}});return gigya.accounts.switchScreen(e),!1}function hideScreenSet(e){(e=e||{}).cid=e.cid||options.cid,e.context=e.context||getContext();var o={callback:e.callback},t=function(e){log("accounts.hideScreenSet =>  Ocultar Screen correcto","info")},e=$.extend(e,{callback:function(e){t(e),safeInvoke(o.callback,e)}});return gigya.accounts.hideScreenSet(e),!1}function resendVerificationCode(e){(e=e||{}).forceProvidersLogout=e.forceProvidersLogout||options.forceProvidersLogout,e.cid=e.cid||options.cid,e.context=e.context||getContext();var o={callback:e.callback},t=function(e){log("accounts.resendVerificationCode => resendVerificationCode correcto","info")},e=$.extend(e,{callback:function(e){t(e),safeInvoke(o.callback,e)}});return gigya.accounts.resendVerificationCode(e),!1}function vocuserLogin(e){(e=e||{}).cid=e.cid||options.cid,e.context=e.context||getContext();var o={callback:e.callback},t=function(e){var o,t;log("accounts.LinkingLogin => LinkingLogin correcto","info"),options.userIsInAppWebviewFlow&&(o="gigya-link-account-screen",compareGigyaErrorCode(e.errorCode,200009)&&void 0!==e&&(manageFormErrors("hide",o),firePromiseUserLogged(),t={eventName:"userlogged",eventData:e},logout(),AppWebview.postMessageToWebkit(t,window.location.href)),compareGigyaErrorCode(e.errorCode,403042)&&void 0!==e.errorDetails&&e.errorDetails&&manageFormErrors("show",o,"Usuario o contraseña incorrectos"),compareGigyaErrorCode(e.errorCode,400002)&&void 0!==e.errorDetails&&e.errorDetails&&manageFormErrors("show",o,"Por favor, introduzca la contraseña"),compareGigyaErrorCode(e.errorCode,403005)&&void 0!==e.errorDetails&&e.errorDetails)},e=$.extend(e,{callback:function(e){t(e),safeInvoke(o.callback,e)}});return gigya.accounts.login(e),!1}function getJWT(e){timeBeforeCallingJwtTokenEndpoint=window.performance.now(),(e=e||{}).cid=e.cid||options.cid,e.context=e.context||getContext(),e.fields="firstName,lastName,nickname,email,UID,photoURL";var o={callback:e.callback},t=function(e){void 0!==e&&void 0!==e.id_token&&0<e.id_token.length&&createCookieTokenJWT(e.id_token),log("accounts.getJWT => Obtenido token de autenticación correctamente","info")},e=$.extend(e,{callback:function(e){timeJwtTokenObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint JwtToken."}),t(e),safeInvoke(o.callback,e)}});gigya.accounts.getJWT(e)}function manageFormErrors(e,o,t){t=void 0!==t?t:"Error";o=$("#"+o+" div.gigya-composite-control-form-error");"show"===e&&0<o.length&&(o.addClass("gigya-error-display-active"),o.children().addClass("gigya-error-msg-active").html(t)),"hide"===e&&0<o.length&&(o.removeClass("gigya-error-display-active"),o.children().removeClass("gigya-error-msg-active"))}function removeSimpleStorage(e){var o=void 0===e||e,e=account;void 0!==e&&e||(e=user),void 0!==simpleStorageDependency&&simpleStorageDependency&&(void 0!==e&&e&&void 0!==e.UID&&e.UID&&(simpleStorageDependency.set("products."+e.UID,""),simpleStorageDependency.set("trials."+e.UID,""),simpleStorageDependency.deleteKey("products."+e.UID),simpleStorageDependency.deleteKey("trials."+e.UID)),simpleStorageDependency.set("busSynchronizeFlushed",""),simpleStorageDependency.set("busSynchronizeFirstCall",""),simpleStorageDependency.set("listRegisteredFlushed",""),simpleStorageDependency.set("verifyUniqueNicknameFlushed",""),simpleStorageDependency.set("user.regToken",""),simpleStorageDependency.deleteKey("busSynchronizeFlushed"),simpleStorageDependency.deleteKey("busSynchronizeFirstCall",""),simpleStorageDependency.deleteKey("listRegisteredFlushed"),simpleStorageDependency.deleteKey("verifyUniqueNicknameFlushed"),simpleStorageDependency.deleteKey("user.regToken"),o&&(simpleStorageDependency.set("user.email",""),simpleStorageDependency.set("profile.loginID",""),simpleStorageDependency.deleteKey("user.email"),simpleStorageDependency.deleteKey("profile.loginID")))}function socialLogin(e){log("socialLogin => ("+e.provider+") llamado ...","info"),e.provider=e.provider||"no provider",e.cid=e.cid||options.cid,e.context=e.context||getContext();var o={callback:e.callback},t=function(o){setTimeout(function(){for(var e=0;e<flows.length;e++)safeInvoke(flows[e].screenSetHandlers.onSocialLoginHandler,o)},250)},e=$.extend(e,{callback:function(e){t(e),safeInvoke(o.callback,e)}});return gigya.accounts.socialLogin(e),!1}function screenSetIsBanned(e){var o=!1;if(void 0!==e&&e&&"undefined"!==options.bannedScreenSets&&options.bannedScreenSets&&options.bannedScreenSets.length)for(var t=options.bannedScreenSets.length,i=0;e===options.bannedScreenSets[i]&&(o=!0),(i+=1)<t&&!1===o;);return o}function onScreenSubmitScrollToFirstError(){$(".gigya-input-submit").click(function(){setTimeout(function(){var e,o,t=$('[class*="gigya-error-code"]:first');void 0!==t&&t&&t.length&&(o=0,o=t.offset().top-(e=void(e=0)!==(t=$("#header")).offset&&t.offset()&&void 0!==t.offset().top?t.offset().top:e)-1,void 0!==(t=void 0===(t=$('[class*="gigya-error-code"]:first').prevAll("input"))||!t||t.length<=0?$('[class*="gigya-error-code"]:first').prevAll().find("input"):t)&&t&&t.length&&(o=t.offset().top-e-1),$("html, body").animate({scrollTop:o},200),void 0!==(o=$("form:visible input[type=submit]"))&&o&&o.length&&o.val("Corrige los errores"))},100)})}function setButtonMessage(e,o,t,i){o=void 0!==o&&o,t=void 0===t||t,i=void 0!==i&&i;var n,r="";void 0!==(e=void 0!==e&&e)&&e&&void 0!==o&&o?(n=protectedFunctions.findFieldInScreen(e,o))&&(r=n.parents("form:visible").find("input[type=submit]")):e||o||(r=$("form:visible input[type=submit]")),void 0!==r&&r&&""!==r&&(t?r.val("Corrige los errores"):(t="Cambiar Contrase"+userUtils.UnicodeToChar("n")+"a",i&&(t=i),r.val(t)))}function hideError(e,o){$(e).removeClass("gigya-error"),$(e).removeClass("gigya-error-msg gigya-error-msg-active"),$(o).html("").hide()}function onScreenSubmitChangeSubmitButtonText(o){setTimeout(function(){var e=$('[class*="gigya-error-code"]');if(0===e.length)switch(o.screen){case options.screenName.login:setButtonMessage(!1,!1,!1,"Inicia sesi"+userUtils.UnicodeToChar("o")+"n");break;case options.screenName.formulario:setButtonMessage(!1,!1,!1,"Registrarme");break;case options.screenName.additionalData:$("form:visible").find(".gigya-error").removeClass("gigya-error"),setButtonMessage(!1,!1,!1,"Completar informaci"+userUtils.UnicodeToChar("o")+"n")}0<e.length&&setButtonMessage(),o.screen!==options.screenName.cambiar||o.isValid?o.screen===options.screenName.cambiar&&o.isValid&&setButtonMessage(o.field,o,!1):setButtonMessage(o.field,o),o.screen===options.screenName.reenviar&&o.isValid&&(hideError("#"+o.screen+' input[name="email"]',"#"+o.screen+' span[data-bound-to="email"]'),setButtonMessage(o.field,o,!1,"Reenviar email"))},100)}function showAllErrorsOnFieldTab(){setTimeout(function(){var e=$('[class*="gigya-error-code"]');void 0!==e&&e&&e.length&&e.show()},100)}function validateZipNumberAndGetData(e){var o=!1;return o=void 0!==e&&e?$.ajax({url:options.urlPostalCode,data:{filters:"ge_codpostal:"+e,output:"ge_municipio,ge_provincia,ge_localidad"},contentType:"application/json",dataType:"jsonp",success:function(e){},error:function(e){}}):o}function addDataValidation(e){void 0!==e&&e&&(dataValidationZipObject=e)}function dataValidation(){return dataValidationZipObject}function showScreenSet(e){log("showScreenSet => ("+e.startScreen+") llamado ...","info"),e.cid=e.cid||options.cid,e.context=e.context||getContext();var o={onError:e.onError,onBeforeScreenLoad:e.onBeforeScreenLoad,onAfterScreenLoad:e.onAfterScreenLoad,onFieldChanged:e.onFieldChanged,onBeforeSubmit:e.onBeforeSubmit,onAfterSubmit:e.onAfterSubmit,onHide:e.onHide,onBeforeValidation:e.onBeforeValidation},t=function(e){var o="errorCode: "+e.response.errorCode+" errorMessage: "+e.response.errorMessage;sendDataToNewRelic({eventNameFired:"onError",additionalInformation:"onError, gigyaScreen: "+e.screen,errorMessage:o}),void 0!==e.screen&&$("form."+e.form+":visible #vocento-error-msg").html(translateError(e));for(var t=0;t<flows.length;t++)safeInvoke(flows[t].screenSetHandlers.onErrorHandler,e);fireEvent("showScreenSet"+eventSeparator+"onError",e)},i=function(e){!0===options.captcha.isVisible&&($(".pls-container").remove(),captcha=void 0,$("#g-recaptcha").hide(),$("#g-recaptcha-login").hide(),loginAttemps=0);for(var o=0;o<flows.length;o++)if(!1===safeInvoke(flows[o].screenSetHandlers.onBeforeScreenLoadHandler,e))return fireEvent("showScreenSet"+eventSeparator+"onBeforeScreenLoad",e),!1;fireEvent("showScreenSet"+eventSeparator+"onBeforeScreenLoad",e)},n=function(e){options.userIsInFlow||void 0!==(o=document.getElementById("sign-in-button"))&&0<o.length&&o.addEventListener("signInSuccess",function(e){console.log("HA llegado el evento de login al flujo !!!")},!1),options.userIsInAppWebviewFlow&&(AppWebview.postMessageToWebkit({eventName:"userdataready",eventData:"userdataready"},window.location.href),options.screenName.formulario!==e.currentScreen&&options.screenName.login!==e.currentScreen||AppWebview.insertSocialNetworkWidget(e.currentScreen)),options.screenName.formulario!==e.currentScreen&&options.screenName.login!==e.currentScreen&&options.screenName.additionalData!==e.currentScreen||removeNewPasswordCookie(),!0===options.captcha.isVisible&&("gigya-register-screen"!==e.currentScreen&&"gigya-quick-register-screen"!==e.currentScreen||($("#g-recaptcha").show(),captcha=grecaptcha.render("g-recaptcha",{sitekey:"6LdmZgYTAAAAADQC06sXwn22WX7n0s4Nc1cuj-v7",callback:captchaVerifyCallback})));var o=$("input[placeholder]:visible");void 0!==o&&o&&void 0!==o.placeholder&&o.placeholder&&$("input[placeholder]:visible").placeholder(),(options.screenName.additionalData===e.currentScreen||options.screenName.formulario===e.currentScreen||options.screenName.completo===e.currentScreen)&&0<options.sectionsWithExternalFields.length&&initExtraDataOnChange();for(var t=0;t<flows.length;t++){flows[t].getInsertCustomField().externalFieldsSection;safeInvoke(flows[t].screenSetHandlers.onAfterScreenLoadHandler,e)}fireEvent("showScreenSet"+eventSeparator+"onAfterScreenLoad",e),e.currentScreen===options.screenName.autologin&&eventLastActionBeforeRedirect.resolve()},r=function(e){for(var o=0;o<flows.length;o++)safeInvoke(flows[o].screenSetHandlers.onFieldChangedHandler,e);fireEvent("showScreenSet"+eventSeparator+"onFieldChanged",e)},a=function(o){0<options.sectionsWithExternalFields.length&&$.each(options.sectionsWithExternalFields,function(e,o){o=$("form:visible [vocento-name="+o+"]");userUtils.customValidation.validateField(o)}),"gigya-register-screen"===o.screen&&"undefined"!==o.formData.email&&o.formData.email&&validateEmailForRegistration(o).then(function(e){void 0!==e&&void 0!==e.statusCode&&200===e.statusCode&&userUtils.customValidation.showEmailErrorForRegistration(e)&&(scrollScreenToElementPosition("email",o),simpleStorageDependency.set("user.email",o.formData.email,{TTL:3e5}))});for(var e=0;e<flows.length;e++)safeInvoke(flows[e].screenSetHandlers.onBeforeValidationHandler,o);fireEvent("showScreenSet"+eventSeparator+"onBeforeValidation",o)},s=function(e){var o=$("form."+e.form+":visible input[type=submit]");if(void 0===o.data("originalValue")&&o.data("originalValue",o.val()),o.val("Validando datos"),e.form&&(userUtils.customValidation.setUser(user),userUtils.customValidation.setAccount(account),log("screenSetHandlers => Validando formulario "+e.screen+" -> "+e.form,"info"),!1===userUtils.customValidation.validateForm(e.form,captcha)))return fireEvent("showScreenSet"+eventSeparator+"onBeforeSubmit",e),!1;setSeccionesDeCamposExternos();for(var t=0;t<flows.length;t++)if(!1===safeInvoke(flows[t].screenSetHandlers.onBeforeSubmitHandler,e))return fireEvent("showScreenSet"+eventSeparator+"onBeforeSubmit",e),!1;sendDataToNewRelic({eventNameFired:"onBeforeSubmit",firedEventOnBeforeSubmit:!0,additionalInformation:"gigyaScreen: "+e.screen,callId:""}),fireEvent("showScreenSet"+eventSeparator+"onBeforeSubmit",e)},c=function(t){if(sendLoginEventToNewRelicOnGigyaResponse(t.response),compareGigyaErrorCode(t.response.errorCode,"500026")){var e="errorCode: "+t.response.errorCode+" errorMessage: "+t.response.errorMessage;sendDataToNewRelic({eventNameFired:"networkError",additionalInformation:"onAfterSubmit, gigyaScreen: "+t.screen,errorMessage:e})}else{(compareGigyaErrorCode(t.response.errorCode,"206002")||compareGigyaErrorCode(t.response.errorCode,0))&&(options.screenName.additionalData===t.screen||options.screenName.formulario===t.screen||options.screenName.completo===t.screen)&&0<options.sectionsWithExternalFields.length&&0<options.sectionsWithExternalFields[0].fields.length&&(i=options.sectionsWithExternalFields[0].fields,createNewExtraUserData(getUidUsuarioGigya(t),t.response.UIDSignature,t.response.signatureTimestamp,t.response.profile.email,i,options.serviceReference)),compareGigyaErrorCode(t.response.errorCode,0)&&(("gigya-login-screen"===t.screen||void 0!==t.form&&t.form&&"div.gigya-social-login"===t.form)&&(getCustomerServiceFromCookieAndUpdateOptions()&&sendCustomerService(options.serviceId,options.serviceReference),removeSimpleStorage()),updateFieldInCookieVocUser("flagGoogleLoginOk",!0,!0)),!0===options.captcha.isVisible&&("gigya-login-screen"===t.screen&&"FAIL"===t.response.status?(loginAttemps+=1)>=options.captcha.loginAttemps&&(void 0===captcha?($("#g-recaptcha-login").show(),captcha=grecaptcha.render("g-recaptcha-login",{sitekey:"6LdmZgYTAAAAADQC06sXwn22WX7n0s4Nc1cuj-v7",callback:captchaVerifyCallback})):(-1<browser.toLowerCase().indexOf("firefox")?resetCaptchaFirefox("g-recaptcha-login"):grecaptcha.reset(captcha),$("#vocento-error-captcha-msg").hide())):"gigya-register-screen"!==t.screen&&"gigya-quick-register-screen"!==t.screen||"FAIL"!==t.response.status||(-1<browser.toLowerCase().indexOf("firefox")?resetCaptchaFirefox("g-recaptcha"):grecaptcha.reset(captcha),$("#vocento-error-captcha-msg").hide())),t.screen===options.screenName.registration&&options.autoVerifyUser&&(compareGigyaErrorCode(t.response.errorCode,"206002")||compareGigyaErrorCode(t.response.errorCode,"0"))&&verifyUserByUid(t.response.UID).done(function(e){var o;options.loginOnVerify&&(void 0!==options.userIsInAppWebviewFlow&&options.userIsInAppWebviewFlow?(showLoadingSpinner(),void 0!==t&&t&&void 0!==t.response&&t.response&&((o={}).siteUID=t.response.UID,o.UIDSig=t.response.UIDSignature,o.UIDTimestamp=t.response.signatureTimestamp,o.email=t.response.profile.email,notifyLoginAppWebView(o))):notifyLoginUser(t).then(function(e){var o={},t={eventData:{}};try{var i=JSON.parse(e.data);void 0!==i&&i&&200===i.statusCode&&(void 0!==account&&account||(account=i),void 0!==user&&user||(user=i),createCookies(i,!1)),o.UID=i.UID,o.UIDSignature=i.UIDSignature,o.signatureTimestamp=i.signatureTimestamp,t.eventData.UID=i.UID,t.eventData.UIDSignature=i.UIDSignature,t.eventData.signatureTimestamp=i.signatureTimestamp}catch(e){}firePromiseUserLogged(t),eventLastActionBeforeRedirect.resolve()}))}).fail(function(e){options.loginOnVerify&&(notifyLoginUser(t),eventLastActionBeforeRedirect.resolve())});for(var o=0;o<flows.length;o++)safeInvoke(flows[o].screenSetHandlers.onAfterSubmitHandler,t);if(!0===options.updateSelligentCommunications&&""===options.envVoccore&&("gigya-register-screen"===t.screen||"gigya-complete-registration-screen"===t.screen)&&(compareGigyaErrorCode(t.response.errorCode,"206002")||compareGigyaErrorCode(t.response.errorCode,0))){var e=options.authServerVocCore+"/vocuser/v1/user/communication/selligent/add",i={UID:t.response.UID,data:{communications:t.response.data.communications}};try{$.ajax({url:e,type:"POST",data:JSON.stringify(i),async:!0,dataType:"json",success:function(e){log("updateSelligentCommunications => comunicaciones grabadas correctamente.","info")},error:function(e){log("updateSelligentCommunications => error al grabar las comunicaciones.","error")}})}catch(e){}}fireEvent("showScreenSet"+eventSeparator+"onAfterSubmit",t),t.screen===options.screenName.registration&&options.autoVerifyUser&&options.loginOnVerify||eventLastActionBeforeRedirect.resolve()}},d=function(e){(options.popUpMode||options.popUpModeProfile)&&userUtils.insertCustomFields.removeHTML();for(var o=0;o<flows.length;o++)safeInvoke(flows[o].screenSetHandlers.onHideHandler,e);protectedFunctions.removeParentDiv("gigya-screen-dialog","",options.parentDivClass),fireEvent("showScreenSet"+eventSeparator+"onHide",e)},l={onError:function(e){t(e),safeInvoke(o.onError,e)},onBeforeScreenLoad:function(e){if(!1===i(e)||!1===safeInvoke(o.onBeforeScreenLoad,e))return!1},onAfterScreenLoad:function(e){n(e),safeInvoke(o.onAfterScreenLoad,e)},onFieldChanged:function(e){r(e),safeInvoke(o.onFieldChanged,e)},onBeforeSubmit:function(e){if(!1===s(e)||!1===safeInvoke(o.onBeforeSubmit,e))return!1},onBeforeValidation:function(e){a(e),safeInvoke(o.onBeforeValidation,e)},onAfterSubmit:function(e){c(e),safeInvoke(o.onAfterSubmit,e)},onHide:function(e){d(e),safeInvoke(o.onHide,e)}},u=screenSetIsBanned(e.screenSet);return void 0!==u&&!0===u||(setTimeBeforeCallingRenderScreenSets(window.performance.now()),l=$.extend(e,l),gigya.accounts.showScreenSet(l)),!1}function showScreen(e,o,t){var i=options.screenSet[options.screenSetTypeToShow].auth,n=options.screenSet[options.screenSetTypeToShowMobile].auth;void 0!==o&&o&&(i=o),void 0!==t&&t&&(n=t);t=$("#vocento-vocuser-screen-container");void 0!==t&&t&&t.length&&isAppWebView()&&t.addClass("voc-user-app"),showScreenSet({screenSet:i,mobileScreenSet:n,startScreen:e,containerID:options.containerID})}function getNewslettersFieldsChecked(){var t,i=!1,e=$('form:visible [vocento-name^="newsletter-"]').get();return 0<e.length&&$.each(e,function(e,o){o=$(o);o&&o.is(":checked")&&(t=o.attr("vocento-name").replace("newsletter-",""))&&""!==t&&(setNewslettersChecksBox(t),i=!0)}),i}function getNLfromGUI(){var i=[],e=$('form:visible [vocento-name^="newsletter-"]').get();return 0<e.length&&$.each(e,function(e,o){var t=$(o);t&&0<t.length&&(o=t.attr("vocento-name").replace("newsletter-",""),t.is(":checked")?i.push({NL_ID:o,state:"subscribe"}):i.push({NL_ID:o,state:"unsubscribe"}))}),i}function getSectionsWithExternalFields(){return options.sectionsWithExternalFields}function setSeccionesDeCamposExternos(){options.sectionsWithExternalFields=[];for(var e=0;e<flows.length;e++){var o=flows[e].getInsertCustomField().externalFieldsSection;if(void 0!==o)for(var t in o){for(var i=o[t],n={name:t,fields:[]},r=0;r<i.length;r++){var a={field:i[r],value:$("form:visible [vocento-name="+i[r]+"]").val()};a.value&&void 0!==a.value&&n.fields.push(a)}options.sectionsWithExternalFields.push(n)}}}function getUidUsuarioGigya(e){var o=null;return void 0!==e.response.UID?o=e.response.UID:user&&void 0!==user.UID&&(o=user.UID),o}function serviceCall(p,e){var g=void 0!==e&&e?e:{},v=void 0!==g.timeout&&g.timeout?g.timeout:3e3;return promiseWithTimeout(new promiseNamespace(function(o,t){var i=void 0!==g.url&&g.url?g.url:"",e=void 0!==g.type&&g.type?g.type:"POST",n=void 0===g.async||g.async,r=void 0!==g.dataType?g.dataType:"json",a=void 0!==g.acceptHeader?g.acceptHeader:"application/json,text/javascript,text/plain,*/*",s=void 0!==g.contentType?g.contentType:"application/json;charset=utf-8",c=void 0!==g.withCredentials&&g.withCredentials,d=void 0!==g.headerAuth?g.headerAuth:"",l=void 0!==g.preventRedirect?g.preventRedirect:"";if(void 0===i||!i)return t(new TypeError("serviceCall: bad parameter value: url"));var u=new XMLHttpRequest;u.onerror=t,u.onreadystatechange=function(){if(4===u.readyState){if(200!==(e=u.status))return log("The request for "+i+" returned status code: "+e,"warn"),t();var e=void 0!==u.response&&u.response?u.response:{};return"object"==typeof e&&void 0!==u.responseURL&&u.responseURL&&(e.responseURL=u.responseURL),"object"!=typeof e||void 0===u.responseType||""!==u.responseType&&"text"!==u.responseType||void 0!==u.responseText&&u.responseText&&(e.responseText=u.responseText),o(e)}},u.ontimeout=function(){return log("The request for "+i+" timed out more than: "+v+" seconds","warn"),t()},u.open(e,i,n),null!=c&&(u.withCredentials=c),!0===n&&(u.timeout=v,void 0!==s&&s&&u.setRequestHeader("Content-Type",s),void 0!==r&&r&&("json"===(u.responseType=r)&&u.setRequestHeader("Accept","application/json,text/javascript,text/plain,*/*"),"text"===r&&u.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9")),void 0!==a&&a&&u.setRequestHeader("Accept",a)),d&&u.setRequestHeader("Authorization",d);try{l&&u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.send(p)}catch(e){return log("The request for "+i+" returned error: "+e,"error"),o()}}),v)}function getAuthServerSubDomainByProject(e){var o="";return o=void 0!==e&&e&&void 0!==vocServicesSubdomain[e]&&vocServicesSubdomain[e]?vocServicesSubdomain[e]:o}function getAuthServerEnvironmentPrefixByProject(e){var o="";return o=void 0!==e&&e&&void 0!==vocServicesEnvironmentPrefix[e]&&vocServicesEnvironmentPrefix[e]&&void 0!==vocServicesEnvironmentPrefix[e][options.currentEnvironment]&&vocServicesEnvironmentPrefix[e][options.currentEnvironment]?vocServicesEnvironmentPrefix[e][options.currentEnvironment]:o}function getHeaderAuthByProjectEnvironmentMedium(e,o){var t="";return void 0!==e&&e&&void 0!==o&&o&&void 0!==vocServicesHeaderAuth[e]&&vocServicesHeaderAuth[e]&&void 0!==vocServicesHeaderAuth[e][options.currentEnvironment]&&vocServicesHeaderAuth[e][options.currentEnvironment]&&void 0!==vocServicesHeaderAuth[e][options.currentEnvironment][o]&&vocServicesHeaderAuth[e][options.currentEnvironment][o]?vocServicesHeaderAuth[e][options.currentEnvironment][o]:t}function getAuthServerSeparatorByProject(e){var o="";return o=void 0!==e&&e&&void 0!==vocServicesPrefix[e][options.currentEnvironment]&&vocServicesPrefix[e][options.currentEnvironment]?vocServicesPrefix[e][options.currentEnvironment]:o}function buildAuthServerUrl(e){var o,t,i,n,r,a="";return void 0!==e&&e&&void 0!==e.serviceProject&&e.serviceProject&&void 0!==e.servicePath&&e.servicePath&&(o=getAuthServerEnvironmentPrefixByProject(e.serviceProject),t=getAuthServerSubDomainByProject(e.serviceProject),i=getAuthServerSeparatorByProject(e.serviceProject),r="",r=void 0!==e.authServer&&e.authServer?1<(n=e.authServer.split("/")).length&&void 0!==n[2]&&n[2]?getDomainTld(n[2]):getDomainTld(e.authServer):getDomainTld(window.location.href),a="https://"+o+i+t+"."+(r=void 0!==e.domainTld&&e.domainTld&&r?e.domainTld:r)+e.servicePath),a}function callVocUserService(e,o){var t=void 0!==o&&o?o:{},o=void 0!==t.servicePath&&t.servicePath?t.servicePath:"";return t.authServer=void 0!==t.authServer&&t.authServer?t.authServer:"",void 0!==o&&o?(t.url=buildAuthServerUrl(t),serviceCall(e,t)):new promiseNamespace(function(e,o){return o(new TypeError("callVocUserService: bad parameter value: servicePath"))})}function callServiceMediaDataTransfer(e,o){if(void 0===e||!e)return new promiseNamespace(function(e,o){return o(new TypeError("callServiceMediaDataTransfer: bad parameter value: data"))});e=JSON.stringify(e);var t=void 0!==o&&o?o:{},o={type:"POST",async:!0,dataType:"json",withCredentials:!0,serviceProject:"media-data-transfer-service",serviceName:"data-transfer"};return o.servicePath=options.vocServicesPath[o.serviceProject][o.serviceName].POST,o=$.extend(!0,o,t),timeBeforeCallingMediaDataTransferEndpoint=window.performance.now(),callVocUserService(e,o)}function getUserEmail(){return void 0!==account&&account&&void 0!==account.profile&&account.profile&&void 0!==account.profile.email&&account.profile.email?account.profile.email:void 0!==user&&user&&void 0!==user.email&&user.email?user.email:""}function buildUrlParamsForServiceEkosTechnicalSynchronized(){var e=getUserEmail(),o=""!==e?"&email="+e:"",e=getUserSignature(account,!1);return"?gigyaUUID="+e.UID+"&uidSignature="+encodeURIComponent(e.UIDSignature)+"&signatureTimestamp="+e.signatureTimestamp+o+"&evolokId="+e.evolokId}function callServiceEkosTechnicalSynchronized(e,o){if(void 0===e||!e)return new promiseNamespace(function(e,o){return o(new TypeError("callServiceEkosTechnicalSynchronized: bad parameter value: data"))});e=JSON.stringify(e);var t=void 0!==o&&o?o:{},i={type:"GET",async:!0,dataType:"json",withCredentials:!1},o=getDomainForSsoGroup(options.ssoGroup);return i.urlParams=buildUrlParamsForServiceEkosTechnicalSynchronized(),i.authServer="vocento.com",i.domainTld="",i.serviceProject="ekos-technical-synchronized",i.serviceName="ekos-technical-synchronized-product",i.servicePath=options.vocServicesPath[i.serviceProject][i.serviceName].GET,i.servicePath+=i.urlParams,i.timeout=15e3,i.headerAuth="Bearer "+getHeaderAuthByProjectEnvironmentMedium(i.serviceProject,o),callVocUserService(e,i=$.extend(!0,i,t))}function sendRequestToServiceEkosTechnicalSynchronized(e){if(void 0===options.serviceCallEkosTechnicalSynchronized||!options.serviceCallEkosTechnicalSynchronized)return new promiseNamespace(function(e,o){return o(new Error("sendRequestToServiceEkosTechnicalSynchronized: parameter not enabled: options.serviceCallEkosTechnicalSynchronized"))});return callServiceEkosTechnicalSynchronized({},e)}function handleResponseServiceEkosTechnicalSynchronized(e){void 0!==e&&e&&e.then(function(e){userTypeEkos=assignUserTypeFromEkosResponse(e),handleSynchronizeProductsSuccess(transformProductsToBus1Format(e),"")},function(e){handleSynchronizeProductsError(e,"","Error en la llamada ajax a BUS2.0 ServiceEkosTechnicalSynchronized")})}function assignUserTypeFromEkosResponse(e){return void 0!==e&&e&&void 0!==e.data&&e.data&&void 0!==e.data.userType&&e.data.userType?e.data.userType.toLowerCase():""}function transformProductsToBus1Format(e){if(void 0===e||!e||void 0===e.data||!e.data||void 0===e.data.products||!e.data.products)return{};var o={};return o.data=e.data.products,o}function getAllCookiesOriginalContent(){var e={cookies:[]},o="";void 0!==(o=getCookieOriginalContent(QUEID_COOKIE_NAME))&&o&&e.cookies.push({name:QUEID_COOKIE_NAME,value:o});return void 0!==(o=getCookieOriginalContent(UID_COOKIE_NAME))&&o&&e.cookies.push({name:UID_COOKIE_NAME,value:o}),void 0!==(o=getCookieOriginalContent(EDITION_COOKIE_NAME))&&o&&e.cookies.push({name:EDITION_COOKIE_NAME,value:o}),void 0!==(o=getCookieOriginalContent(NFRYL_COOKIE_NAME))&&o&&e.cookies.push({name:NFRYL_COOKIE_NAME,value:o}),void 0!==(o=getCookieOriginalContent(NEWSLETTERS_COOKIE_NAME))&&o&&e.cookies.push({name:NEWSLETTERS_COOKIE_NAME,value:o}),void 0!==(o=getCookieOriginalContent(VOCUSER_COOKIE_NAME))&&o&&e.cookies.push({name:VOCUSER_COOKIE_NAME,value:o}),void 0!==(o=getCookieOriginalContent(VOCUSER_THANKYOU_COOKIE_NAME))&&o&&e.cookies.push({name:VOCUSER_THANKYOU_COOKIE_NAME,value:o}),void 0!==(o=getCookieOriginalContent(AUTO_NEWSLETTERS_COOKIE_NAME))&&o&&e.cookies.push({name:AUTO_NEWSLETTERS_COOKIE_NAME,value:o}),void 0!==(o=getCookieOriginalContent(EVK_COOKIE_NAME+gigya.partnerSettings.ssoKey))&&o&&e.cookies.push({name:EVK_COOKIE_NAME+gigya.partnerSettings.ssoKey,value:o}),e.cookies=getEcommerceCookiesOriginalContent(e.cookies),e}function sendRequestToServiceMediaDataTransfer(e){return void 0!==e&&e||new promiseNamespace(function(e,o){return o(new TypeError("sendRequestToServiceMediaDataTransfer: bad parameter value: parameters"))}),options.serviceCallToMediaDataTransfer||new promiseNamespace(function(e,o){return o(new Error("sendRequestToServiceMediaDataTransfer: parameter not enabled: options.serviceCallToMediaDataTransfer"))}),callServiceMediaDataTransfer(getAllCookiesOriginalContent(),e)}function handleRedirectOnResponseCallToVocUserService(e,o,t){var i;void 0!==e&&e&&(i=function(){redirectToUrl(o,t)},e.then(function(){timeMediaDataTransferObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint media-data-transfer."}),i()},function(e){timeMediaDataTransferObtained=window.performance.now(),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber llamado al endpoint media-data-transfer."}),i()}))}function redirectOnCallVocUserService(e,o){var t,i,n=!1,r=void 0!==o?o:0;return void 0!==e&&e&&("/"!==e?(t=!1,getDomainTld(window.location.href.split("/")[2])!==(i=1<(i=e.split("/")).length&&void 0!==i[2]&&i[2]?getDomainTld(i[2]):getDomainTld(i))&&(r=void 0!==o&&o&&0!==o?r:400,(o={}).authServer=e,t=sendRequestToServiceMediaDataTransfer(o)),"object"!=typeof t?n=redirectToUrl(e,r):handleRedirectOnResponseCallToVocUserService(t,e,r)):n=redirectToUrl(e,r)),n}function getRootUrl(){var e="https:",o=window.location.host,t=options.domains[options.ssoGroup];return 0===window.location.pathname.indexOf("/app_dev.php/")?e+"//"+o+"/app_dev.php":0===window.location.pathname.indexOf("/app.php/")?e+"//"+o+"/app.php":-1<o.indexOf("srv.vocento.in")?e+"//"+o:e+"//"+options.envFront+"."+t}function getUrlRegisterConfirmationScreen(){return getRootUrl()+options.route.registerConfirmedURL}function getUrlRegisterPendingConfirmationScreen(){return getRootUrl()+options.route.resendMailURL}function getUrlPasswdSendScreen(){return getRootUrl()+options.route.sendedMailURL}function getUrlPasswordChangedScreen(){return getRootUrl()+options.route.passwdchangedURL}function getUrlExpiredPasswordTokenScreen(){return getRootUrl()+options.route.changePasswdURL+"?errorCode=400006"}function getUrlSetPassword(){return getRootUrl()+options.route.setPasswdURL}function getUrlPasswordSeted(){return getRootUrl()+options.route.passwdSetedURL}function getUrlProfileScreen(){return getRootUrl()+options.route.profileURL}function getUrlInterestsScreen(){return getRootUrl()+options.route.interestURL}function getUrlProfileUpdatedScreen(){return getRootUrl()+options.route.profileUpdatedURL}function getUrlAdditionalDataScreen(){return getRootUrl()+options.route.loginAdditionalDataURL}function addParameterToUrl(e,o,t){if(void 0===e||void 0===t)return t;var i=getQueryVariable(e);return t=null==i?-1<t.indexOf("?")?t+"&"+e+"="+o:t+"?"+e+"="+o:t}function showLoginPage(e){isAppWebView()&&(e+=void 0!==e&&e?"&device=appwebview":"?device=appwebview"),redirectOnCallVocUserService(getRootUrl()+options.route.loginURL+e)}function showLoginAdditionalDataPage(){var e="";isAppWebView()&&(e+=void 0!==e&&e?"&device=appwebview":"?device=appwebview"),redirectOnCallVocUserService(getRootUrl()+options.route.loginAdditionalDataURL+e)}function showRegisterPage(e){isAppWebView()&&(e+=void 0!==e&&e?"&device=appwebview":"?device=appwebview"),redirectOnCallVocUserService(getRootUrl()+options.route.registerURL+e)}function showRecoveryPage(e){void 0===e&&(e="");isAppWebView()&&(e+=void 0!==e&&e?"&device=appwebview":"?device=appwebview"),redirectOnCallVocUserService(getRootUrl()+options.route.recoveryURL+e)}function showProfilePage(e){isAppWebView()&&(e+=void 0!==e&&e?"&device=appwebview":"?device=appwebview"),redirectOnCallVocUserService(getRootUrl()+options.route.profileURL+e)}function showInterestsPage(){var e="";isAppWebView()&&(e+=void 0!==e&&e?"&device=appwebview":"?device=appwebview"),redirectOnCallVocUserService(getRootUrl()+options.route.interestURL+e)}function showProfileUpdatedPage(){var e="";isAppWebView()&&(e+=void 0!==e&&e?"&device=appwebview":"?device=appwebview"),redirectOnCallVocUserService(getRootUrl()+options.route.profileUpdatedURL+e)}function showChangePasswdProfilePage(){var e="";isAppWebView()&&(e+=void 0!==e&&e?"&device=appwebview":"?device=appwebview"),redirectOnCallVocUserService(getRootUrl()+options.route.changePasswdProfileURL+e)}function redirectToProfileAreaPersonal(){redirectOnCallVocUserService(urlAreaPersonal+"/gestion/mi-cuenta.html")}function showBackPageForBackLink(){updateLastestBackUrl(void 0===options.extensionType||"ecommerce"!==options.extensionType&&"redencion"!==options.extensionType&&"upgrade"!==options.extensionType&&"regalo"!==options.extensionType?protectedFunctions.getNfrylCookie():protectedFunctions.getExtensionCustomReturnUrl()),void 0!==options.backURL&&options.backURL&&(removeNfrylCookie(),removeFromQualifioCookie(),removeNewPasswordCookie(),redirectOnCallVocUserService(options.backURL))}function selectPopUpMode(e){var o=options.popUpMode;return o=void 0!==e?e:o}function showLogin(e,o,t,i){var n="";void 0!==e&&"object"==typeof e&&void 0!==e.urlParams?n=e.urlParams:(i=t,t=o,o=e);var e=selectPopUpMode(t),t=options.screenName.login;return void 0!==i&&i&&(t=i),void 0===e||!0===e?showScreenSet({screenSet:options.screenSet[options.screenSetTypeToShow].auth,mobileScreenSet:options.screenSet[options.screenSetTypeToShowMobile].auth,startScreen:t,containerID:o="string"!=typeof o?"":o}):void 0!==options.enableGigyaITP&&options.enableGigyaITP?(t=getQueryVariable("gig_ssoToken"),o=getCurrentScreenName(),options.userIsInFlow&&o===options.screenName.registration&&void 0!==t&&t?showLoginPage("?gig_ssoToken="+t):redirectToGigyaCentralLoginPage("fromLoginClick")):showLoginPage(n),!1}function showRegistration(e,o,t,i){var n="";void 0!==e&&"object"==typeof e&&void 0!==e.urlParams?n=e.urlParams:(i=t,t=o,o=e);e=selectPopUpMode(t),t=options.screenName.registration;return void 0!==i&&i&&(t=i),void 0===e||!0===e?showScreenSet({screenSet:options.screenSet[options.screenSetTypeToShow].auth,mobileScreenSet:options.screenSet[options.screenSetTypeToShowMobile].auth,startScreen:t,containerID:o="string"!=typeof o?"":o}):void 0!==options.enableGigyaITP&&options.enableGigyaITP?redirectItpToRegisterWithToken("fromRegisterClick"):showRegisterPage(n),!1}function showProfile(e,o,t,i){var n="";void 0!==e&&"object"==typeof e&&void 0!==e.urlParams?n=e.urlParams:(i=t,t=o,o=e);e=selectPopUpMode(t),t=options.screenName.profile;return void 0!==i&&i&&(t=i),void 0===e||!0===e?showScreenSet({screenSet:options.screenSet[options.screenSetTypeToShow].profile,mobileScreenSet:options.screenSet[options.screenSetTypeToShowMobile].profile,startScreen:t,containerID:o="string"!=typeof o?"":o}):showProfilePage(n),!1}function showInterests(e,o,t){var i=selectPopUpMode(o),o=options.screenName.interests;void 0!==t&&t&&(o=t),void 0===i||!0===i?showScreenSet({screenSet:options.screenSet[options.screenSetTypeToShow].profile,mobileScreenSet:options.screenSet[options.screenSetTypeToShowMobile].profile,startScreen:o,containerID:e="string"!=typeof e?"":e}):showInterestsPage()}function showChangePasswdProfile(e,o,t){var i=selectPopUpMode(o),o=options.screenName.change;return void 0!==t&&t&&(o=t),void 0===i||!0===i?showScreenSet({screenSet:options.screenSet[options.screenSetTypeToShow].profile,mobileScreenSet:options.screenSet[options.screenSetTypeToShowMobile].profile,startScreen:o,containerID:e="string"!=typeof e?"":e}):showChangePasswdProfilePage(),!1}function showProfileUpdated(e,o,t){var i=selectPopUpMode(o),o=options.screenName.updated;return void 0!==t&&t&&(o=t),void 0!==i&&!0!==i?showProfileUpdatedPage():(showScreenSet({screenSet:options.screenSet[options.screenSetTypeToShow].profile,mobileScreenSet:options.screenSet[options.screenSetTypeToShowMobile].profile,startScreen:o,containerID:e="string"!=typeof e?"":e}),!1)}function showLoginAdditionalData(e,o,t){var i=selectPopUpMode(o),o=options.screenName.additionalData;if(void 0!==t&&t&&(o=t),void 0!==i&&!0!==i)return showLoginAdditionalDataPage();showScreenSet({screenSet:options.screenSet[options.screenSetTypeToShow].profile,mobileScreenSet:options.screenSet[options.screenSetTypeToShowMobile].profile,startScreen:o,containerID:e="string"!=typeof e?"":e})}function showSocialLoginCheckOut(e,o){return showScreenSet({screenSet:"ss-checkout",mobileScreenSet:"ss-checkout",startScreen:"gigya-rrss-login-form",containerID:e="string"!=typeof e?"":e,onBeforeScreenLoad:o.onBeforeScreenLoad,onAfterScreenLoad:o.onAfterScreenLoad,onAfterSubmit:o.onAfterSubmit}),!1}function isMobile(){var e=!1;return e=-1<browser.toLowerCase().indexOf("mobile")||-1<browser.toLowerCase().indexOf("iphone")||-1<browser.toLowerCase().indexOf("ipod")||-1<browser.toLowerCase().indexOf("ipad")||-1<browser.toLowerCase().indexOf("android")||-1<browser.toLowerCase().indexOf("blackberry")||-1<browser.toLowerCase().indexOf("bada")||-1<browser.toLowerCase().indexOf("symbian")||-1<browser.toLowerCase().indexOf("firefoxos")||-1<browser.toLowerCase().indexOf("tizen")||-1<browser.toLowerCase().indexOf("-?")?!0:e}function bindOnClickEventToDomElement(e,o){var t=!1;return void 0!==e&&e&&e.length&&(e.unbind(),e.off("click"),e.off("touchstart"),e.click(o),!0===isMobile()&&e.bind("touchstart",o),t=!0),t}function unbindOnClickEventToDomElement(e){var o=!1;return void 0!==e&&e&&e.length&&(e.unbind(),e.off("click"),e.off("touchstart"),o=!0),o}function bindOnClickEventToDomElementName(e,o,t){var i=void 0!==t&&t?t:{},n=!1;return void 0!==e&&e&&(void 0!==(t=$(e))&&t&&t.length&&(t.unbind(),t.off("click"),t.off("touchstart")),$(document).on("click",e,function(e){void 0!==e&&e&&void 0!==e.target&&e.target&&void 0!==e.target.href&&e.target.href&&(i.userFlowUrl=e.target.href),e.stopPropagation(),e.stopImmediatePropagation(),o(i)}),!0===isMobile()&&$(document).on("touchstart",e,function(e){void 0!==e&&e&&void 0!==e.target&&e.target&&void 0!==e.target.href&&e.target.href&&(i.userFlowUrl=e.target.href),e.stopPropagation(),e.stopImmediatePropagation(),o(i)}),n=!0),n}function redirectToUrlWithGigyaToken(e,o,t){o=void 0!==o&&o&&"fromRegisterClick"===o?options.route.registerURL:options.route.loginURL,e=getQueryVariableFromUrl("gig_ssoToken",e),e=void 0!==e&&e?"?gig_ssoToken="+e:"",t=void 0!==t&&t?"&"+t:"",e=getRootUrl()+o+e+t,t=getQueryVariableFromUrl("vtm_plataformaContenido",window.location.href);!t||-1===t.indexOf("app")&&-1===t.indexOf("amp")||updateFieldInCookieVocUser("analyticsVocuser",getAllQueryVarsFromUrl(window.location.href),!0);t=getQueryVariableFromUrl("client_id",window.location.href);!t||-1===t.indexOf("googleusercontent")&&-1===t.indexOf("googleusercontent")||updateFieldInCookieVocUser("googleContent",getAllQueryVarsFromUrl(window.location.href),!0),sendDataToNewRelic({eventNameFired:"redirectToUrlWithGigyaToken",additionalInformation:"redirectUrl:  "+e}),window.location.href=e}function redirectToGigyaCentralLoginPage(o){var e;"object"!=typeof o&&(void 0!==browser&&browser&&-1<browser.indexOf("IE")?callGigyaSsoLogin(o):((e={type:"HEAD",async:!0,dataType:null,withCredentials:!1}).url=buildGigyaSSOLoginUrl(o),e.timeout=15e3,e.contentType="",sendDataToNewRelic({eventNameFired:"buildGigyaSSOLoginUrl",additionalInformation:"params.url: "+e.url}),serviceCall(null,e).then(function(e){void 0!==e&&e&&void 0!==e.responseURL&&e.responseURL&&redirectToUrlWithGigyaToken(e.responseURL,o)},function(e){callGigyaSsoLogin(o)})))}function generateGoogleContentRedirectUrlFromCookieParams(e){var o=protectedFunctions.getCookieVocUserInformation("googleContent");if(void 0===o||!o||void 0===e||!e)return"";var t="",i=!1;return void 0!==o&&o&&void 0!==o.redirect_uri&&o.redirect_uri&&(t=t+o.redirect_uri+"#",i=!0),void 0!==o&&o&&void 0!==o.state&&o.state&&(t=t+"state="+o.state+"&",i=!0),i&&(t=t+"access_token="+e,t+="&token_type=bearer"),t}function redirectToGoogleContentUrl(e){!1!==e||void 0!==(e=protectedFunctions.getCookieVocUserInformation("googleContent"))&&e&&void 0!==e.client_id&&e.client_id&&voontoApp.when("vocuser:userdata").then(function(e){sendRequestToGoogleJwtToken().then(function(e){e=generateGoogleContentRedirectUrlFromCookieParams(e.result);void 0!==e&&e?(deleteFieldInCookieVocuser("googleContent"),window.location.href=e):sendDataToNewRelic({eventNameFired:"googlejwttoken",errorMessage:"",additionalInformation:e+" error generando url - redirectToGoogleContentUrl::generateGoogleContentRedirectUrlFromCookieParams"})},function(e){sendDataToNewRelic({eventNameFired:"googlejwttoken",errorMessage:"",additionalInformation:"Error en la llamada al servicio googlejwttoken - redirectToGoogleContentUrl::sendRequestToGoogleJwtToken"})})})}function sendRequestToGoogleJwtToken(e){var o=getUserSignature(account,!1).UID,t=getUserEmail();return void 0!==o&&o&&void 0!==t&&t?callServiceGoogleJwtToken({UID:o,email:t},e):new promiseNamespace(function(e,o){return o(new Error("sendRequestToGoogleJwtToken: parameter not correct: userUID or userEmail"))})}function callServiceGoogleJwtToken(e,o){if(void 0===e||!e)return new promiseNamespace(function(e,o){return o(new TypeError("callServiceGoogleJwtToken: bad parameter value: data"))});e=JSON.stringify(e);var t=void 0!==o&&o?o:{},o={type:"POST",async:!0,dataType:"json",withCredentials:!1,serviceProject:"voccore",serviceName:"googlejwttoken"};return o.servicePath=options.vocServicesPath[o.serviceProject][o.serviceName].POST,o.timeout=15e3,callVocUserService(e,o=$.extend(!0,o,t))}function rewriteCurrentUrlWithGigyaToken(e){var o;"object"!=typeof e&&((o={type:"HEAD",async:!0,dataType:null,withCredentials:!1}).url=buildGigyaSSOLoginUrl(e),o.timeout=15e3,o.contentType="",serviceCall(null,o).then(function(e){void 0!==e&&e&&void 0!==e.responseURL&&e.responseURL},function(e){}))}function callGigyaSsoLogin(e){var o=void 0!==options.backURL&&options.backURL&&""!==options.backURL&&"/"!==options.backURL?options.backURL:window.location.href,t=!1;!(t=-1<getDomainTld(o).indexOf("googleusercontent")?!0:t)&&backUrlGotParams()&&(o=getRootUrl()+options.route.redirectionURL),sendDataToNewRelic({eventNameFired:"ssoLogin",additionalInformation:"redirectUrl: "+o}),gigya.sso.login({authFlow:"redirect",redirectURL:o,context:{enteredFromComponent:e}})}function getQueryVariableFromUrl(e,o){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");o=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(o);return null===o?null:o[1]}function getAllQueryVarsFromUrl(e){var t={};return void 0!==e&&e&&(e.includes("#")?e.replace(/.*?\#/,""):e.replace(/.*?\?/,"")).split("&").forEach(function(e){var o;void 0!==e&&e&&e.includes("=")&&(o=e.split("=")[0],e=e.split("=")[1],void 0!==o&&0<o.length&&void 0!==e&&0<e.length&&(t[o]=e))}),t}function removeURLParameter(e,o){try{var t=e.split("?");if(2<=t.length){for(var i=encodeURIComponent(o)+"=",n=t[1].split(/[&;]/g),r=n.length;0<r--;)void 0!==n[r]&&n[r]&&-1!==n[r].toLowerCase().lastIndexOf(i,0)&&n.splice(r,1);return t[0]+(0<n.length?"?"+n.join("&"):"")}}catch(e){}return e}function buildGigyaSSOLoginUrl(e){var o=void 0!==e&&e?e:"fromLoginClick",t=getDomainTld(window.location.href),i="https://"+options.cnamePrefix+"gigya."+t+"/accounts.sso.login?",n=gigya.apiKey,r=getDomainTld(s=void 0!==options.backURL&&options.backURL&&""!==options.backURL&&"/"!==options.backURL?options.backURL:window.location.href),a=!1;-1<r.indexOf("googleusercontent")&&(a=!0);e=s.split("?");s=removeURLParameter(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=!a?void 0!==(e=(s=void 0!==e[0]&&e[0]&&""!==e[0]?e[0]:s).split("#"))[0]&&e[0]&&""!==e[0]?e[0]:s:s).replace(/%3Fgig_actions%3Dsso.login/g,"")).replace(/%26gig_actions%3Dsso.login/g,"")).replace(/%26gig_enteredFromComponent%3DfromLoginClick/g,"")).replace(/%26gig_enteredFromComponent%3DfromRegisterClick/g,"")).replace(/\?gig_actions=sso.login/g,"")).replace(/&gig_actions=sso.login/g,"")).replace(/&gig_enteredFromComponent=fromLoginClick/g,"")).replace(/&gig_enteredFromComponent=fromRegisterClick/g,"")).replace(/.html&service=/g,".html?service=")).replace(/.html%3Fservice%3D/g,".html?service=")).replace(/.html&ref=/g,".html?ref=")).replace(/.html%3Fref%3D/g,".html?ref="),"ref");var s=removeURLParameter(s,"service");searchValueInObj(r,domains)||a||(s="https://www."+t),s=encodeURIComponent(s),!a&&backUrlGotParams()&&(s=encodeURIComponent(getRootUrl()+options.route.redirectionURL));a='{"domain":"https://'+getSubdomainDomainTld(window.location.href)+'/","messaging":1,"context":{"enteredFromComponent":"'+o+'"},"gig_actions":"sso.login","authFlow":"redirect"}',a=encodeURIComponent(a);return i+"APIKey="+n+"&redirectURL="+s+(-1<o.indexOf("Page")?"":"&gig_actions=sso.login")+"&gig_enteredFromComponent="+o+"&authFlow=redirect&sdk=js_latest&authMode=cookie&state="+a}function searchValueInObj(e,o){if(void 0===e||!e)return!1;for(var t in o)if(o.hasOwnProperty(t)){t=o[t];if(-1<e.indexOf(t))return!0}return!1}function bindOnClickEventToLogin(e){var o=options.loginLinkSelector;var t=void 0===e?{urlParams:""}:e;bindOnClickEventToDomElementName(o,function(){void 0!==AppWebview&&AppWebview&&void 0!==AppWebview.notifyEventLoginClick&&AppWebview.notifyEventLoginClick({}),showLogin(t,"",options.popUpMode,"")})}function bindOnClickEventToRegister(e){var o=options.registrationLinkSelector;var t=void 0===e?{urlParams:""}:e;bindOnClickEventToDomElementName(o,function(){void 0!==AppWebview&&AppWebview&&void 0!==AppWebview.notifyEventRegistrationClick&&AppWebview.notifyEventRegistrationClick({}),showRegistration(t,"",options.popUpMode,"")})}function bindOnClickEventToLogout(){bindOnClickEventToDomElementName(options.logoutLinkSelector,function(){logout()})}function bindOnClickEventToCookiesPolicy(){bindOnClickEventToDomElementName(options.cookiePolicyLinkSelector,function(){Voonto.cmp.show()})}function bindOnClickEventToFacebookLogin(){bindOnClickEventToDomElementName(options.rrssLinkSelector.facebookLogin,function(){$("form:visible button[title='Facebook']").trigger("click")})}function bindOnClickEventToGoogleLogin(){bindOnClickEventToDomElementName(options.rrssLinkSelector.googleLogin,function(){$("form:visible button[title='Google']").trigger("click")})}function refreshUI(){gigya.socialize.refreshUI({callback:function(e){compareGigyaErrorCode(e.errorCode,0)}})}function notifyLoginAppWebView(e){notifyLogin(e).then(function(e){gigyaResponse=e,console.log("APP notifyLoginSuccess respuesta: "),console.log(e),options.reloadOnLogin=!1,refreshUI(),hideLoadingSpinner()},function(e){console.log("APP notifyLoginError respuesta: "),console.log(e),logout(),void 0===e||void 0===e.errorDetails||void 0===e.errorCode||compareGigyaErrorCode(e.errorCode,"206001")||compareGigyaErrorCode(e.errorCode,"403043")||alert("APP notifyLoginError respuesta: "+e.errorDetails),hideLoadingSpinner()})}function listenAppsSessionToken(){var n=0,r=setInterval(function(){if(n<800){if(void 0!==window.vocento&&window.vocento&&void 0!==window.vocento.vocuser&&window.vocento.vocuser&&void 0!==window.vocento.vocuser.apps&&window.vocento.vocuser.apps&&void 0!==window.vocento.vocuser.apps.sessionresponse&&window.vocento.vocuser.apps.sessionresponse){var o=window.vocento.vocuser.apps.sessionresponse&&window.vocento.vocuser.apps.sessionresponse,e=window.vocento.vocuser.apps.socialnetwork&&window.vocento.vocuser.apps.socialnetwork,t="";if("string"==typeof o)try{t=(o=JSON.parse(o)).media,void 0!==o&&void 0!==o.response&&(o=o.response)}catch(e){return console.log("appError: Decodeando sessionResponse error: "),console.log(o),sendDataToNewRelic({eventNameFired:"appError",errorMessage:"appError: Decodeando sessionResponse error",additionalInformation:"sessionResponse valor: "+window.vocento.vocuser.apps.sessionresponse}),void clearInterval(r)}var i=AppWebview.getAuthTokenForSocialNetwork(o,e);if(0===Object.keys(i).length)return console.log("appError: sessionResponse no contiene la información correcta: "),console.log(o),void sendDataToNewRelic({eventNameFired:"appError",errorMessage:"appError: sessionResponse no contiene la información correcta",additionalInformation:"sessionResponse valor: "+window.vocento.vocuser.apps.sessionresponse});showLoadingSpinner();o={};o.media=t,o.providerSessions={},o.providerSessions[e]={},o.providerSessions[e]=i;o=notifySocialLogin(o);hideLoadingSpinner(),o.then(function(e){gigyaResponse=e,console.log("APP notifySocialLogin y notifyLogin backend success respuesta: "),console.log(e),options.reloadOnLogin=!1,refreshUI();var o=e.result.notifyLogin,e={};e.siteUID=o.UID,e.UIDSig=o.UIDSignature,e.UIDTimestamp=o.signatureTimestamp,notifyLoginAppWebView(e)},function(e){var i;console.log("APP notifySocialLogin y notifyLogin backend error respuesta: "),console.log(e),void 0===e||void 0===e.errorDetails||void 0===e.errorCode||compareGigyaErrorCode(e.errorCode,"206001")||compareGigyaErrorCode(e.errorCode,"403043")||alert("APP notifySocialLogin y notifyLogin backend error respuesta: "+e.errorDetails),void 0!==e&&void 0!==e.errorCode&&compareGigyaErrorCode(e.errorCode,"403043")&&((i={}).regToken=e.result.notifySocialLogin.regToken,getConflictingAccount(i).then(function(e){var o,t={};t.regToken=i.regToken,t.provider=e.conflictingAccount.loginProviders[0],t.loginMode="link","site"===t.provider?(t.loginID=e.conflictingAccount.loginID,(o={}).loginID=e.conflictingAccount.loginID,o.regToken=i.regToken,showScreenSet({screenSet:options.screenSet[options.screenSetTypeToShow].auth,mobileScreenSet:options.screenSet[options.screenSetTypeToShowMobile].auth,startScreen:"gigya-link-account-screen",containerID:"",context:o})):socialLogin(t)}))}),window.vocento.vocuser.apps={},clearInterval(r)}}else clearInterval(r);n+=1},200)}function bindOnClickEventToSocialNetworkLoginWebview(o){var e=options.appWebview.facebookClose,t=options.appWebview.googleClose,i=options.appWebview.appleClose;function n(e){AppWebview.manageNativeLogin(o,e),listenAppsSessionToken()}bindOnClickEventToDomElementName(e,n,"facebook"),bindOnClickEventToDomElementName(t,n,"googleplus"),bindOnClickEventToDomElementName(i,n,"apple")}function bindOnClickEventToLinkingAccounts(e){var o={};o.loginMode="link",void 0!==e&&e&&void 0!==e.context&&e.context&&(o.regToken=e.context.regToken,o.loginID=e.context.loginID),bindOnClickEventToDomElementName(".vocuser-link-account-submit",function(){o.password=getFieldValueInScreenByName("password",e.currentScreen),vocuserLogin(o)})}function bindOnClickEventToSetPasswordForGoogleUser(){bindOnClickEventToDomElementName(options.rrssLinkSelector.setNewPasswordGoogle,function(){$("form:visible button[title='Google']").trigger("click"),createCookieForNewPassword()})}function bindOnClickEventToSetPasswordForFacebookUser(){bindOnClickEventToDomElementName(options.rrssLinkSelector.setNewPasswordFacebook,function(){$("form:visible button[title='Facebook']").trigger("click"),createCookieForNewPassword()})}function bindOnClickToFinishRrssRegistration(e){bindOnClickEventToDomElementName("#vocento-vocuser-finish-rrss-registration","Google"===e?function(){hideScreenSet({screenSet:"gigya-not-complete-registration-screen"}),$("form:visible button[title='Google']").trigger("click")}:function(){hideScreenSet({screenSet:"gigya-not-complete-registration-screen"}),$("form:visible button[title='Facebook']").trigger("click")})}function bindOnClickToDismissRrssNotCompleted(){bindOnClickEventToDomElementName("#vocento-vocuser-continue-site-registration",function(){var e,o=simpleStorageDependency.get("user.email");simpleStorageDependency.set("user.email","",{TTL:3e5}),void 0!==o&&o&&(dismissNotCompletedRrssAccount(o),void 0!==(e=$('form:visible input[data-gigya-name="email"]'))&&e&&e.length&&e.val(o)),hideScreenSet({screenSet:"gigya-not-complete-registration-screen"})})}function registerUI(){var e={urlParams:""};bindOnClickEventToLogin(e=isAppWebView()?{urlParams:"?device=appwebview"}:e),bindOnClickEventToRegister(e),bindOnClickEventToDomElementName(options.recoveryLinkSelector,function(){showRecoveryPage()}),bindOnClickEventToDomElementName(options.appWebview.close,function(){logout(),AppWebview.notifyUserFlowEnd()}),bindOnClickEventToDomElementName(options.backLinkSelector,function(){showBackPageForBackLink()}),bindOnClickEventToDomElementName(options.profileLinkSelector,function(){showProfile("",options.popUpModeProfile,options.screenName.perfil)}),bindOnClickEventToDomElementName(options.profileAreaPersonalLinkSelector,function(){redirectToProfileAreaPersonal()}),bindOnClickEventToDomElementName(options.profileInterestsLinkSelector,function(){showInterests("",options.popUpModeProfile,options.screenName.intereses)}),bindOnClickEventToDomElementName(options.profileChangePasswdLinkSelector,function(){showChangePasswdProfile("",options.popUpModeProfile,options.screenName.change)}),bindOnClickEventToLogout(),bindOnClickEventToCookiesPolicy(),authenticated?($(options.loggedOutSelector).hide(),$(options.userFirstNameSelector).text(void 0!==user.firstName&&user.firstName?user.firstName:user.nickname),$(options.userLastNameSelector).text(void 0!==user.lastName&&user.lastName?user.lastName:user.nickname),$(options.userEmailSelector).text(void 0!==user.email&&user.email?user.email:""),user.thumbnailURL?$(options.userThumbnailSelector).attr("src",user.thumbnailURL).show():$(options.userThumbnailSelector).hide(),$(options.loggedInSelector).show(),fireEvent("registerUI"+eventSeparator+"loggedIn",user)):($(options.loggedInSelector).hide(),$(options.loggedOutSelector).show(),fireEvent("registerUI"+eventSeparator+"loggedOut"))}function getUserSignature(e,o){void 0===o&&(o=!0);var t="";return void 0!==e&&e&&void 0!==e.data&&e.data&&void 0!==e.data.paywall&&e.data.paywall&&void 0!==e.data.paywall.userId&&e.data.paywall.userId&&(t=o?encodeURIComponent(e.data.paywall.userId):e.data.paywall.userId),{UID:o?encodeURIComponent(e.UID):e.UID,UIDSignature:o?encodeURIComponent(e.UIDSignature):e.UIDSignature,signatureTimestamp:o?encodeURIComponent(e.signatureTimestamp):e.signatureTimestamp,evolokId:t}}function getDomainTld(e){var o=window.location.hostname,t="",i="",n="";return(t=void 0!==(o=void 0!==e&&e&&"/"!==e?e:o)&&o&&"/"!==o?o.split("."):t).length<=0&&(i=o),1===t.length&&(i=t[0]),2===t.length&&(n=(n=t[1].split("/"))[0],i=(i=t[0])+"."+n),2<t.length&&((e=o.replace("http://","").replace("https://","").replace("://","").replace("//","").split("/")).length<=1&&(n=(n=t[2].split("/"))[0],i=t[1]),2<=e.length&&((o=e[0].split(".")).length<=0&&(n=(n=t[2].split("/"))[0],i=e[0]),0<o.length&&o.length<3&&(n=(n=o[1].split("/"))[0],i=t[0]),2<o.length&&(n=(n=o[2].split("/"))[0],i=o[1])),i=i+"."+n),i}function getSubdomainDomainTld(e){var o=window.location.hostname,t="",i="",n="",r="";return(t=void 0!==(o=void 0!==e&&e&&"/"!==e?e:o)&&o&&"/"!==o?o.split("."):t).length<=0&&(i=o),1===t.length&&(i=t[0]),2===t.length&&(n=(n=t[1].split("/"))[0],i=(i=t[0])+"."+n),2<t.length&&((e=o.replace("http://","").replace("https://","").replace("://","").replace("//","").split("/")).length<=1&&(n=(n=t[2].split("/"))[0],i=t[1],r=t[0]),2<=e.length&&((o=e[0].split(".")).length<=0&&(n=(n=t[2].split("/"))[0],i=e[0]),0<o.length&&o.length<3&&(n=(n=o[1].split("/"))[0],i=t[0]),2<o.length&&(n=(n=o[2].split("/"))[0],i=o[1],r=o[0])),i=i+"."+n),r?r+"."+i:i}function redirectToUrl(e,o){var t=!1;if(void 0===e||!e)return t;var i="/"===e?getSubdomainDomainTld(e):e;return-1<i.indexOf("http:")?i=i.replace("http:","https:"):-1===i.indexOf("https:")&&(i="https://"+(i=(i=(i=i.replace("http","")).replace("://","")).replace("//",""))),void 0!==i&&i&&"/"===i&&(i="https://www."+getDomainTld(window.location.href)),void 0!==o&&1<=o?setTimeout(function(){window.location.href=i},o):window.location.href=i,t=!0}function redirectToBackUrl(e){return redirectToUrl(options.backURL,e)}function fireEventRedirectToBackUrlOnLogin(e){var o,t=!1;return void 0!==options.enableRedirect&&options.enableRedirect&&(o={},void 0!==e&&e&&(o.timeoutMiliseconds=e),eventRedirectToBackUrlOnLogin.resolve(o),t=!0),t}function gigyaITPSsoContinue(){sendDataToNewRelic({eventNameFired:"ssoContinue",additionalInformation:""}),(0,gigya.sso.continue)()}function redirectToBackUrlOnLogin(){return $.when(eventAccountsOnLogin,eventSocializeOnLogin,eventRedirectToBackUrlOnLogin,eventLastActionBeforeRedirect,eventTokenJWTCreated).done(function(e,o,t,i,n){var r=0;void 0!==t&&t&&void 0!==t.timeoutMiliseconds&&t.timeoutMiliseconds&&(r=t.timeoutMiliseconds),void 0===options.extensionType||"ecommerce"!==options.extensionType&&"redencion"!==options.extensionType&&"upgrade"!==options.extensionType&&"regalo"!==options.extensionType||updateLastestBackUrl(getExtensionCustomReturnUrl()),!0===shouldRedirectWithITP()?gigyaITPSsoContinue():redirectOnCallVocUserService(options.backURL,r)})}function shouldRedirectWithITP(){var e=void 0!==options.enableGigyaITP&&options.enableGigyaITP,o=getQueryVariable("gig_ssoToken");return!(!e||void 0===o||!o)}function firePromiseGetUserType(){var e={responseGetUserType:getUserType()};timeUserTypeObtained=window.performance.now(),voontoPromised("getusertype",e,voontoApp),sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber obtenido el tipo de usuario."})}function firePromiseUserLogged(e){voontoPromised("userlogged",{responseUserLogged:{logged:!0,userToken:void 0!==e&&e?e:{}}},voontoApp)}function firePromiseUserRegistered(e){voontoPromised("userregistered",{responseUserRegistered:{registered:!0,userToken:void 0!==e&&e?e:{}}},voontoApp)}function firePromiseGetUserTypeOnEventProductsOnReady(){var e;!0===options.hasPaywall&&!0===options.hasEcommerce&&(void 0!==(e=getVocPaywallCookie())&&e||$.when(eventProductsOnReady).done(function(e){firePromiseGetUserType()}))}function listenerProductsOnReadyForAnalytic(){var e,o,t;!0===options.hasPaywall&&!0===options.hasEcommerce&&(e=getMainEventListener(),o=getEventNamespace(),t=getEventSeparator(),e.on(o+"products"+t+"onReady",function(e){var o=getSuscriptionInfo(e,options.serviceCallEkosTechnicalSynchronized);if(0<Object.keys(o).length)for(var t in o)o.hasOwnProperty(t)&&void 0!==o[t]&&0<o[t].length&&protectedFunctions.updateFieldInCookieVocUid(t,o[t],!0)}))}function getSuscriptionInfo(e,t){var i=[];if(void 0!==e.gigya_event&&void 0!==e.gigya_event.e&&void 0!==e.gigya_event.e.data){if(!(void 0!==t&&t||void 0!==e.gigya_event.e.status&&"ok"===e.gigya_event.e.status))return i;e=e.gigya_event.e.data;$.each(e,function(e,o){isActiveSuscription(o,t)&&(void 0!==t||t||void 0!==o.tipo&&"PRO"===o.tipo)&&(i.fechaAltaOn=t?o.startDate:o.fechaInicio,i.fechaBajaOn=t?o.endDate:o.fechaFin,i.nombreProducto=t?o.role:o.nombre,i.descProducto=(t?o.description:o.descripcion).replace("%",""),i.fuenteSuscripcion=t?o.source:o.fuente,i.idSuscripcion=t?"":o.id)})}return i}function isActiveSuscription(e,o){var t=new Date;if((void 0!==e.endDate&&e.endDate||void 0!==e.fechaFin&&e.fechaFin)&&t<new Date(o?e.endDate:e.fechaFin))return 1}function firePromiseGetUserTypeEventUserDataReady(){$.when(eventGetUserInfo,eventGetAccountInfo).done(function(e,o){var t;authenticated?(!1===options.hasEcommerce&&firePromiseGetUserType(),!0!==options.hasPaywall||!0!==options.hasEcommerce||void 0!==(t=getVocPaywallCookie())&&t&&firePromiseGetUserType()):firePromiseGetUserType()})}function firePromiseGetUserTypeOnEvents(){firePromiseGetUserTypeEventUserDataReady(),firePromiseGetUserTypeOnEventProductsOnReady()}function userDataReady(){return $.when(eventGetUserInfo,eventGetAccountInfo,eventTokenJWTCreated).done(function(e,o,t){voontoPromised("userdata",{responseGetUserInfo:e,responseGetAccountInfo:o},voontoApp),firePromiseUserInterest(o),!0!==firedEventAccountsOnDataNoReady&&sendDataToNewRelic({eventNameFired:"userDataReady",firedEventUserDataReady:firedEventAccountsSocializeUserDataReady=!0,callId:"getUserInfoCallId: "+e.callId+" ; getAccountInfoCallId: "+o.callId})})}function firePromiseUserInterest(e){voontoPromised("userinterestdata",{responseUserInterestData:void 0!==e.data&&void 0!==e.data.customerInterests?e.data.customerInterests:null},voontoApp)}function updateLastestBackUrlWithUserFieldReturnUrlOnFirstLogin(){var e=!1;return void 0!==account&&account&&void 0!==account.data&&account.data&&void 0!==account.data.registration&&account.data.registration&&(void 0!==account.data.registration.url&&account.data.registration.url&&(e=account.data.registration.url),void 0!==account.data.registration.returnUrl&&account.data.registration.returnUrl&&(e=account.data.registration.returnUrl)),updateLastestBackUrl(e),e}function updateLastestBackUrl(e){var o=!1;return void 0!==e&&e&&(options.backURL="/"===e?"https://www."+getDomainTld(window.location.href):e,o=!0),o}function updateLastestBackUrlWithUserFieldReturnUrl(){var e;return!0===isFirstLogin()?(clearFieldReturnUrlInCookieVocUser(),updateLastestBackUrlWithUserFieldReturnUrlOnFirstLogin()):(e=getCookieVocUserInformation("returnUrl"),clearFieldReturnUrlInCookieVocUser(),updateLastestBackUrl(e))}function updateReturnUrlTimeout(){var e=0;return e=!0!==isFirstLogin()?getCookieVocUserInformation("returnUrlTimeout"):e}function sincronizarLlamadasEcommercePaywall(e){var o,t,i,n="",r=getEventSeparator(),a=getVoontoApp();options.hasEcommerce?(t=o=!1,void 0!==(i=getVocPaywallCookie())&&i&&void 0!==i.windowLocationOrigin&&i.windowLocationOrigin&&i.windowLocationOrigin!==window.location.origin&&(t=o=!0),void 0!==(i=getProducts())&&i&&!0!==t?(setVocPaywallCookie(!1),fireEvent("products"+r+"onReady",n={e:e}),eventProductsOnReady.resolve(n),voontoPromised("productsonready",{responseProductsOnReady:getNormalizedProductsFromSimpleStorage(i)},a)):synchronizeProducts(e,o)):(log("sincronizarLlamadasEcommercePaywall => El medio no tiene ecommerce activado: hasEcommerce = false","info"),fireEvent("products"+r+"onError",n={e:e}),eventProductsOnReady.resolve(n))}function evolokIdAndSynchronizeProductsOnLogin(o){var t=!1;if(void 0===options.hasPaywall||!options.hasPaywall)return sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"",additionalInformation:"EvolokID llamada no realizada. El medio NO tiene hasPaywall activado - evolokIdAndSynchronizeProductsOnLogin"}),t;var e,i,n=null;return void 0!==o.gigya_event&&(n=o.gigya_event),void 0!==(n=null===(n=void 0!==o.response?o.response:n)?o:n)&&n&&void 0!==n.data&&n.data?void 0!==n.data.paywall&&void 0!==n.data.paywall.userId&&n.data.paywall.userId?(sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"",additionalInformation:"EvolokID llamada no realizada. El usuario ya tiene EvolokID - evolokIdAndSynchronizeProductsOnLogin"}),synchronizeProducts(o,!0,!1,reloadOnLoginForEcommerce),t=!0):(n.profile,n.data,i=encodeURIComponent(n.profile.email),e=safeEncodeUserSignature(n.UID,n.UIDSignature,n.signatureTimestamp),i=options.authServer+"/api/v1/evolokId?"+e+"&email="+i,$.ajax({url:i+"&callback=?",contentType:"application/json",dataType:"jsonp",success:function(e){e.success?(log("evolokIdAndSynchronizeProductsOnLogin => ID paywall ("+e.uid+")","info"),sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"",additionalInformation:"EvolokID success. Response => Evolok ID: "+e.uid+", UID: "+n.UID+", email: "+n.profile.email+" - evolokIdAndSynchronizeProductsOnLogin"}),void 0!==account&&account&&void 0!==account.data&&account.data&&void 0!==account.data.paywall&&account.data.paywall&&(account.data.paywall={},account.data.paywall.userId=e.uid,log("Seteando paywall id: "+account.data.paywall.userId,"info")),log(account,"info"),setAccountInfo({data:account.data}),void 0!==o&&o&&void 0!==o.data&&o.data&&(o.data.paywall={},o.data.paywall.userId=e.uid),synchronizeProducts(o,!0,!1,reloadOnLoginForEcommerce),t=!0):(log("evolokIdAndSynchronizeProductsOnLogin => ERROR obteniendo ID paywall del usuario","error"),sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"Se ha realizado la llamada a Evolok, pero la respuesta no ha sido success",additionalInformation:"EvolokID error unsuccess response - evolokIdAndSynchronizeProductsOnLogin"}),reloadOnLoginForEcommerce())},error:function(e,o,t){log("evolokIdAndSynchronizeProductsOnLogin => ERROR obteniendo ID paywall del usuario - xhr","error"),sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"Error en la llamada ajax a evolok",additionalInformation:"EvolokID ajax error - evolokIdAndSynchronizeProductsOnLogin"}),reloadOnLoginForEcommerce()}})):sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"",additionalInformation:"EvolokID llamada no realizada. El usuario no tiene datos para realizar llamada - evolokIdAndSynchronizeProductsOnLogin"}),t}function handleSynchronizeProductsSuccess(e,o){var t={e:e,account:account};productsStorageCallback(e),timeUserTypeEndpointObtained=window.performance.now();var i=getVoontoApp();fireEvent("products"+getEventSeparator()+"onReady",t),eventProductsOnReady.resolve(t),voontoPromised("productsonready",{responseProductsOnReady:e},i),sendDataToNewRelic({eventNameFired:"busSynchronize",errorMessage:"",additionalInformation:o+" success - synchronizeProductsOnLogin"})}function handleSynchronizeProductsError(e,o,t){e={e:e,account:account};log("synchronizeProducts => Error al sincronizar productos: "+o,"info"),fireEvent("products"+getEventSeparator()+"onError"),eventProductsOnReady.resolve(e),sendDataToNewRelic({eventNameFired:"busSynchronize",errorMessage:t,additionalInformation:o+" ajax error - synchronizeProductsOnLogin"})}function productsStorageCallback(e){var o=!1,t="productsStorageCallback => Error: No hay productos";void 0!==e.data&&e.data&&e.data.length?(t="productsStorageCallback => respuesta OK",o=setProducts(e.data),log(t,"info")):(void 0!==e.status&&e.status&&(t=t+"; Mensaje estado: "+e.status,log(t,"info")),log("productsStorageCallback => Por favor compruebe si existe bloqueo de urls: ","info"),log("productsStorageCallback => "+options.authServer+"/api/v1/paywall/busSynchronize","info"),log("productsStorageCallback => http://vocento.eb.sc.evolok.net/event-broker/services/rest/profileService/role","info"),setBusSynchronizeFlushed());return setVocPaywallCookie(!0),o}function setProducts(e){var o=!1,t="";return void 0!==account&&account&&void 0!==account.UID&&account.UID?o=(void 0!==e&&e&&e.length&&void 0!==simpleStorageDependency&&simpleStorageDependency?(simpleStorageDependency.set("products."+account.UID,e,{TTL:3e5}),t="setProducts: Datos de productos almacenados en localStorage."):(t="setProducts: Error. No hay productos para el usuario con UID: "+account.UID,log("setProducts => products está vacío, por favor compruebe si funcionan las urls: ","error"),log("setProducts => "+options.authServer+"/api/v1/paywall/busSynchronize","error"),log("setProducts => http://vocento.eb.sc.evolok.net/event-broker/services/rest/profileService/role","error")),!0):t="trialsStorageCallback => setProducts - Error: El usuario no está logueado o no tiene datos.",log(t,"info"),o}function setBusSynchronizeFlushed(){var e=!1;return void 0!==account&&account&&void 0!==account.UID&&account.UID&&void 0!==simpleStorageDependency&&protectedFunctions.simpleStorageDependency&&(simpleStorageDependency.set("busSynchronizeFlushed",!0,{TTL:3e5}),e=!0),e}function getUserTypeFromSimpleStorage(e){var o,t="anonimo",i="";return void 0!==e&&e?void 0!==e.gigya_event&&e.gigya_event&&void 0!==e.gigya_event.account&&e.gigya_event.account?i=e.gigya_event.account.UID:void 0!==e.gigya_event&&e.gigya_event&&void 0!==e.gigya_event.UID&&e.gigya_event.UID?i=e.gigya_event.UID:void 0!==e.response&&e.response&&void 0!==e.response.account&&e.response.account?i=e.response.account.UID:void 0!==e.gigya_event&&e.gigya_event&&void 0!==e.gigya_event.e&&e.gigya_event.e&&void 0!==e.gigya_event.e.UID&&e.gigya_event.e.UID&&(i=e.gigya_event.e.UID):(o=protectedFunctions.getUser(),void 0!==account&&account&&void 0!==account.UID&&account.UID?i=account.UID:void 0!==o&&o&&void 0!==o.UID&&o.UID&&(i=o.UID)),t="registrado",options.hasEcommerce?void 0!==i&&i&&(void 0!==(o=getProducts(i))&&o&&o.length?(t="registrado",t=(i=getUserByTrials(getTrialsFromProducts(o)))||t,t=getSuscriptionsFromProducts(o).length?"suscriptor":t,t="periodista"===i?i:t):log("getUserTypeFromSimpleStorage => Información: El usuario actual no tiene productos.","info")):log("getUserTypeFromSimpleStorage => El medio no tiene ecommerce activado: hasEcommerce = false","info"),t}function setVocPaywallCookie(e){var o="."+userUtils.getMainDomain(),t="";void 0!==(t=void 0!==userTypeEkos&&userTypeEkos?userTypeEkos:getUserTypeFromSimpleStorage())&&t||(t="registrado");var i=!1;void 0!==e&&e&&!0===e&&(i=e,void 0!==$.removeCookie?$.removeCookie(PAYWALL_COOKIE_NAME,{domain:o,path:"/"}):$.cookie(PAYWALL_COOKIE_NAME,null,{domain:o,path:"/"}));t=window.location.origin+"|"+t;return setCookiePureJS(PAYWALL_COOKIE_NAME,t,365,o,"/",i)}function removeEcommerceCookies(){log("removeEcommerceCookies => Eliminando cookies de Paywall","info");var e="."+userUtils.getMainDomain();void 0!==$.removeCookie?($.removeCookie(PAYWALL_COOKIE_NAME,{domain:e,path:"/"}),$.removeCookie("busSynchronizeFlushedCookie",{domain:e,path:"/"})):($.cookie(PAYWALL_COOKIE_NAME,null,{domain:e,path:"/"}),$.cookie("busSynchronizeFlushedCookie",null,{domain:e,path:"/"}))}function getEcommerceCookiesOriginalContent(e){var o="";void 0!==(o=getCookieOriginalContent(PAYWALL_COOKIE_NAME))&&o&&e.push({name:PAYWALL_COOKIE_NAME,value:o});return e}function reloadOnLoginForEcommerce(){updateLastestBackUrlWithUserFieldReturnUrl();var e=updateReturnUrlTimeout(),o=!1;options.userIsInFlow&&(o=gigyaCnameSetSsoToken()),cookieNewPasswordExists()||void 0!==o&&!1!==o||(void 0!==options.popUpMode&&!1===options.popUpMode&&options.userIsInFlow?fireEventRedirectToBackUrlOnLogin(e):options.reloadOnLogin&&options.userIsInFlow&&(addLoginReloadCountToVocUserInformationCookie(1),(null==(e=getCookieVocUserInformation("loginReloadCount"))||void 0!==e&&e&&e<=2)&&userUtils.reload()))}function showLoadingSpinner(){var e=!1,o=$("#vocuser-loading-indicator");return void 0!==o&&o&&o.length&&(o.show(),e=!0),e}function hideLoadingSpinner(){var e=!1,o=$("#vocuser-loading-indicator");return void 0!==o&&o&&o.length&&(o.hide(),e=!0),e}function getUserByTrials(e){var o,t="";if(void 0===e||!e||!e.length)return t;for(o in t="trial",e)e.hasOwnProperty(o)&&void 0!==e[o].nombre&&"periodista"===e[o].nombre.toLowerCase()&&(t="periodista");return t}function getTrialsFromProducts(e){var o="";return o=void 0!==e&&e?$.grep(e,function(e){var o=!1;return"TRL"!==e.tipo?o:o=!0}):o}function getVocPaywallCookie(){var o=!1,t=getCookiePureJS(PAYWALL_COOKIE_NAME),i="";if(void 0!==t&&t)try{o={windowLocationOrigin:(i=t.split("|"))[0],vocUserType:i[1]}}catch(e){log("Error en getVocPaywallCookie() al decodificar la cookie: "+e,"error");setVocPaywallCookie(!0),void 0!==(t=getCookiePureJS(PAYWALL_COOKIE_NAME))&&t&&(o={windowLocationOrigin:(i=t.split("|"))[0],vocUserType:i[1]})}return o}function getSuscriptionsFromProducts(e){var o="";return o=void 0!==e&&e?$.grep(e,function(e){return"SCR"===e.tipo}):o}function getUserTypeFromCookieOrSimpleStorage(e){var o="anonimo",t="";return void 0!==(t=void 0!==e&&e?void 0!==e.gigya_event&&e.gigya_event&&void 0!==e.gigya_event.account&&e.gigya_event.account?e.gigya_event.account.UID:void 0!==e.gigya_event&&e.gigya_event&&void 0!==e.gigya_event.UID&&e.gigya_event.UID?e.gigya_event.UID:void 0!==e.response&&e.response&&void 0!==e.response.account&&e.response.account?e.response.account.UID:void 0!==e.gigya_event&&e.gigya_event&&void 0!==e.gigya_event.e&&e.gigya_event.e&&void 0!==e.gigya_event.e.UID&&e.gigya_event.e.UID?e.gigya_event.e.UID:vocUserGetData("uid"):vocUserGetData("uid"))&&t&&(o="registrado"),options.hasEcommerce?void 0!==(e=getVocPaywallCookie())&&e&&void 0!==e.vocUserType&&e.vocUserType?o=e.vocUserType:void 0!==t&&t&&(void 0!==(e=getProducts(t))&&e&&e.length?(o="registrado",o=(t=getUserByTrials(getTrialsFromProducts(e)))||o,o=getSuscriptionsFromProducts(e).length?"suscriptor":o,o="periodista"===t?t:o):log("getUserTypeFromCookieOrSimpleStorage => Información: El usuario actual no tiene productos.","info")):log("getUserType => El medio no tiene ecommerce activado: hasEcommerce = false","info"),o=getCookieVocUid("env")!==options.currentEnvironment&&!1===authenticated?"anonimo":o}function getUserType(){var e="anonimo",o="",t=getVocPaywallCookie();return void 0!==t&&t&&void 0!==t.vocUserType&&t.vocUserType?e=t.vocUserType:(void 0!==(o="function"==typeof vocUserGetData?vocUserGetData("uid"):o)&&o||void 0!==account&&account&&void 0!==account.UID&&account.UID&&(o=account.UID),void 0!==o&&o||void 0!==user&&user&&void 0!==user.UID&&user.UID&&(o=user.UID),void 0!==o&&o?(void 0!==account&&account||(account={UID:o}),e=void 0!==userTypeEkos&&userTypeEkos?userTypeEkos:getUserTypeFromCookieOrSimpleStorage({gigya_event:account})):log("getUserType => Error: No se ha encontrado el UID del usuario.","info")),e}function getVocEdition(){var e=null;try{e=$.cookie(EDITION_COOKIE_NAME)}catch(e){}return void 0!==e&&e||void 0!==window.vocento&&window.vocento&&void 0!==window.vocento.site&&window.vocento.site&&void 0!==window.vocento.site.editions&&window.vocento.site.editions&&void 0!==window.vocento.site.editions.current&&window.vocento.site.editions.current&&(e=window.vocento.site.editions.current),e}function getDomainForSsoGroup(e){var o="";return void 0===e||!e||void 0!==(e=domains[e])&&e&&(o=e=(e=e.split("."))[0]),o}function getAreaPersonalDomain(e){var o="javascript:void(0)",t=window.location.host,t=void 0!==e&&e?e:t,o="https://areapersonal."+domains[options.ssoGroup];return(/^des/.test(t)||/^areapersonal-des/.test(t)||/^areapersonalm-des/.test(t)||/^local/.test(t)||/^deshared/.test(t))&&(o="https://areapersonal-des."+domains[options.ssoGroup]),o=/^integracion/.test(t)||/^pre/.test(t)||/^areapersonal-pre/.test(t)||/^areapersonalm-pre/.test(t)?"https://areapersonal-predes."+domains[options.ssoGroup]:o}function isSiteAreaPersonal(){var e=!1;return e=/^areapersonal-des/.test(window.location.host)||/^areapersonalm-des/.test(window.location.host)||/^areapersonal-pre/.test(window.location.host)||/^areapersonalm-pre/.test(window.location.host)||/^areapersonal/.test(window.location.host)?!0:e}function initAreaPersonalPageRouting(){var e=getAreaPersonalDomain(window.location.host),o=void 0!==options.route.personalAreaSuscriptionSectionURL&&options.route.personalAreaSuscriptionSectionURL?options.route.personalAreaSuscriptionSectionURL:"",t=void 0!==options.route.personalAreaCheckoutSectionURL&&options.route.personalAreaCheckoutSectionURL?options.route.personalAreaCheckoutSectionURL:"";options.page.areaPersonalSuscriptionPathname=e+o,options.page.areaPersonalCheckoutPathname=e+t}function getSubdomainContenidoExtra(){var e="www";return/^new-www/.test(window.location.host)&&(e="new-www"),(/^integracion/.test(window.location.host)||/^pre/.test(window.location.host)||/^areapersonal-pre/.test(window.location.host)||/^areapersonalm-pre/.test(window.location.host))&&(e="pre-www"),e=/^des/.test(window.location.host)||/^areapersonal-des/.test(window.location.host)||/^areapersonalm-des/.test(window.location.host)?"des-www":e}function getFieldValueFromUserInfo(e,o){var t=!1;return isVarNotNull(e)&&isVarNotNull(o)&&(isVarNotNull(e[o])?t=e[o]:isVarNotNull(e.profile)&&isVarNotNull(e.profile[o])&&(t=e.profile[o])),t}function buildGenderWelcomeText(e){var o="Bienvenido";return o=isVarNotNull(e)&&"f"===e?"Bienvenida":o}function buildFirstNameText(e){var o="##nombre##";return o=isVarNotNull(e)?e:o}function buildUserNameText(e){var o,t,i,n="";return isVarNotNull(e)&&(o=getFieldValueFromUserInfo(e,"firstName"),t=getFieldValueFromUserInfo(e,"lastName"),i=getFieldValueFromUserInfo(e,"secondLastName"),e=getFieldValueFromUserInfo(e,"nickname"),isVarNotNull(o)&&(n=o),isVarNotNull(t)&&(n=n+" "+t),isVarNotNull(i)&&!1===isVarNotNull(n)&&(n=i),!1===isVarNotNull(n)&&isVarNotNull(e)&&(n=e)),n}function getUserInfoFromAccountOrUser(){var e={};return isVarNotNull(account)&&isVarNotNull(account.profile)?e=account:isVarNotNull(user)&&(e=user),e}function insertPictureInDomElement(e,o,t,i){var n=!1;return void 0!==e&&e&&void 0!==o&&o&&options.hasPaywall&&options.hasEcommerce&&(t='<img id="'+("vocento-login-screen-picture-"+o)+'" src="'+t+'" />',void 0!==i&&i&&(t='<a href="'+i+'">'+t+"</a>"),void 0!==(e=$(e))&&e&&e.length&&e.html(t),n=!0),n}function resetCaptchaFirefox(e){captcha=void 0,$(".pls-container").remove(),$("#"+e).empty(),captcha=grecaptcha.render(e,{sitekey:"6LdmZgYTAAAAADQC06sXwn22WX7n0s4Nc1cuj-v7",callback:captchaVerifyCallback})}var captchaVerifyCallback=function(e){var o=$("#g-recaptcha").find("iframe"),t=$("#g-recaptcha-login").find("iframe");o.removeAttr("name"),t.removeAttr("name");o=$("#g-recaptcha").find("textarea"),t=$("#g-recaptcha-login").find("textarea");$("#g-recaptcha-response").removeAttr("name"),o.removeAttr("name"),t.removeAttr("name"),$("#vocento-error-captcha-msg").html(""),$("#vocento-error-captcha-msg").removeClass("gigya-error-msg gigya-error-msg-active")};function addParentDiv(e,o,t,i){var n,r,a=!1;return void 0===e||!e||void 0!==(n=$("."+e+":visible"))&&n&&n.length&&((r=!1)===(r=void 0!==(e=n.parents('div[class^="'+t+'"]'))&&e&&e.length?!0:r)&&(r="",void 0!==o&&o&&(r=r+" id='"+o+"' "),void 0!==t&&t&&(r=r+" class='"+t+"' "),n.wrap(r="<div "+(r=void 0!==i&&i?r+" "+i+" ":r)+"></div>")),a=!0),a}function removeParentDiv(e,o,t){var i=!1;return void 0===e||!e||void 0!==(e=$("."+e+":visible"))&&e&&(void 0===o||!o||void 0!==(o=$("#"+o))&&o&&o.length&&o.remove(),void 0===t||!t||void 0!==(t=$("."+t))&&t&&t.length&&t.remove(),i=!0),i}function removeVoidElement(e){if(void 0!==e&&e){var o="",t=0;if(void 0!==(o=$("."+e))&&o&&o.length)for(t=0;t<o.length;t++)(void 0===o[t].children||!o[t].children||o[t].children.length<=0)&&o[t].remove();if(void 0!==(o=$("#"+e))&&o&&o.length)for(t=0;t<o.length;t++)(void 0===o[t].children||!o[t].children||o[t].children.length<=0)&&o[t].remove()}return!1}function addModalClassToScreen(e,o){var t=!1;return void 0!==e&&e&&void 0!==o&&o&&(void 0!==(e=$("."+e+":visible"))&&e&&e.length&&(e.addClass(o),t=!0)),t}function getEventScreenName(e){var o=!1,t="";return void 0!==e&&e&&("string"!==e.nextScreen&&e.nextScreen&&(t=e.nextScreen),"string"!==e.currentScreen&&e.currentScreen&&(t=e.currentScreen),o=t="string"!==e.screen&&e.screen?e.screen:t),o}function findFieldInScreenByName(e,o){var t=!1,i="";return t="string"!==o&&o&&"string"!==e&&e&&"string"!==(i="string"===(i="string"===(i=$("#"+o+'[data-screenset-element-id="'+o+'"] *[name="'+e+'"]:first'))||!i||0===i.length?$('[data-screenset-element-id="'+o+'"] *[name="'+e+'"]:first'):i)||!i||0===i.length?$("#"+o+' input[name="'+e+'"]:first'):i)&&i&&i.length?i:t}function getFieldValueInScreenByName(e,o){var t=!1;return"string"!==o&&o&&"string"!==e&&e&&(void 0!==(o=findFieldInScreenByName(e,o))&&o&&o.length&&(t=o.val())),t}function findFieldInScreen(e,o){var t,i,n=!1;return void 0!==o&&o&&(t=i="","string"!==(i=getEventScreenName(o))&&i&&("string"!==(t=$("#"+i+'[data-screenset-element-id="'+i+'"] *[name="'+e+'"]:first'))&&t&&0!==t.length||(t=$('[data-screenset-element-id="'+i+'"] *[name="'+e+'"]:first'))),"string"!==t&&t&&t.length&&(n=t)),n}function scrollScreenToElementPosition(e,o){var t=!1;return void 0!==e&&e&&void 0!==o&&o&&!1!==getEventScreenName(o)&&(e=findFieldInScreen(e,o),o=$("#header"),!1!==e&&void 0!==o&&o&&o.length&&(e=e.offset().top-$("#header").offset().top,$("html, body").animate({scrollTop:e},200),t=!0)),t}function validateEmailForRegistration(n){return new promiseNamespace(function(o,e){var t=findFieldInScreen("email",n),i=t.val();if(!(void 0!==t&&t&&void 0!==i&&i&&0<=i.search(options.emailRegex)))return o();getAccountStatus(i).done(function(e){if((o(e),200===e.statusCode)&&(void 0!==e.result&&e.result&&void 0!==e.result.accountStatusCode&&e.result.accountStatusCode))switch(e.result.accountStatusCode){case 200008:showPopUpRrssNotCompleted(e,i);break;case 200007:if(e.result.accounts[0].providers.indexOf("facebook")<0){bindOnClickEventToGoogleLogin(),bindOnClickEventToSetPasswordForGoogleUser();break}bindOnClickEventToFacebookLogin(),bindOnClickEventToSetPasswordForFacebookUser();break;case 200010:bindOnClickEventToGoogleLogin(),bindOnClickEventToFacebookLogin(),bindOnClickEventToSetPasswordForFacebookUser()}})})}function showPopUpRrssNotCompleted(e,t){var o="Facebook";"facebook"!==e.result.accounts[0].providers&&(o="Google"),gigya.accounts.showScreenSet({screenSet:"ScreensetUnificado-RegistrationLogin",startScreen:"gigya-not-complete-registration-screen",dialogStyle:"legacy",context:{rrss:o,email:t},onAfterScreenLoad:function(e){$("form:visible").trigger("reset"),$("<div class='vocuser-overlay'></div>").insertBefore(".gigya-screen-dialog");var o=$("#vocuser-gigya-rrss-detected");isVarNotNull(o)&&0<o.length&&isVarNotNull(e.context.rrss)&&0<e.context.rrss.length&&(o.html(e.context.rrss),bindOnClickToFinishRrssRegistration(e.context.rrss)),simpleStorageDependency.set("user.email",t,{TTL:3e5}),bindOnClickToDismissRrssNotCompleted()},onHide:function(e){$(".vocuser-overlay").remove();var o=$('form:visible input[data-gigya-name="email"]'),t=$('form:visible span[data-bound-to="email"]');void 0!==t&&t&&t.length&&void 0!==o&&o&&o.length&&protectedFunctions.removeError(o,t)}})}function isVarNotNull(e){return void 0!==e&&e?!0:!1}function thirdPartyCookiesBlocked(){var e=!1;return e=void 0!==window.vocento_cd3&&"0"===window.vocento_cd3?!0:e}function gigyaCnameEnable(){var e=!1;return isVarNotNull(options)&&isVarNotNull(options.enableCNAME)&&!0===thirdPartyCookiesBlocked()&&(e=!0,isVarNotNull(gigya)&&isVarNotNull(gigya.thisScript)&&isVarNotNull(gigya.thisScript.globalConf)&&(gigya.thisScript.globalConf.enableSSOToken=options.enableCNAME)),e}function gigyaCnameSetSsoToken(){var e,o=!1;return isVarNotNull(options)&&isVarNotNull(options.enableCNAME)?(o=!0,void 0===options.extensionType||"ecommerce"!==options.extensionType&&"redencion"!==options.extensionType&&"upgrade"!==options.extensionType&&"regalo"!==options.extensionType||updateLastestBackUrl(getExtensionCustomReturnUrl()),e=void 0!==options.backURL&&options.backURL?options.backURL:window.location.href,sendDataToNewRelic({eventNameFired:"setSSOToken",additionalInformation:"redirectUrl: "+e}),!0===shouldRedirectWithITP()?gigyaITPSsoContinue():gigya.setSSOToken({redirectURL:e})):sendDataToNewRelic({eventNameFired:"No realizado - setSSOToken",additionalInformation:"options.enableCNAME: "+options.enableCNAME+" ; browser: "+browser}),o}function getUrlParamValue(e){var i,o=null;return!0===isVarNotNull(e)&&(i={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,o,t){i[o]=t}),!0===isVarNotNull(i)&&void 0!==i[e]&&(o=i[e])),o}function getAndCleanUrlParamValueFromNfrylCookie(e){var o=null,t=getNfrylCookie();if(!0===isVarNotNull(e)&&!0===isVarNotNull(t)){var i={};t.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,o,t){i[o]=t});if(!0===isVarNotNull(i)&&void 0!==i[e]){o=i[e];try{var n=new RegExp("("+e+"=)(.*?&|.+$)").exec(t),r=t.replace(n[0],"");createCookieForNfryl(r="?"===r[r.length-1]||"&"===r[r.length-1]?r.substring(0,r.length-1):r)}catch(e){}}}return o}function backUrlGotParams(){var e=getNfrylCookie(),o=e.split("?")[1],t=e.split("#")[1];return!0===isVarNotNull(e)&&(void 0!==o||void 0!==t)}function setEmailVerifiedMessage(e){var o,t,i,n=!1;return-1<window.location.href.indexOf("comun/html/2014/verificacion-email.html")&&(t="Ha habido un error en la verificación de tu correo electrónico, por favor inténtelo más tarde.",!0===isVarNotNull(o=$("#gigya-vocento-container label"))&&o.length&&((i=[])[0]="¡Gracias! Tu correo electrónico ha sido verificado.",void 0!==e&&e||(i[0]="¡Gracias! Tu correo electrónico ha sido verificado y ya puedes iniciar sesión en la web o en la app. Recuerda navegar siempre identificado."),i[403002]="Este enlace ha caducado y tu registro, por seguridad, fue eliminado. Por favor, regístrate de nuevo.",i[400010]="Se ha producido un error en la verificación de la cuenta. Por favor, regístrate de nuevo.",i[400006]="El enlace no es correcto, por favor comprueba que has seleccionado el enlace completo. Si el problema continúa, podamos enviarte un nuevo mail para activar tu cuenta: intenta iniciar sesión y sigue las instrucciones.",i[206005]="¡Gracias! Tu correo electrónico ha sido verificado.",!0===isVarNotNull(e=getUrlParamValue("errorCode"))&&void 0!==i[e]&&(t=i[e]),o.text(t),n=!0)),n}function actionsAfterLastLoginIsSet(e){return createCookies(e,!1),evolokIdAndSynchronizeProductsOnLogin(e),void 0!==options.hasEcommerce&&options.hasEcommerce||reloadOnLoginForEcommerce(),options.reloadOnLogin||getAccountInfo({}),1}function actionsAfterLogin(o){setLastLogin({callback:function(){account=o,void 0!==user&&user||(user=o)}}).then(function(e){actionsAfterLastLoginIsSet(o)},function(e){actionsAfterLastLoginIsSet(o)})}function sendLoginEventToNewRelicOnGigyaResponse(e){if(void 0!==e&&e&&void 0!==e.operation&&e.operation&&void 0!==e.errorCode&&!(e.operation.indexOf("accounts.login")<0)){var o=void 0!==e.callId&&e.callId?e.callId:"",t=compareGigyaErrorCode(e.errorCode,0),i=e.errorCode.toString(),n=-1<i.indexOf("206"),i=-1<i.indexOf("2000");if(!(t||n||i))return sendDataToNewRelic({eventNameFired:"loginError",firedEventLogin:!1,callId:o,errorMessage:e.errorMessage,errorCode:e.errorCode,additionalInformation:e.errorDetails+" "+e.statusMessage}),1;i=getCookieVocUserInformation("firedEventNotifyLogin");return(null==i||void 0!==i&&!1===i)&&(sendDataToNewRelic({eventNameFired:"login",firedEventLogin:!0,callId:o,errorCode:e.errorCode,additionalInformation:""}),1)}}function facebookTrackInit(e){var o,t,i=!1,n=!1,r=void 0!==e&&e?e:"1571136016517980";return"undefined"!=typeof fevents&&!0===fevents&&(n=!0),t=window,e=document,t.fbq||(o=t.fbq=function(){void 0!==o.callMethod&&o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},t._fbq||(t._fbq=o),(o.push=o).loaded=!0,o.version="2.0",o.queue=[],(t=e.createElement("script")).async=!0,t.src="https://connect.facebook.net/en_US/fbevents.js",(e=e.getElementsByTagName("script")[0]).parentNode.insertBefore(t,e)),"function"==typeof fbq&&!1===n&&(fbq("init",r),i=!0),i}function facebookTrackEvent(e){var o=!1;return void 0!==e&&e&&"function"==typeof fbq&&(fbq("track",e),o=!0),o}function facebookInyectTrackingPixelHtml(e,o,t){var i,n,r=!1;return void 0!==e&&e&&(i="",n=void 0!==o&&o?o:"1571136016517980",(o=document.createElement("img")).height="1",o.width="1",o.style="display:none",o.src="https://www.facebook.com/tr?id="+n+"&ev="+e+"&noscript=1",void 0!==(e=document.createElement("noscript"))&&e&&(e.appendChild(o),(i=void 0===t||!t||void 0===(i=document.getElementById(t))||!i?document.body:i).appendChild(e),r=!0)),r}function addService(e,o){void 0!==e&&e&&void 0!==o&&o&&(protectedFunctions.setCurrentService(e),protectedFunctions.checkService(o),o={e:o,account:account},eventServiceAdd.resolve(o))}function getGigyaResponse(e){var o=null;return void 0!==e&&e&&(void 0!==e.gigya_event&&e.gigya_event&&(o=e.gigya_event),null===(o=void 0!==e.response&&e.response?e.response:o)&&(o=e)),o}function setUserNewslettersByFieldAdsMedia(e){var o,t=!1;return void 0!==e&&e&&(o=!1,void 0!==(o=void 0!==(e=getGigyaResponse(e)).data&&e.data&&void 0!==e.data.adsMedia?e.data.adsMedia:o)&&o&&(o={UID:e.UID,UIDSignature:e.UIDSignature,signatureTimestamp:e.signatureTimestamp},e=options.authServerVocCore+"/vocuser/v1/media/newsletter/user/suscribe/byfield/adsmedia",$.ajax({url:e,type:"POST",data:o,async:!0,dataType:"json",success:function(e){t=e},error:function(e){t=e,log("setUserNewslettersByFieldAdsMedia:: Llamada a la api ajax errónea.","error")}}))),t}function newslettersAutosuscribe(e){var o=options.authServerVocCore+"/vocuser/v1/user/newsletters/autosubscribe";try{void 0!==e&&e&&"object"==typeof e&&$.ajax({url:o,type:"POST",data:e,async:!0,dataType:"json",success:function(e){},error:function(e){}})}catch(e){}}function updateDeleteUserNotificationFrecuency(e){var o=options.authServerVocCore+"/vocuser/v1/user/notifications_removal_freq/update";if(void 0!==e.UID&&e.UID&&void 0!==e.UIDSignature&&e.UIDSignature&&void 0!==e.signatureTimestamp&&e.signatureTimestamp){e={UID:e.UID,UIDSignature:e.UIDSignature,signatureTimestamp:e.signatureTimestamp,frequency:"weekly"};try{$.ajax({url:o,type:"POST",data:e,async:!0,dataType:"json",success:function(e){},error:function(e){}})}catch(e){}}}function createUserInSelligent(e){var o=options.authServerVocCore+"/vocuser/v1/queue",e={uid:e,type:"gigya",action:[{create_user_selligent:{}}]};if(""===options.envVoccore)try{$.ajax({url:o,type:"POST",data:JSON.stringify(e),dataType:"json",success:function(e){},error:function(e){}})}catch(e){}}function updateUserCommunicationsInSelligent(){if(""===options.envVoccore){var e={UID:protectedFunctions.getCookieAutoNewsletters()},o=options.authServerVocCore+"/vocuser/v1/user/selligent/update";try{$.ajax({url:o,type:"POST",data:JSON.stringify(e),async:!0,dataType:"json",success:function(e){},error:function(e){}})}catch(e){}}}function compareGigyaErrorCode(e,o){return void 0!==e&&void 0!==o&&e==o?!0:!1}function hideElement(e){var o=!1;return void 0===e||!e||void 0!==(e=$(e))&&e&&(e.hide(),o=!0),o}function showElement(e){var o=!1;return void 0===e||!e||void 0!==(e=$(e))&&e&&(e.show(),o=!0),o}function checkUserServiceAlreadyRegistered(e,o){var t=!1;if(void 0!==e&&e&&void 0!==o&&o&&void 0!==o[options.ssoGroup]&&o[options.ssoGroup])for(var i=o[options.ssoGroup].split(","),n=0;n<i.length;n++)e===i[n]&&(t=!0);else t=!1;return t}function getCustomerServiceFromCookieAndUpdateOptions(){var e=!1,o=getCookieVocUserInformation("customerService");return void 0!==o&&o&&(void 0!==o.serviceReference&&o.serviceReference&&(options.serviceReference=o.serviceReference),void 0!==o&&o&&void 0!==o.serviceId&&o.serviceId&&(options.serviceId=o.serviceId.toString(),e=!0)),e}function updateCustomerServiceInCookieVocUser(e,o){var t=!1;return void 0!==e&&e&&(e={serviceId:e},void 0!==o&&o&&(e.serviceReference=o),t=updateFieldInCookieVocUser("customerService",e,!0)),t}function updateProductIdInCookieVocUser(e){var o=!1;return void 0!==e&&e&&(o=updateFieldInCookieVocUser("productId",e,!0)),o}function setFieldInScreenForm(e,o,t){var i=!1;return void 0!==o&&o&&void 0!==e&&e&&(void 0!==(o=findFieldInScreenByName(e,o))&&o&&o.length&&(o.val(t),i=!0)),i}function initEventListener(e){return $("body")}function getMainEventListener(){return mainEventListener}function initEventNamespace(){return eventPrefixNamespace+eventPrefixSeparator+eventProjectNamespace+eventSeparator}function getEventNamespaceForBody(){return"vocento.gigya."}function getEventNamespaceForVoonto(){return"vocento.vocuser:"}function getEventNamespace(){return eventNamespace}function getEventSeparator(){return eventSeparator}function hideFieldError(e){return void 0===e||!e||void 0!==(e=$(e))&&e&&e.length&&e.removeClass("gigya-error gigya-error-msg gigya-error-msg-active"),!1}function getUserCommunicationsInfo(e,t){var i=!1;return 0<e.length&&$.each(e,function(e,o){t===o.ID&&(i=o)}),i}function getMarketingActionInfo(e){if(void 0!==e&&e){var o=void 0!==options.currentEnvironment&&options.currentEnvironment&&"pro"===options.currentEnvironment?"":"pre-";return $.ajax({url:"https://"+o+"catalogo-newsletters.vocento.com/marketing_action/list?code="+e,type:"GET",dataType:"json"})}}function getParticipantInfoFromUser(e,o){var t={};if(void 0===o.UID||o.UID.length<=0||void 0===o.UIDSignature||o.UIDSignature.length<=0||void 0===o.signatureTimestamp||o.signatureTimestamp.length<=0||void 0===o.profile||void 0===o.profile.email||o.profile.email.length<=0)return t;t={referenceId:e,clientOrigin:"GG",UID:o.UID,UIDSignature:o.UIDSignature,email:o.profile.email,signatureTimestamp:o.signatureTimestamp,status:"finished",source:"gigyaExtension"};t=searchFieldsInGigyaUserInfo(o.profile,["firstName","lastName","birthDay","birthMonth","birthYear","city","professionalHeadline"],t);return t=void 0!==o.data&&0<Object.keys(o.data).length?searchFieldsInGigyaUserInfo(o.data,["secondLastName","nif","phoneMobile","province","industry","entradas.idThirdpartyTransfer"],t):t}function searchFieldsInGigyaUserInfo(e,o,n){return $.each(e,function(t,i){$.each(o,function(e,o){t===o&&(n[t]=i)})}),n}function createNewParticipationByQuery(e){var o=options.authServerVocCore+"/vocuser/v1/participants";$.ajax({url:o,type:"POST",dataType:"json",data:e})}function createNewParticipation(e,o,t,i,n){var r=options.authServerVocCore+"/vocuser/v1/participants";void 0!==e&&e&&void 0!==o&&o&&void 0!==t&&t&&void 0!==i&&i&&void 0!==n&&n&&$.ajax({url:r,type:"POST",dataType:"json",data:{referenceId:e,clientOrigin:"GG",UID:o,email:n,UIDSignature:t,signatureTimestamp:i,status:"finished",edition:1},success:function(e){}})}function getParticipationCount(e,o){var t="",i=options.authServerVocCore+"/vocuser/v1/participants/count/";return t=void 0!==e&&e&&void 0!==o&&o?$.ajax({url:i+e+"/GG/"+o,type:"GET",dataType:"json",data:{referenceId:e,clientOrigin:"GG",UID:o},success:function(e){},error:function(e,o,t){log("Error "+t)}}):t}function createNewExtraUserData(e,o,t,i,n,r){var a=options.authServerVocCore+"/vocuser/v1/extrauserdata";void 0!==e&&e&&void 0!==o&&o&&void 0!==t&&t&&void 0!==i&&i&&void 0!==n&&n&&void 0!==r&&r&&$.ajax({url:a,type:"POST",dataType:"json",data:{UID:e,UIDSignature:o,signatureTimestamp:t,email:i,userType:"GG",extraData:n,serviceReference:r},success:function(e){}})}function getUserResetToken(e){var o,t="https://api.vocento.com/vocuser/media/www."+(o=getDomainTld((o=window.location.href.split("/"))[2]))+"/user/password/reset-by-token";if("pro"!==options.currentEnvironment&&(t="https://pre-api.vocento.com/vocuser/media/pre-www."+o+"/user/password/reset-by-token"),void 0!==e&&e)return $.ajax({url:t,type:"POST",dataType:"json",data:{vocuser:{email:e}}})}function dismissNotCompletedRrssAccount(e){var o=options.authServerVocCore+"/vocuser/v1/user/dismiss-incomplete-rrss-account";void 0!==e&&e&&$.ajax({url:o,type:"POST",dataType:"json",data:{email:e},success:function(e){}})}function verifyUserByUid(e){var o,t={},i="https://api.vocento.com/vocuser/media/www."+(o=getDomainTld((o=window.location.href.split("/"))[2]))+"/user";return"pro"!==options.currentEnvironment&&(i="https://pre-api.vocento.com/vocuser/media/pre-www."+o+"/user"),void 0!==e&&e&&(t={vocuser:{uid:e,data:{verified:!0}}}),$.ajax({url:i,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(t)})}function getAccountStatus(e){var o=options.authServerVocCore+"/vocuser/v1/user/account-status?email=";return $.ajax({url:o+encodeURIComponent(e),type:"GET",dataType:"json"})}function sendReminder(o){if(void 0!==o&&o){var e=options.authServerVocCore+"/vocuser/v1/user/send-reminder",t={email:o};try{$.ajax({url:e,type:"POST",dataType:"json",data:t,success:function(e){showLoadingSpinner(),null!==$.cookie(VOCUSER_THANKYOU_COOKIE_NAME)&&void 0!==$.cookie(VOCUSER_THANKYOU_COOKIE_NAME)||createCookieVocUserTemporal(o),updateLastestBackUrl(getUrlRegisterConfirmationScreen),redirectOnCallVocUserService(options.backURL,0)}})}catch(e){}}}function updateUserCommunications(e,o,t,i){var n=options.authServerVocCore+"/vocuser/v1/user/communication/subscribe";void 0!==e&&e&&void 0!==o&&o&&void 0!==t&&t&&void 0!==i&&i&&$.ajax({url:n,data:JSON.stringify({UID:e,UIDSignature:o,signatureTimestamp:t,newObject:i}),type:"POST",dataType:"json",contentType:"application/json",success:function(e){}})}function setEcommerceInfo(o,e,t){if(void 0!==t&&t&&void 0!==e&&e)try{$.ajax({url:t+e,type:"GET",dataType:"json",success:function(e){void 0!==e.statusCode&&200===e.statusCode&&void 0!==e.result&&e.result&&(void 0!==e.result.rtim&&e.result.rtim&&sendRtimDataToEvolok(e.result.rtim),void 0!==e.result.cart&&void 0!==e.result.cart.body&&void 0!==e.result.benefit&&printEcommerceCustomHtml(e.result.cart,e.result.benefit,o),void 0!==e.result.analytics&&fireEvent("analyticsProducts"+eventSeparator+"onDataReady",e.result.analytics))},error:function(e,o,t){log("setEcommerceInfo => ERROR en la llamada al api shopping Cart","error"),fireEvent("analyticsProducts"+eventSeparator+"onDataReady","")}})}catch(e){}else{var n={articleId:"",section:"funnel",category:"funnel",site:"",webtype:"estandard",Origen:"Magento",service:"ecommerce",funnel:"onPlus",funnelDate:"",funnelStep:"uno",funnelProducts:"",funnelProductsNames:""},t=getCookieVocUserInformation("rtim"),e=getCookieVocUserInformation("analytics");null!=t&&0<Object.keys(t).length&&$.each(t,function(t,i){i&&$.each(n,function(e,o){e===t&&(n[e]=i)})}),null!=e&&"undefined"!==e.productName&&null!==e.productName&&e.productName&&(n.funnelProductsNames=e.productName),n.funnelDate=(new Date).toISOString().split("T")[0],sendRtimDataToEvolok(n)}}function sendRtimDataToEvolok(e){addAdditionalParamsRtim();e=$.extend({},e,options.rtimAdditionalData),e=(void 0!==options.currentEnvironment&&options.currentEnvironment&&"pro"===options.currentEnvironment?options.evolokUrlForRtimData.pro:options.evolokUrlForRtimData.pre).concat($.param(e));if(void 0!==e&&e)try{$.ajax({url:e,type:"GET",dataType:"json",success:function(e){},error:function(e,o,t){log("sendRtimDataToEvolok => ERROR enviando los datos de RTIM","error")}})}catch(e){}}function addAdditionalParamsRtim(){var e=getCookieOriginalContent("ev_ss");options.rtimAdditionalData.ev_ss=void 0!==e&&e?e:"";e=getCookieOriginalContent("ev_sid");options.rtimAdditionalData.ev_sid=void 0!==e&&e?e:"";e=getCookieOriginalContent("ev_did");options.rtimAdditionalData.ev_did=void 0!==e&&e?e:""}function printEcommerceCustomHtml(e,o,t){void 0!==e.body&&0<e.body.length&&$("#"+t).find(".vocuser-ecommerce-shopping-cart").html(e.body)}function createAndSendAdditionalDataFilledAndJoinContest(e,o,t){t=protectedFunctions.prepareDataForAdditionalFilledMark(e,o,t);return protectedFunctions.setAccountInfo({data:t})}function performanceNow(){void 0!==window.performance&&window.performance&&(window.performance={});var e=void 0!==performance.now?performance.now:void 0!==performance.mozNow?performance.mozNow:void 0!==performance.msNow?performance.msNow:void 0!==performance.oNow?performance.oNow:void 0!==performance.webkitNow?performance.webkitNow:void 0!==Date.now?Date.now:function(){return Date().getTime()},o=0;try{o=e()}catch(e){}return o}function areCookiesEnabled(){try{var e="cookietest";document.cookie=e+"=1";var o=-1!==document.cookie.indexOf(e+"=");return document.cookie=name+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",o}catch(e){return!1}}function getCookieOriginalContent(e){var o,t=!1;return 0<document.cookie.length&&(-1!==(o=document.cookie.indexOf(e+"="))&&(o=o+e.length+1,-1===(e=document.cookie.indexOf(";",o))&&(e=document.cookie.length),t=document.cookie.substring(o,e))),t}function vocUserGetData(e){$.cookie.raw=!0;var o=$.cookie("voc_uid"),t="";return void 0===o||!o||!(o={cookie:o="undefined"!=typeof gigyaUX&&gigyaUX&&(-1<browser.indexOf("Safari")||-1<browser.indexOf("Mobile")||-1<browser.indexOf("-?"))?decodeURIComponent(o):o})===(t=decodeJsonCookieToObject(o))&&(t=decodeJsonCookieToObject(o)),void 0===t||void 0===e?t:t[e]}function setCookiePureJS(e,o,t,i,n,r){var a,s=!1;return n+="; SameSite=None; Secure",a=t?((a=new Date).setTime(a.getTime()+24*t*60*60*1e3),"; expires="+a.toUTCString()):"",!0!==r&&void 0!==getCookiePureJS(e)&&null!==getCookiePureJS(e)||(document.cookie=e+"="+o+a+"; path="+n+"; domain="+i,s=!0),s}function getCookiePureJS(e,o){var t=null;if(void 0===e||!e||document.cookie.length<=0)return t;if(-1===(i=document.cookie.indexOf(e+"=")))return t;var i=i+e.length+1,e=document.cookie.indexOf(";",i);-1===e&&(e=document.cookie.length);try{t=void 0!==o&&!1===o?document.cookie.substring(i,e):decodeURIComponent(document.cookie.substring(i,e))}catch(e){t=null}return t}function getProducts(e){var o="getProducts: El usuario no está logueado.";return void 0!==protectedFunctions.simpleStorageDependency&&protectedFunctions.simpleStorageDependency?void 0!==account&&account&&void 0!==account.UID&&account.UID?o=simpleStorageDependency.get("products."+account.UID):void 0!==e&&e&&(o=simpleStorageDependency.get("products."+e)):o=!1,log(o,"info"),o}function flushProducts(e,o){void 0!==account&&account&&void 0!==account.UID&&account.UID||(account=o),void 0!==user&&user&&void 0!==user.UID&&user.UID||(user=o);o="flushProducts: El usuario no está logueado.";return void 0!==account&&account&&void 0!==account.UID&&account.UID&&void 0!==simpleStorageDependency&&simpleStorageDependency&&(simpleStorageDependency.deleteKey("products."+account.UID),synchronizeProducts(account,e,!1),o="flushProducts: borrado la clave de productos del usuario y llamada a synchronizeProducts()."),log(o,"info"),o}function getTrials(e){var o="getTrials: El usuario no está logueado.";return void 0!==simpleStorageDependency&&simpleStorageDependency&&(void 0!==account&&account&&void 0!==account.UID&&account.UID?o=simpleStorageDependency.get("trials."+account.UID):void 0!==e&&e&&(o=simpleStorageDependency.get("trials."+e))),log(o,"info"),o}function getNormalizedProductsFromSimpleStorage(e){var o={addRolesToEvolokResponse:"",data:[]};return void 0!==e&&e&&(o.data=e),o}function synchronizeProducts(e,o,t,i){log("synchronizeProducts => Lanzando consulta al API","info");var n=!1,r=getEventSeparator(),a=getVoontoApp(),s="function"==typeof i&&i?i:function(){},c="/api/v1/paywall/busSynchronize";options.hasPaywall||(c="/api/v1/bus/userProducts");var d,i=options.authServer+c;if(void 0===options.hasEcommerce||!options.hasEcommerce)return handleSynchronizeProductsError({},c,"busSynchronize llamada no realizada. El medio NO tiene hasEcommerce activado - synchronizeProductsOnLogin"),void s();if(o=!(void 0===o||!o),void 0!==protectedFunctions.simpleStorageDependency&&protectedFunctions.simpleStorageDependency&&(n=protectedFunctions.simpleStorageDependency.get("busSynchronizeFlushed")),!1===flushedProducts&&(void 0===n||!0!==n)||!0==o){i+="?callback=?",getBusSynchronizeFirstCallFromVocUserInformationCookie()&&(void 0===t||!1!==t)||(i+="&dataFromCache=false");try{void 0!==options.serviceCallEkosTechnicalSynchronized&&options.serviceCallEkosTechnicalSynchronized?(timeBeforeCallingUserTypeEndpoint=window.performance.now(),handleResponseServiceEkosTechnicalSynchronized(d=sendRequestToServiceEkosTechnicalSynchronized()),d.then(function(e){flushedProducts=!0,s()},function(e){s()})):($.ajax({url:i,data:getUserSignature(e,!1),contentType:"application/json",dataType:"jsonp",success:function(e){updateBusSynchronizeFirstCallInCookieVocUserInformation(),handleSynchronizeProductsSuccess(e,c),s()},error:function(e,o,t){handleSynchronizeProductsError(e,c,"Error en la llamada ajax a bus(onError)"),s()}}),flushedProducts=!0)}catch(e){handleSynchronizeProductsError(e,c,"Error en llamada ajax a bus. Entrado en catch"),s()}}else{fireEvent("products"+r+"onReady",e={e:"productsOnReadyOK",account:e}),eventProductsOnReady.resolve(e);e=getNormalizedProductsFromSimpleStorage(getProducts());protectedFunctions.voontoPromised("productsonready",{responseProductsOnReady:e},a),sendDataToNewRelic({eventNameFired:"busSynchronize",errorMessage:"",additionalInformation:"busSynchronize llamada no realizada. No se han encontrado productos o ya se llamo - synchronizeProducts"});setVocPaywallCookie(!1)}}function updateBusSynchronizeFirstCallInCookieVocUserInformation(){return updateFieldInCookieVocUser("busSynchronizeFirstCall",!0,!0)}function getBusSynchronizeFirstCallFromVocUserInformationCookie(){var e=getCookieVocUserInformation("busSynchronizeFirstCall");return e=void 0===e||!e?!1:e}function checkPaywallId(t,i){var n=!1;if(void 0===options.hasPaywall||!options.hasPaywall)return log("checkPaywallId => No se ha realizado la llamada a /evolokId ; El medio no tiene paywall; hasPaywall = false","info"),sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"",additionalInformation:"EvolokID llamada no realizada. El medio NO tiene hasPaywall activado - checkPaywallId"}),n;var e,o,r=getGigyaResponse(t);return void 0!==r&&r&&void 0!==r.data&&r.data?void 0!==r.data.paywall&&void 0!==r.data.paywall.userId&&r.data.paywall.userId?(sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"",additionalInformation:"EvolokID llamada no realizada. El usuario ya tiene EvolokID - checkPaywallId"}),void 0!==i&&i&&"function"==typeof i&&i(t)):(r.profile,r.data,o=encodeURIComponent(r.profile.email),e=safeEncodeUserSignature(r.UID,r.UIDSignature,r.signatureTimestamp),o=options.authServer+"/api/v1/evolokId?"+e+"&email="+o,$.ajax({url:o+"&callback=?",contentType:"application/json",dataType:"jsonp",success:function(e){var o;e.success?(log("checkPaywallId => ID paywall ("+e.uid+")","info"),sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"",additionalInformation:"EvolokID success. Response => Evolok ID: "+e.uid+", UID: "+r.UID+", email: "+r.profile.email+" - checkPaywallId"}),(o={paywall:{}}).paywall.userId=e.uid,updateAccountData(o),log("Seteando paywall id: "+account.data.paywall.userId,"info"),log(account,"info"),setAccountInfo({data:o}),void 0!==t&&t&&void 0!==t.data&&t.data&&(t.data.paywall={},t.data.paywall.userId=e.uid),void 0!==i&&i&&"function"==typeof i&&i(t),n=!0):(log("checkPaywallId => ERROR obteniendo ID paywall del usuario","error"),sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"Se ha realizado la llamada a Evolok, pero la respuesta no ha sido success",additionalInformation:"EvolokID error unsuccess response - checkPaywallId"}))},error:function(e,o,t){log("checkPaywallId => ERROR obteniendo ID paywall del usuario - xhr","error"),sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"Error en la llamada ajax a evolok",additionalInformation:"EvolokID ajax error - checkPaywallId"})}})):sendDataToNewRelic({eventNameFired:"evolokId",errorMessage:"",additionalInformation:"EvolokID llamada no realizada. El usuario no tiene datos para realizar llamada - checkPaywallId"}),n}function getAllErrorsInScreen(e){var t=[];return $("#"+e).find("input:visible").each(function(e,o){void 0!==o&&void 0!==$(o).attr("name")&&$(o).attr("name").length&&$(o).hasClass("gigya-error")&&t.push($(o).attr("name"))}),t}function registerRRSSUser(e,o){var o={data:getHiddenRegistrationFields(),profile:getProfileFields(o.email),regToken:e},t={regToken:e},o=setAccountInfo(o);showLoadingSpinner();o.then(function(e){finalizeRegistration(t)},function(e){finalizeRegistration(t)})}function getHiddenRegistrationFields(){var e=options.ssoGroup,o={};o[e]=!0;var t={};return t[e]=options.service,{registration:{ssoGroup:options.ssoGroup,service:options.service,domain:window.location.hostname,url:window.location.href,returnUrl:options.backURL,browserAgent:navigator.userAgent,system:{version:protectedFunctions.version(),name:options.systemName},privacyPolicy:options.privacyPolicy},legaltermsLastUpdate:options.legaltermsLastUpdate,isImported:!1,legalterms:o,services:t}}function getProfileFields(e){return{nickname:generateUniqueNickname(e)}}function generateUniqueNickname(e){return e.split("@")[0]+"_"+(new Date).getMilliseconds()+Math.floor(10*Math.random()+1)}var protectedFunctions={showLogin:showLogin,showRegistration:showRegistration,showProfile:showProfile,showChangePasswdProfile:showChangePasswdProfile,showProfileUpdated:showProfileUpdated,logout:logout,showScreenSet:showScreenSet,setAccountInfo:setAccountInfo,socialLogin:socialLogin,safeEncodeUserSignature:safeEncodeUserSignature,setCurrentService:setCurrentService,getCurrentService:getCurrentService,insertPictureInDomElement:insertPictureInDomElement,getDomainForSsoGroup:getDomainForSsoGroup,getAreaPersonalDomain:getAreaPersonalDomain,addParentDiv:addParentDiv,removeParentDiv:removeParentDiv,addModalClassToScreen:addModalClassToScreen,removeSimpleStorage:removeSimpleStorage,findFieldInScreen:findFieldInScreen,removeVoidElement:removeVoidElement,getEventProductsOnReady:function(){return eventProductsOnReady},getAccount:function(){return account},getUser:function(){return user},getReactFramework:function(){return reactFw},getReactDOM:function(){return reactDOM},setReactFramework:function(e){reactFw=e},setReactDOM:function(e){reactDOM=e},createCookie:createCookie,fireEvent:fireEvent,getUserSignature:getUserSignature,getUserType:getUserType,checkService:checkService,resetCaptchaFirefox:resetCaptchaFirefox,captchaVerifyCallback:captchaVerifyCallback,getSectionsWithExternalFields:getSectionsWithExternalFields,thirdPartyCookiesBlocked:thirdPartyCookiesBlocked,facebookTrackInit:facebookTrackInit,facebookTrackEvent:facebookTrackEvent,facebookInyectTrackingPixelHtml:facebookInyectTrackingPixelHtml,addService:addService,setUserNewslettersByFieldAdsMedia:setUserNewslettersByFieldAdsMedia,isFirstLogin:isFirstLogin,userCreatedWithinTenMinutes:userCreatedWithinTenMinutes,isSiteAreaPersonal:isSiteAreaPersonal,resendVerificationCode:resendVerificationCode,resetPassword:resetPassword,switchScreen:switchScreen,getNfrylCookie:getNfrylCookie,createCookieForNfryl:createCookieForNfryl,removeNfrylCookie:removeNfrylCookie,findFieldInScreenByName:findFieldInScreenByName,getFieldValueInScreenByName:getFieldValueInScreenByName,hideScreenSet:hideScreenSet,registerUI:registerUI,saveLastServiceInCookieVocUser:saveLastServiceInCookieVocUser,getLastServiceFromVocUserInformationCookie:getLastServiceFromVocUserInformationCookie,onScreenSubmitScrollToFirstError:onScreenSubmitScrollToFirstError,onScreenSubmitChangeSubmitButtonText:onScreenSubmitChangeSubmitButtonText,showAllErrorsOnFieldTab:showAllErrorsOnFieldTab,setButtonMessage:setButtonMessage,showLoadingSpinner:showLoadingSpinner,hideLoadingSpinner:hideLoadingSpinner,getUrlRegisterConfirmationScreen:getUrlRegisterConfirmationScreen,getUrlRegisterPendingConfirmationScreen:getUrlRegisterPendingConfirmationScreen,getUrlPasswdSendScreen:getUrlPasswdSendScreen,getUrlPasswordChangedScreen:getUrlPasswordChangedScreen,getUrlExpiredPasswordTokenScreen:getUrlExpiredPasswordTokenScreen,getUrlInterestsScreen:getUrlInterestsScreen,getUrlProfileScreen:getUrlProfileScreen,createCookieVocUserTemporal:createCookieVocUserTemporal,getCookieVocUserTemporal:getCookieVocUserTemporal,removeCookieVocUserTemporal:removeCookieVocUserTemporal,getDomainTld:getDomainTld,getSubdomainDomainTld:getSubdomainDomainTld,createCookieAutoNewsletters:createCookieAutoNewsletters,getCookieAutoNewsletters:getCookieAutoNewsletters,removeAutoNewslettersCookie:removeAutoNewslettersCookie,updateUserCommunicationsInSelligent:updateUserCommunicationsInSelligent,createUserInSelligent:createUserInSelligent,updateDeleteUserNotificationFrecuency:updateDeleteUserNotificationFrecuency,newslettersAutosuscribe:newslettersAutosuscribe,bindOnClickEventToDomElement:bindOnClickEventToDomElement,bindOnClickEventToDomElementName:bindOnClickEventToDomElementName,unbindOnClickEventToDomElement:unbindOnClickEventToDomElement,redirectToUrl:redirectToUrl,redirectToBackUrl:redirectToBackUrl,redirectOnCallVocUserService:redirectOnCallVocUserService,updateLastestBackUrlWithUserFieldReturnUrl:updateLastestBackUrlWithUserFieldReturnUrl,updateLastestBackUrl:updateLastestBackUrl,updateReturnUrlInVocUserCookie:updateReturnUrlInVocUserCookie,updateReturnUrlTimeoutInVocUserCookie:updateReturnUrlTimeoutInVocUserCookie,getCookieVocUserInformation:getCookieVocUserInformation,compareGigyaErrorCode:compareGigyaErrorCode,checkUserFlowUrlsContains:checkUserFlowUrlsContains,checkBackUrlCookieContains:checkBackUrlCookieContains,hideElement:hideElement,showElement:showElement,checkUserServiceAlreadyRegistered:checkUserServiceAlreadyRegistered,sendCustomerService:sendCustomerService,getCustomerServiceFromCookieAndUpdateOptions:getCustomerServiceFromCookieAndUpdateOptions,saveLastActionInVocUserCookie:saveLastActionInVocUserCookie,saveExtensionFlowUrlInVocUserCookie:saveExtensionFlowUrlInVocUserCookie,updateCustomerServiceInCookieVocUser:updateCustomerServiceInCookieVocUser,setFieldInScreenForm:setFieldInScreenForm,saveRegTokenOnRegister:saveRegTokenOnRegister,updateFieldInCookieVocUser:updateFieldInCookieVocUser,updateFieldInCookieVocUid:updateFieldInCookieVocUid,saveServiceAndServices:saveServiceAndServices,getMainEventListener:getMainEventListener,showLoginAdditionalDataPage:showLoginAdditionalDataPage,getUrlAdditionalDataScreen:getUrlAdditionalDataScreen,checkAdditionalDataFilled:checkAdditionalDataFilled,setAdditionalDataStructure:setAdditionalDataStructure,enableAdditionalData:enableAdditionalData,isActivatedAdditionalData:isActivatedAdditionalData,getEventAdditionalData:getEventAdditionalData,objectHasProperties:objectHasProperties,getValueFromObjectProperties:getValueFromObjectProperties,getInterestsActivationStatus:getInterestsActivationStatus,mustToShowAdditionalDataPage:mustToShowAdditionalDataPage,getAdditionalManifest:getAdditionalManifest,prepareDataForAdditionalFilledMark:prepareDataForAdditionalFilledMark,activateAdditionalData:activateAdditionalData,getDataFromNewsLettersCookie:getDataFromNewsLettersCookie,getNlsFreeZone:getNlsFreeZone,saveNlsOnLogin:saveNlsOnLogin,saveNlsOnRegister:saveNlsOnRegister,createStringResponseForCookie:createStringResponseForCookie,getNewslettersFieldsChecked:getNewslettersFieldsChecked,getNewslettersChecksBox:getNewslettersChecksBox,loadNewslettersListFromResponse:loadNewslettersListFromResponse,validateZipNumberAndGetData:validateZipNumberAndGetData,simpleStorageDependency:protectedFunctionsSimpleStorageDependency,getEventNamespace:getEventNamespace,getEventSeparator:getEventSeparator,addDataValidation:addDataValidation,dataValidation:dataValidation,getResendEmailCookie:getResendEmailCookie,hasToResendEmailCookieFound:hasToResendEmailCookieFound,updateFieldInCookieResend:updateFieldInCookieResend,updateSendedInResendCookie:updateSendedInResendCookie,hasToRemoveCookieResend:hasToRemoveCookieResend,removeResendMailVerficationCookie:removeResendMailVerficationCookie,getGigyaResponse:getGigyaResponse,updateAccountData:updateAccountData,setCookiePureJS:setCookiePureJS,voontoPromised:voontoPromised,getVoontoApp:getVoontoApp,reloadOnLoginForEcommerce:reloadOnLoginForEcommerce,evolokIdAndSynchronizeProductsOnLogin:evolokIdAndSynchronizeProductsOnLogin,getCookiePureJS:getCookiePureJS,bindOnClickEventToLogin:bindOnClickEventToLogin,bindOnClickEventToLogout:bindOnClickEventToLogout,bindOnClickEventToLinkingAccounts:bindOnClickEventToLinkingAccounts,getFieldValueFromUserInfo:getFieldValueFromUserInfo,isVarNotNull:isVarNotNull,getUserInfoFromAccountOrUser:getUserInfoFromAccountOrUser,getUserTypeFromCookieOrSimpleStorage:getUserTypeFromCookieOrSimpleStorage,createNewParticipation:createNewParticipation,createNewParticipationByQuery:createNewParticipationByQuery,getParticipationCount:getParticipationCount,createAndSendAdditionalDataFilledAndJoinContest:createAndSendAdditionalDataFilledAndJoinContest,vocUserGetData:vocUserGetData,buildGenderWelcomeText:buildGenderWelcomeText,buildFirstNameText:buildFirstNameText,getSubdomainContenidoExtra:getSubdomainContenidoExtra,getVocEdition:getVocEdition,getDomains:function(){return domains},buildUserNameText:buildUserNameText,deleteCookie:deleteCookie,getCookieOriginalContent:getCookieOriginalContent,removeFromQualifioCookie:removeFromQualifioCookie,hideFieldError:hideFieldError,cookieFromQualifioNoExists:cookieFromQualifioNoExists,getFromQualifioCookie:getFromQualifioCookie,getNLfromGUI:getNLfromGUI,updateUserNL:updateUserNL,getAndCleanUrlParamValueFromNfrylCookie:getAndCleanUrlParamValueFromNfrylCookie,version:function(){return version},cookieNewPasswordExists:cookieNewPasswordExists,getUrlSetPassword:getUrlSetPassword,getUrlPasswordSeted:getUrlPasswordSeted,getUrlProfileUpdatedScreen:getUrlProfileUpdatedScreen,getUserResetToken:getUserResetToken,vocuserLogin:vocuserLogin,userDataReady:userDataReady,validateEmailForRegistration:validateEmailForRegistration,getAccountStatus:getAccountStatus,verifyUserByUid:verifyUserByUid,sendReminder:sendReminder,getMarketingActionInfo:getMarketingActionInfo,getUrlParamValue:getUrlParamValue,getParticipantInfoFromUser:getParticipantInfoFromUser,isActivateTestMode:isActivateTestMode,getPromiseNamespace:function(){return promiseNamespace},getAllErrorsInScreen:getAllErrorsInScreen,areCookiesEnabled:areCookiesEnabled,getUserUtils:function(){return userUtils},setEcommerceInfo:setEcommerceInfo,getExtensionCustomReturnUrl:getExtensionCustomReturnUrl,updateProductIdInCookieVocUser:updateProductIdInCookieVocUser,registerRRSSUser:registerRRSSUser,generateUniqueNickname:generateUniqueNickname,cleanInput:cleanInput,getCurrentMedia:function(){return currentMedia},getUserAuthenticated:function(){return authenticated},initCustomValidationPlugin:initCustomValidationPlugin,redirectToGigyaCentralLoginPage:redirectToGigyaCentralLoginPage,gigyaITPSsoContinue:gigyaITPSsoContinue,firePromiseUserRegistered:firePromiseUserRegistered,postMessageToWebkit:AppWebview.postMessageToWebkit,bindOnClickEventToSocialNetworkLoginWebview:bindOnClickEventToSocialNetworkLoginWebview,isAppWebView:isAppWebView,getAllQueryVarsFromUrl:getAllQueryVarsFromUrl,getUserCommunicationsInfo:getUserCommunicationsInfo,updateUserCommunications:updateUserCommunications,sendDataToNewRelic:sendDataToNewRelic,trackScreenSetsRenderTime:trackScreenSetsRenderTime,setTimeScreenSetIsRender:setTimeScreenSetIsRender,trackGigyaApiScreenSetsRenderTime:trackGigyaApiScreenSetsRenderTime,setBeforeRenderUserMenuWithCookieVocUid:setBeforeRenderUserMenuWithCookieVocUid,setRenderedUserMenuWithCookieVocUidObtained:setRenderedUserMenuWithCookieVocUidObtained,setRenderedUserMenuWithGigyaAccountsOnDataReady:setRenderedUserMenuWithGigyaAccountsOnDataReady,setRenderedUserMenuWithGigyaAccountsOnDataReadyObtained:setRenderedUserMenuWithGigyaAccountsOnDataReadyObtained,setRenderedUserMenuWithGigyaAccountsOnDataNoReady:setRenderedUserMenuWithGigyaAccountsOnDataNoReady,setRenderedUserMenuWithGigyaAccountsOnDataNoReadyObtained:setRenderedUserMenuWithGigyaAccountsOnDataNoReadyObtained,setRenderedUserMenuWithProductsOnReadyEndpoint:setRenderedUserMenuWithProductsOnReadyEndpoint,setRenderedUserMenuWithProductsOnReadyObtained:setRenderedUserMenuWithProductsOnReadyObtained},objectUnitTesting={getUrlParamValue:getUrlParamValue,getUidUsuarioGigya:getUidUsuarioGigya,checkUserFlowUrlsContains:checkUserFlowUrlsContains,saveRegTokenOnRegister:saveRegTokenOnRegister,saveLastActionInVocUserCookie:saveLastActionInVocUserCookie,saveExtensionFlowUrlInVocUserCookie:saveExtensionFlowUrlInVocUserCookie,init:init,checkUserServiceAlreadyRegistered:checkUserServiceAlreadyRegistered,updateCustomerServiceInCookieVocUser:updateCustomerServiceInCookieVocUser,findFieldInScreenByName:findFieldInScreenByName,getFieldValueInScreenByName:getFieldValueInScreenByName,setFieldInScreenForm:setFieldInScreenForm,getCustomerServiceFromCookieAndUpdateOptions:getCustomerServiceFromCookieAndUpdateOptions,updateFieldInCookieVocUser:updateFieldInCookieVocUser,saveLastServiceInCookieVocUser:saveLastServiceInCookieVocUser,saveServiceAndServices:saveServiceAndServices,initEventListener:initEventListener},publicFunctions={showLogin:showLogin,showScreenSet:showScreenSet,showRegistration:showRegistration,showProfile:showProfile,getUserType:getUserType,vocUserGetData:vocUserGetData,getAuthServer:getAuthServer,getProducts:getProducts,getTrials:getTrials,flushProducts:flushProducts,showSocialLoginCheckOut:showSocialLoginCheckOut,synchronizeProducts:synchronizeProducts,logout:function(e){return logout(e)},registerFlow:function(e){return registerFlow(e)},init:function(e){return init(e)},version:function(){return version},className:function(){return className},isFirstComment:function(){return isFirstComment},sendCustomerService:sendCustomerService,updateCustomerServiceInCookieVocUser:updateCustomerServiceInCookieVocUser,updateReturnUrlInVocUserCookie:updateReturnUrlInVocUserCookie,updateProductIdInCookieVocUser:updateProductIdInCookieVocUser,setAccountInfo:setAccountInfo,getObjectUnitTesting:function(){return objectUnitTesting}};return publicFunctions}return"v3"===vocento.vocuser.VERSION&&(window.Vocento="undefined"!=typeof Vocento&&Vocento?Vocento:{},Vocento.Gigya=vocuser),vocuser}),function(e,o){"use strict";"v3"===vocento.vocuser.VERSION?e.returnExports=o():"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("BaseFlow",o):"object"==typeof exports?module.exports=o():e.returnExports=o()}(this,function(){"use strict";function e(c,n){var r="4.0.0",d={},l=function(){},u={},p=n.getContext||function(){};function e(){return!0}function a(e,o){var t=!1,i="/comun/vocuser/v3/resources/css",n="mujerhoy"===e?"mujerhoy.com":"abc"===e?"abc.es":"vocento.com";switch(o){case"des":t="//des-cabeceras."+n+i+"/vocuser-additional-data.css";break;case"pre":t="//pre-cabeceras."+n+i+"/vocuser-additional-data.css";break;case"pro":t="//cabeceras."+n+i+"/vocuser-additional-data.css"}return t}function s(e,o){for(var t,i=e.length,n=0;n<i;n++){var r,a=u.findFieldInScreen(e[n],o);d.userIsInAppWebviewFlow&&a?(r=a.next(),t=r,void 0!==(r=a)&&r&&r.length&&(void 0===r.val()||r.val().length<=0)&&r.is("input")&&t.is("label")&&t.removeClass("form-control-placeholder--app")):void 0!==(a=a)&&a&&a.length&&void 0!==a.val()&&0<a.val().length&&a.is("input")&&a.addClass("has-data")}}return{getOptions:function(){return{legaltermsLastUpdate:"20130723",screenName:{updateLegalTerms:"gigya-update-legalterms-screen",verifyNickname:"gigya-change-nickname-screen",updateThankyou:"gigya-update-thanks-screen"},systemName:"vocuserFWJS",qualifioServiceId:"120",qualifioServiceReference:"QUALIFIO_SinValor"}},getInsertCustomField:function(){var e={fields:{registration_ssoGroup:new n.Row({field:{attr:{type:"hidden",name:"data.registration.ssoGroup",value:"options.ssoGroup"}}}),registration_service:new n.Row({field:{attr:{type:"hidden",name:"data.registration.service",value:"options.service"}}}),registration_domain:new n.Row({field:{attr:{type:"hidden",name:"data.registration.domain",value:"window.location.hostname"}}}),registration_url:new n.Row({field:{attr:{type:"hidden",name:"data.registration.url",value:"window.location.href"}}}),registration_returnUrl:new n.Row({field:{attr:{type:"hidden",name:"data.registration.returnUrl",value:"options.backURL"}}}),registration_browser:new n.Row({field:{attr:{type:"hidden",name:"data.registration.browserAgent",value:"navigator.userAgent"}}}),registration_system_version:new n.Row({field:{attr:{type:"hidden",name:"data.registration.system.version"}}}),registration_system_name:new n.Row({field:{attr:{type:"hidden",name:"data.registration.system.name",value:"options.systemName"}}}),registration_nick:new n.Row({field:{attr:{type:"hidden",name:"profile.nickname"}}}),registration_privacy_policy:new n.Row({field:{attr:{type:"hidden",name:"data.registration.privacyPolicy",value:d.privacyPolicy}}}),registration_province:new n.Row({field:{attr:{type:"hidden",name:"data.province",value:""}}}),registration_city:new n.Row({field:{attr:{type:"hidden",name:"profile.city",value:""}}}),registration_municipality:new n.Row({field:{attr:{type:"hidden",name:"data.municipality",value:""}}}),legalterms_last_update:new n.Row({field:{attr:{type:"hidden",name:"data.legaltermsLastUpdate",value:"options.legaltermsLastUpdate"}}}),imported:new n.Row({field:{attr:{type:"hidden",name:"data.isImported",value:"false"}}}),province:new n.Row({field:{attr:{type:"text",name:"data.province",value:"",placeholder:"Provincia"}}}),legalterms:new n.Row({field:{attr:{type:"hidden",name:"data.legalterms."+d.ssoGroup,value:"true"}}}),services:new n.Row({field:{attr:{type:"hidden",name:"data.services."+d.ssoGroup,value:"options.service"}}}),adsMedia:new n.Row({field:{displayText:"Quiero recibir comunicaciones comerciales de "+d.siteName+" seg&uacute;n mi perfil.",attr:{type:"checkbox",name:"data.adsMedia."+d.ssoGroup,value:"data.adsMedia."+d.ssoGroup,onNewValue:"false"}}}),adsThirdparty:new n.Row({field:{displayText:d.userIsInAppWebviewFlow?"Quiero recibir comunicaciones comerciales y novedades, por parte de "+d.siteName+', por cualquier medio y seg&uacute;n mi perfil, relativas a su <a href="javascript:void(0)" role="button" class="vocuser-grupo-appwebview" data-toggle="modal" data-target="#grupo-appwebview" data-backdrop="false">grupo</a> o a terceras entidades dedicadas a estos <a href="javascript:void(0)" role="button" class="vocuser-terceros-appwebview" data-toggle="modal" data-target="#terceros-appwebview" data-backdrop="false">sectores</a>':"Quiero recibir comunicaciones comerciales y novedades, por parte de "+d.siteName+', por cualquier medio y seg&uacute;n mi perfil, relativas a su <a target="_blank" href="https://www.vocento.com">grupo</a> o a terceras entidades dedicadas a estos <a target="_blank" href="https://www.vocento.com/sectores">sectores</a>',attr:{type:"checkbox",name:"data.adsThirdparty",value:"data.adsThirdparty",onNewValue:"false"}}}),adsThirdpartyProfile:new n.Row({field:{displayText:'Quiero recibir comunicaciones comerciales y novedades, por cualquier medio,de terceras entidades dedicadas a los <a target="_blank" href="https://www.vocento.com/sectores">sectores</a> por parte de '+d.siteName+" seg&uacute;n mi perfil ",attr:{type:"checkbox",name:"data.adsThirdparty",value:"data.adsThirdparty",onNewValue:"false"}}}),adsGroup:new n.Row({field:{attr:{type:"hiddenCheckbox",name:"data.adsGroup",value:"data.adsGroup",onNewValue:"false"}}}),adsGroupVisible:new n.Row({field:{displayText:'Quiero recibir comunicaciones comerciales del <a target="_blank" href="https://www.vocento.com">grupo</a> al que pertenece '+d.siteName+" seg&uacute;n mi perfil.",attr:{type:"checkbox",name:"data.adsGroup",value:"data.adsGroup",onNewValue:"false"}}}),editorialCheck:new n.Row({field:{inSchema:!1,displayText:" No Quiero recibir comunicaciones editoriales de "+d.siteName,attr:{type:"checkbox",id:"check-editorial",name:"data.communications",value:!0}}}),passwordRetype:new n.Row({field:{displayText:"Repite tu contrase&ntilde;a",required:!0,attr:{type:"password",name:"passwordRetype"}}}),lastName:new n.Row({field:{displayText:"Apellido",required:"ecommerce"===d.extensionType||"redencion"===d.extensionType||"regalo"===d.extensionType,attr:{type:"textbox",name:"profile.lastName"}}}),zip:new n.Row({field:{displayText:"C&oacute;digo Postal",required:void 0===d.userIsInAppWebviewFlow||!d.userIsInAppWebviewFlow,attr:{type:"textbox",name:"profile.zip"}}})},fieldsGroup:{registrationHiddenFields:["registration_ssoGroup","registration_service","registration_domain","registration_url","registration_returnUrl","registration_browser","registration_system_version","registration_system_name","registration_nick","imported","registration_privacy_policy","legalterms_last_update","registration_city","registration_province","registration_municipality","legalterms","services"],registrationAccessVisibleFields:["passwordRetype"],registrationPersonalDataVisibleFields:["zip","lastName"],province:["province"],adsFields:["adsGroup","adsMedia","adsThirdparty"],communicationFields:["adsMedia","adsGroupVisible","adsThirdpartyProfile"],adsFieldsProfile:["adsMedia","adsGroupVisible","adsThirdpartyProfile","editorialCheck"]},screens:{}};return e.screens[d.screenName.registration]=[{group:"registrationHiddenFields",lastRow:!0},{group:"registrationAccessVisibleFields",afterField:"password"},{group:"registrationPersonalDataVisibleFields",afterField:"profile.firstName"},{group:"adsFields",elementId:"vocento-div-ads"}],e.screens[d.screenName.completeRegistration]=[{group:"registrationHiddenFields",lastRow:!0},{group:"registrationPersonalDataVisibleFields",afterField:"profile.firstName"},{group:"adsFields",elementId:"vocento-div-ads"}],e.screens[d.screenName.perfil]=[{group:"adsFieldsProfile",elementId:"vocento-div-ads"}],e.screens[d.screenName.additionalData]=[{group:"communicationFields",elementId:"vocento-vocuser-additional-ads-fields"}],e},getCustomValidationFields:function(){return void 0!==d.userIsInAppWebviewFlow&&d.userIsInAppWebviewFlow?{"profile.firstName":n.customValidation._requiredField,"profile.nickname":n.customValidation._requiredField,"profile.lastName":e}:{"profile.firstName":n.customValidation._requiredField,"profile.nickname":n.customValidation._requiredField,"profile.zip":n.customValidation._isZip,"profile.lastName":e}},setOptions:function(e){return l=(d=e).debug&&n.log?n.log:function(){},this},screenSetHandlers:{onErrorHandler:function(e){},onBeforeScreenLoadHandler:function(e){var o,t,i;e.currentScreen===(d.screenName.login||d.screenName.formulario)&&e.nextScreen===d.screenName.completo&&"nortedecastilla"===d.ssoGroup&&(i="https://"+window.location.host+"/css/vocuser-additional-data.css",t=window.location.host,/^des-/.test(t)&&(i=a(d.ssoGroup,"des")),/^pre/.test(t)&&(i=a(d.ssoGroup,"pre")),/^www/.test(t)&&(i=a(d.ssoGroup,"pro")),o="https:"+i,t=document.head,(i=document.createElement("link")).type="text/css",i.rel="stylesheet",i.href=o,t.appendChild(i)),e.currentScreen!==d.screenName.login&&e.currentScreen!==d.screenName.formulario||e.nextScreen!==d.screenName.completo||void 0!==d.extensionType&&("ecommerce"===d.extensionType||"redencion"===d.extensionType||"upgrade"===d.extensionType||d.extensionType)},onAfterScreenLoadHandler:function(e){u.hideLoadingSpinner();var o,t,i,n=c('form:visible input[name="data.registration.system.version"]');r=u.version(),!d.userIsInFlow||u.areCookiesEnabled()||void 0!==(o=c("form:visible div.vocuser-boxerror > div.gigya-error-msg"))&&0<o.length&&(o.html(d.cookiesBlockedErrorText),o.addClass("gigya-error-code-400002 gigya-error-msg-active"),c("form:visible div.vocuser-boxerror").show()),e.currentScreen===d.screenName.updateLegalTerms&&c('form:visible input[name="data.legaltermsLastUpdate"]').val(d.legaltermsLastUpdate),e.currentScreen!==d.screenName.registration&&e.currentScreen!==d.screenName.completeRegistration||(d.saveGigyaCustomerServices&&function(){var e=d.authServerVocCore+"/vocuser/v1/customer-service/device-and-platform";try{c.ajax({url:e,type:"POST",async:!0,dataType:"json",success:function(e){d.device=e.result.device,d.platform=e.result.platform},error:function(e){}})}catch(e){}var o=d.envVoccore.replace(".","-"),e=window.location.protocol+"//"+o+"catalogo.vocento.com/rest/site/siteid",o={url:o=void 0!==(o=void 0===(o=u.getNfrylCookie())||!o||"/"===o?window.location.href:o)&&o&&"/"===o[o.length-1]?o.substring(0,o.length-1):o};try{c.ajax({url:e,type:"POST",data:JSON.stringify(o),async:!0,dataType:"json",success:function(e){d.siteId=""===e.result?d.siteId:e.result},error:function(e){}})}catch(e){}}(),n.val(r),s(["profile.email","profile.firstName","profile.lastName","profile.zip"],e)),e.currentScreen===d.screenName.profile&&void 0!==e.profile.thumbnailURL&&(c(".gigya-photo-upload-image").css("background-image","url("+e.profile.thumbnailURL+")"),c(".gigya-attach-file-upload-form").css("cursor","default"),c(".gigya-attach-file-upload-file-input").css("cursor","pointer")),e.currentScreen===d.screenName.verifyNickname&&c("#"+e.currentScreen).find(".gigya-user-name").text(void 0!==e.profile.firstName&&e.profile.firstName?e.profile.firstName:e.profile.nickname),e.currentScreen===d.screenName.enlazar&&(n="",void 0!==c("#gigya-link-account-site-only:visible")&&0<c("#gigya-link-account-site-only:visible").length?n="site-only":void 0!==c("#gigya-link-account-social-only:visible")&&0<c("#gigya-link-account-social-only:visible").length?n="social-only":void 0!==c("#gigya-link-account-site-and-social:visible")&&0<c("#gigya-link-account-site-and-social:visible").length&&(n="site-and-social"),u.compareGigyaErrorCode(e.response.errorCode,403043)&&"social-only"===n&&(void 0!==c("#gigya-link-account-default-text")&&0<c("#gigya-link-account-default-text").length&&c("#gigya-link-account-default-text").remove(),void 0!==e.response.response.requestParams.provider&&("googleplus"===e.response.response.requestParams.provider?(n=u.findFieldInScreen("vocuser-gigya-linking-account-user-googleplus-identity",e),t=u.findFieldInScreen("vocuser-gigya-linking-account-user-googleplus-login",e),c(n).remove(),c(t).remove()):(t=u.findFieldInScreen("vocuser-gigya-linking-account-user-facebook-identity",e),i=u.findFieldInScreen("vocuser-gigya-linking-account-user-facebook-login",e),c(t).remove(),c(i).remove())))),d.screenName.additionalData===e.currentScreen&&d.allowEditAdditionalUserInfo&&void 0!==d.editableFields&&"object"==typeof d.editableFields&&d.editableFields&&0<d.editableFields.length&&(i=d.editableFields,!0===d.allowEditGoldenRecords&&(i.push("profile.firstName"),i.push("profile.zip")),s(i,e)),u.registerUI(),u.onScreenSubmitScrollToFirstError(),u.trackScreenSetsRenderTime(e.currentScreen),u.trackGigyaApiScreenSetsRenderTime(e.currentScreen),u.setTimeScreenSetIsRender(window.performance.now()),u.sendDataToNewRelic({eventNameFired:"vocUserPerformance",additionalInformation:"vocUserPerformance - Timestamp después de haber renderizado el screenset: "+e.currentScreen})},onFieldChangedHandler:function(o){var e,t,i=void 0!==(i=c("#"+o.form))&&i&&i.length?i.attr("class"):c("."+o.form).attr("class").split(" ")[0];o.screen===d.screenName.registration&&"email"===o.field&&0<o.value.search("@")&&c("form."+i+':visible input[name="profile.nickname"]').val(u.generateUniqueNickname(o.value)),"profile.nickname"===o.field&&o.value&&(e=d.authServer+"/verify_unique_nickname.html?UID="+u.getUser().UID+"&nickname="+encodeURIComponent(o.value)+"&callback=?",c.getJSON(e,function(e){e.isValid?(e={nickname:o.value},u.setAccountInfo({profile:e})):(c("form."+i+':visible input[name="profile.nickname"]').val(u.getUser().nickname),n.customValidation.showError(c("form."+i+':visible input[name="profile.nickname"]'),c('[data-bound-to="profile.nickname"]'),'El nickname "'+o.value+'" pertenece a otro usuario'))})),"data.adsThirdparty"===o.field&&o.screen!==d.screenName.perfil&&o.screen!==d.screenName.additionalData&&(e=c("form."+i+':visible input[name="data.adsThirdparty"]').is(":checked"),c("form."+i+':visible input[name="data.adsGroup"]').prop("checked",e)),"gigya-profile-form"!==o.form&&("gigya-profile-form"===o.form||"email"===o.field||"profile.zip"===o.field||"profile.country"===o.field||"profile.nickname"===o.field)||void 0!==(t=void 0===(t=void 0!==c('form:visible input[data-gigya-name="'+o.field+'"]')?c('form:visible input[data-gigya-name="'+o.field+'"]'):c('form:visible input[vocento-name="'+o.field+'"]'))||!t||t.length<=0?void 0!==c('form:visible select[data-gigya-name="'+o.field+'"]')?c('form:visible select[data-gigya-name="'+o.field+'"]'):c('form:visible select[vocento-name="'+o.field+'"]'):t)&&t&&setTimeout(function(){n.customValidation.validateField(t)},200)},onBeforeValidationHandler:function(e){var o,t,i;e.screen!==d.screenName.registration&&e.screen!==d.screenName.completeRegistration||void 0!==(t=(void 0!==e.formData.email&&e.formData.email&&0<e.formData.email.search("@")?e.formData:e.profile).email)&&t.length&&0<t.search("@")&&(o=c('form:visible input[name="profile.nickname"]'),void 0===e.formData["profile.nickname"]&&0!==e.formData["profile.nickname"]||o.val(u.generateUniqueNickname(t))),e.screen!==d.screenName.registration&&e.screen!==d.screenName.completeRegistration&&e.screen!==d.screenName.profile||function(e,o){for(var t=e.length,i=0;i<t;i++){var n,r=u.findFieldInScreen(e[i],o);void 0!==r&&r&&r.length&&void 0!==r.val()&&0<r.val().length&&r.is("input")&&((n=u.cleanInput(r.val()))!==r.val()&&(r=e[i],d.cleanFormFields[r]=n))}}((t=e.screen,i=[],c("#"+t).find("input:visible").each(function(e,o){void 0!==c(o)&&c(o).length&&void 0!==c(o).attr("name")&&c(o).attr("name").length&&i.push(c(o).attr("name"))}),i),e)},onBeforeSubmitHandler:function(e){var a,s;"gigya-update-profile-screen"===e.screen&&(e=u.getNLfromGUI(),a=u.getUserInfoFromAccountOrUser(),void 0!==(s=a.data.newsletter)&&s&&0<s.length?c.each(e,function(e,t){var o,i=t.NL_ID,n=t.state,r=!1;c.each(s,function(e,o){i===o.ID&&(r=!0,n!==o.status&&((o=[]).push(t),u.updateUserNL(a.UID,a.UIDSignature,a.signatureTimestamp,o)))}),!1===r&&"subscribe"===n&&((o=[]).push(t),u.updateUserNL(a.UID,a.UIDSignature,a.signatureTimestamp,o))}):c.each(e,function(e,o){var t;"subscribe"===o.state&&((t=[]).push(o),u.updateUserNL(a.UID,a.UIDSignature,a.signatureTimestamp,t))}))},onAfterSubmitHandler:function(e){void 0!==e.screen&&(u.compareGigyaErrorCode(e.response.errorCode,0)&&(u.saveRegTokenOnRegister(e.response.regToken,e.screen),"gigya-login-screen"!==e.screen&&"gigya-register-screen"!==e.screen&&"gigya-complete-registration-screen"!==e.screen&&"gigya-link-account-screen"!==e.screen||u.showLoadingSpinner()),void 0!==e.form&&e.form&&"div.gigya-social-login"===e.form&&u.compareGigyaErrorCode(e.response.errorCode,"206001")&&(d.screenName.login===e.screen||d.screenName.formulario===e.screen)&&void 0!==d.extensionType&&("ecommerce"===d.extensionType||"redencion"===d.extensionType||"upgrade"===d.extensionType||d.extensionType))},onHideHandler:function(e){},onSocialLoginHandler:function(e){}},setProtectedFunctions:function(e){return u=e,this},getProtectedFunctions:function(){return u},execute:function(){var e=u.getMainEventListener(),o=u.getEventNamespace(),t=u.getEventSeparator(),i=u.getEventProductsOnReady(),n=c.Deferred();c.when(n).done(function(e){var o=p(),t={},i=u.getNfrylCookie();t.initLoginComplete={url:i,timestamp:o.timestamp},u.setAccountInfo({data:t})}),c.when(i,n).done(function(e,o){var t;!0!==d.progressiveProfile||!0===(void 0===(t=u.getUserType())||!t||"trial"!==t&&"anonimo"!==t?!0:!1)&&u.showScreenSet({screenSet:d.screenSet[d.screenSetTypeToShow].profile,mobileScreenSet:d.screenSet[d.screenSetTypeToShowMobile].profile,startScreen:d.screenName.progressiveProfile})}),e.on(o+"user"+t+"firstLogin",function(e){n.resolve(e)});var r=c.Deferred();c.when(i,r).done(function(e,o){var t=u.getUserType();!0===(void 0===t||!t||"trial"!==t&&"anonimo"!==t?!0:!1)&&u.showScreenSet({screenSet:d.screenSet[d.screenSetTypeToShow].profile,mobileScreenSet:d.screenSet[d.screenSetTypeToShowMobile].profile,startScreen:d.screenName.updateLegalTerms})}),e.on(o+"user"+t+"legaltermsOutOfDate",function(e){r.resolve(e)});var a=c.Deferred();c.when(i,a).done(function(e,o){var t=u.getUserType();!0===(void 0===t||!t||"trial"!==t&&"anonimo"!==t?!0:!1)&&u.showScreenSet({screenSet:d.screenSet[d.screenSetTypeToShow].profile,mobileScreenSet:d.screenSet[d.screenSetTypeToShowMobile].profile,startScreen:d.screenName.verifyNickname})}),e.on(o+"user"+t+"duplicateNickname",function(e){a.resolve(e)});var s=c.Deferred();c.when(i,s).done(function(e,o){var t=u.getUserType();!0===(void 0===t||!t||"trial"!==t&&"anonimo"!==t?!0:!1)&&u.showScreenSet({screenSet:d.screenSet[d.screenSetTypeToShow].profile,mobileScreenSet:d.screenSet[d.screenSetTypeToShowMobile].profile,startScreen:d.screenName.verifyNickname})}),e.on(o+"user"+t+"noNickname",function(e){s.resolve(e)}),e.on(o+"sso"+t+"servicesNotSaved",function(e){l("Defaults => Ejecutando acción de evento (sso servicesNotSaved)");var o=e.gigya_event;void 0!==e.service&&e.service&&u.setCurrentService(e.service),u.checkService(o)})},version:function(){return r},className:function(){return"BaseFlow"}}}return"v3"===vocento.vocuser.VERSION&&(window.Vocento="undefined"!=typeof Vocento&&Vocento?Vocento:{},Vocento.BaseFlow=e),e}),function(e,o){"use strict";"v3"===vocento.vocuser.VERSION?e.returnExports=o():"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("GroupFlow",o):"object"==typeof exports?module.exports=o():e.returnExports=o()}(this,function(){"use strict";function e(i,n){var r={};var a={};n.getContext;return{getOptions:function(){return{hasPaywall:!1,screenSet:{web:{auth:"Login-web",profile:"Profile-web"},mobile:{auth:"Login-mobile",profile:"Profile-mobile"}},screenName:{progressiveProfile:"gigya-progressive-profile-screen-1",updateProfile:"gigya-update-profile-screen"},parentDivClass:"vocento-gigya-parent-abc"}},getInsertCustomField:function(){return{fields:{},fieldsGroup:{},screens:{}}},getCustomValidationFields:function(){return{"profile.lastName":n.customValidation._requiredField}},setOptions:function(e){return(r=e).debug&&n.log&&n.log,this},screenSetHandlers:{onErrorHandler:function(e){},onBeforeValidationHandler:function(e){"gigya-register-screen"!==e.screen&&"gigya-complete-registration-screen"!==e.screen||(e=i('form:visible [name="profile.lastName"]'),n.customValidation.validateField(e))},onBeforeScreenLoadHandler:function(e){"gigya-quick-thank-you-screen"===e.nextScreen&&i("span.medioConcreto").text(n.getMainDomain()),r.userIsInAppWebviewFlow?a.addModalClassToScreen("gigya-screen-dialog-inner","vocento-modal voc-container-app-account"):a.addModalClassToScreen("gigya-screen-dialog-inner","vocento-modal")},onAfterScreenLoadHandler:function(e){var o,t;!function(e,o){{var t;e&&0<i(e).length&&o&&0<i(o).length&&(void 0!==(t=i(e).offset())&&(t.top+=i(e).height(),t.left=i(o).position().left,(o=i(".gigya-screen-dialog")).css("top",t.top),o.css("left",t.left),o.css("z-index",i("#navbar").css("z-index")-1)))}}("#navbar .navbar-inner","header"),r.userIsInAppWebviewFlow?(a.addParentDiv("gigya-screen-dialog","",r.parentDivClass+" voc-gigya-app"),a.addParentDiv("gigya-screen-dialog-mobile","",r.parentDivClass+" voc-gigya-app")):(a.addParentDiv("gigya-screen-dialog","",r.parentDivClass),a.addParentDiv("gigya-screen-dialog-mobile","",r.parentDivClass)),"gigya-register-screen"!==e.currentScreen&&"gigya-complete-registration-screen"!==e.currentScreen||(o=e.currentScreen.split("gigya"),void 0!==(o=i('form:visible [for="profile.lastName'+o[1]+'"]'))&&0<o.length&&(o.text("Apellido *"),n.customValidation.hideError(o,"#"+e.currentScreen+' span[data-bound-to="profile.lastName"]'))),"gigya-login-screen"!==e.currentScreen&&"gigya-register-screen"!==e.currentScreen||(t=i(document).height(),function(e,o){i("#"+e).offset().top;void 0!==o&&o&&0}(e.currentScreen,t)),"gigya-update-profile-screen"===e.currentScreen&&(gigya.socialize.showAddConnectionsUI({containerID:"gigya-add-connections-profile",width:140,height:25,showTermsLink:!1,hideGigyaLink:!0,showEditLink:!1,enabledProviders:r.enabledProviders,requiredCapabilities:r.requiredCapabilities}),t=[{selector:"form:visible span.gigya-user-first-name",data:a.getUser().firstName},{selector:"form:visible span.gigya-user-last-name",data:a.getUser().lastName},{selector:"form:visible label.gigya-user-email",data:a.getUser().email}],i.each(t,function(e,o){i(o.selector).html(o.data)})),"gigya-update-profile-screen"===e.currentScreen&&("site"!==a.getAccount().loginProvider&&i("form:visible #vocento-div-change-password").hide(),void 0===e.data||void 0===e.data.communications||void 0!==(e=a.getUserCommunicationsInfo(e.data.communications,"adsEditorial"))&&0<Object.keys(e).length&&void 0!==e.status&&(i("#check-editorial")[0].checked=!e.status))},onFieldChangedHandler:function(e){},onBeforeSubmitHandler:function(e){},onAfterSubmitHandler:function(e){var o,t;"gigya-update-profile-screen"===e.screen&&a.compareGigyaErrorCode(e.response.errorCode,0)&&(o=void 0!==e.data&&void 0!==e.data.communications&&a.getUserCommunicationsInfo(e.data.communications,"adsEditorial"),t=i("#check-editorial")[0].checked,void 0!==o.status&&t!==o.status||void 0!==e&&e&&void 0!==e.response&&e.response&&void 0!==e.response.UID&&e.response.UID&&void 0!==e.response.UIDSignature&&e.response.UIDSignature&&void 0!==e.response.signatureTimestamp&&e.response.signatureTimestamp&&a.updateUserCommunications(e.response.UID,e.response.UIDSignature,e.response.signatureTimestamp,[{id:"adsEditorial",status:!t}]))},onHideHandler:function(e){},onSocialLoginHandler:function(e){}},setProtectedFunctions:function(e){return a=e,this},getProtectedFunctions:function(){return a},execute:function(){a.getMainEventListener(),a.getEventNamespace(),a.getEventSeparator()},version:function(){return"4.0.0"},className:function(){return"AbcFlow"}}}return"v3"===vocento.vocuser.VERSION&&(window.Vocento="undefined"!=typeof Vocento&&Vocento?Vocento:{},Vocento.AbcFlow=e),e}),function(e,o){"use strict";"v3"===vocento.vocuser.VERSION?e.returnExports=o():"function"==typeof defineFunction&&defineFunction.amd?vocUserRequirejsNamespace.define("SiteFlow",o):"object"==typeof exports?module.exports=o():e.returnExports=o()}(this,function(){"use strict";function e(i,o){var n={};var r={};o.getContext;return{getOptions:function(){var e="DIARIO ABC, S.L.",o="Vocento Gesti&oacute;n de Medios y Servicios, S.L.U.,",t={privacidad:{selector:".vocuser-privacidad-appwebview",url:"https://www.vocento.com/politica-privacidad/",id:"privacidad-appwebview"},cookies:{selector:".vocuser-cookies-appwebview",url:"https://www.vocento.com/politica-cookies/",id:"cookies-appwebview"},contacto:{selector:".vocuser-contacto-appwebview",url:"https://www.abc.es/contacto/condiciones.html",id:"contacto-appwebview"},grupo:{selector:".vocuser-grupo-appwebview",url:"https://www.vocento.com",id:"grupo-appwebview"},terceros:{selector:".vocuser-terceros-appwebview",url:"https://www.vocento.com/sectores",id:"terceros-appwebview"}};return{hasPaywall:!1,hasEcommerce:!1,siteName:"ABC",enableCNAME:!0,htmlLegalText:"Los responsables del tratamiento de los datos personales facilitados son <strong>"+e+"</strong> y <strong>"+o+'</strong> quienes los tratar&aacute;n con la finalidad de prestarte los servicios solicitados en virtud de la relaci&oacute;n contractual y remitirte comunicaciones comerciales basadas en tu consentimiento. Tus datos no ser&aacute;n cedidos a terceros, salvo obligaci&oacute;n legal. Tienes derecho, entre otros, a acceder, rectificar y suprimir tus datos. Para m&aacute;s informaci&oacute;n: <a href="'+t.privacidad.url+'" target="_blank">Pol&iacute;tica de Privacidad</a><p> Al crear tu cuenta declaras conocer la <a href="'+t.privacidad.url+'" target="_blank">Pol&iacute;tica de Privacidad</a> y aceptas la <a href="'+t.cookies.url+'" target="_blank">Pol&iacute;tica de Cookies</a> de Vocento y las <a href="'+t.contacto.url+'" target="_blank">Condiciones de Uso</a> del portal.</p>',htmlLegalTextApp:"Los responsables del tratamiento de los datos personales facilitados son <strong>"+e+"</strong> y <strong>"+o+'</strong> quienes los tratar&aacute;n con la finalidad de prestarte los servicios solicitados en virtud de la relaci&oacute;n contractual y remitirte comunicaciones comerciales basadas en tu consentimiento. Tus datos no ser&aacute;n cedidos a terceros, salvo obligaci&oacute;n legal. Tienes derecho, entre otros, a acceder, rectificar y suprimir tus datos.<p> Al crear tu cuenta declaras conocer la <a href="javascript:void(0)" role="button" class="vocuser-privacidad-appwebview" data-toggle="modal" data-target="#privacidad-appwebview" data-backdrop="false">Pol&iacute;tica de Privacidad</a> y aceptas la <a href="javascript:void(0)" role="button" class="vocuser-cookies-appwebview" data-toggle="modal" data-target="#cookies-appwebview" data-backdrop="false"> Pol&iacute;tica de Cookies </a> de Vocento y las <a href="javascript:void(0)" role="button" class="vocuser-contacto-appwebview" data-toggle="modal" data-target="#contacto-appwebview" data-backdrop="false">Condiciones De Uso</a> del portal.</p>',policies:t,facebookPixelId:"1571136016517980",htmlBenefits:'<ul class="vocuser-listchecks"><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Poder seguir a tus autores favoritos</span></li><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Guardar y comentar noticias</span></li><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Participar en concursos, promociones y eventos exclusivos</span></li><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Estar informado sobre las noticias m&aacute;s relevantes del d&iacute;a a trav&eacute;s de nuestra newsletter diaria as&iacute; como sobre noticias asociadas a hechos de especial relevancia informativa</span></li><li><span class="vocuser-iconsfonts-check"></span><span class="vocuser-listchecks-txt">Acceso a informaci&oacute;n sobre novedades editoriales de la Sociedad</span></li></ul>',siteId:"0100",mediaCode:"ABC",saveGigyaCustomerServices:!0,autosubscribeConfig:{www:{hasAutomaticNewsletters:!0,query_string:"ABC_Editoriales"},tienda:{hasAutomaticNewsletters:!0,query_string:"ABC_Editoriales"},sevilla:{hasAutomaticNewsletters:!0,query_string:"ABCS_Editoriales"},"desnlocal-vocuser":{hasAutomaticNewsletters:!0,query_string:"ABC_Editoriales"},"desnlocal-vocuser-sevilla":{hasAutomaticNewsletters:!0,query_string:"ABCS_Editoriales"},desn:{hasAutomaticNewsletters:!0,query_string:"ABC_Editoriales"},"desn.sevilla":{hasAutomaticNewsletters:!0,query_string:"ABCS_Editoriales"},"des-www":{hasAutomaticNewsletters:!0,query_string:"ABC_Editoriales"},"des-sevilla":{hasAutomaticNewsletters:!0,query_string:"ABCS_Editoriales"},pren:{hasAutomaticNewsletters:!0,query_string:"ABC_Editoriales"},"pren.sevilla":{hasAutomaticNewsletters:!0,query_string:"ABCS_Editoriales"},"pre-www":{hasAutomaticNewsletters:!0,query_string:"ABC_Editoriales"},"pre-sevilla":{hasAutomaticNewsletters:!0,query_string:"ABCS_Editoriales"},"pre-tienda":{hasAutomaticNewsletters:!0,query_string:"ABC_Editoriales"}},mustToShowZipInNotEditorialFlow:!1}},getInsertCustomField:function(){return{fields:{legaltext:new o.Row({field:{displayText:n.userIsInAppWebviewFlow?n.htmlLegalTextApp:n.htmlLegalText,attr:{type:"label"}}}),newslettersMornig:new o.Row({field:{displayText:"Edici&oacute;n matinal. Recibe las noticias m&aacute;s importantes por la ma&ntilde;ana.",attr:{type:"checkbox",name:"data.newslettersMorning.abc",value:"checked"}}}),newslettersEvening:new o.Row({field:{displayText:"Edici&oacute;n vespertina. Recibe las noticias m&aacute;s importantes por la tarde.",attr:{type:"checkbox",name:"data.newslettersEvening.abc",value:"checked"}}}),newslettersHeadlines:new o.Row({field:{displayText:"Titulares, env&iacute;o a las 8:00 de la ma&ntilde;ana. Recibe a primera hora las noticias m&aacute;s importantes del d&iacute;a.",attr:{type:"checkbox",name:"data.newslettersHeadlines.abc",value:"checked"}}}),disableAccount:new o.Row({field:{displayText:""}}),city:new o.Row({field:{displayText:"Poblaci&oacute;n",required:!1,attr:{type:"profileTextbox",name:"profile.city",value:"profile.city",placeholder:"Poblaci&oacute;n"}}}),province:new o.Row({field:{displayText:"Provincia",required:!1,attr:{type:"profileTextbox",name:"data.province",value:"data.province",placeholder:"Provincia"}}}),cardGold:new o.Row({field:{displayText:"Tarjeta Oro",required:!1,attr:{type:"profileTextbox",name:"data.numCardGold",value:"data.numCardGold",placeholder:"Tarjeta Oro"}}}),occupation:new o.Row({field:{attr:{type:"profileSelect",name:"data.occupation",placeholder:"Sector",options:{Sector:"","Compras, Materiales, Log&iacute;stica":"Compras, Materiales, Log&iacute;stica","Consultor&iacute;a":"Consultor&iacute;a","Control de gesti&oacute;n":"Control de gesti&oacute;n","Direcci&oacute;n empresa":"Direcci&oacute;n empresa","Dise&ntilde;o, Artes gr&aacute;ficas, Decoraci&oacute;n":"Dise&ntilde;o, Artes gr&aacute;ficas, Decoraci&oacute;n","Estrategia, M&A":"Estrategia, M&A","Finanzas, Contabilidad":"Finanzas, Contabilidad","Inform&aacute;tica, Telecomunicaciones":"Inform&aacute;tica, Telecomunicaciones","Investigaci&oacute;n y Desarrollo":"Investigaci&oacute;n y Desarrollo",Inmobiliaria:"Inmobiliaria",Marketing:"Marketing","Servicios m&eacute;dicos":"Servicios m&eacute;dicos","Organizaci&oacute;n, Administraci&oacute;n":"Organizaci&oacute;n, Administraci&oacute;n","Fabricaci&oacute;n, Producci&oacute;n, Operaciones":"Fabricaci&oacute;n, Producci&oacute;n, Operaciones","Recursos Humanos":"Recursos Humanos","Ventas, Comercializaci&oacute;n":"Ventas, Comercializaci&oacute;n","Publicidad, Comunicaci&oacute;n":"Publicidad, Comunicaci&oacute;n","Educaci&oacute;n":"Educaci&oacute;n","Arquitectura, Ingenier&iacute;a, Contrucci&oacute;n":"Arquitectura, Ingenier&iacute;a, Contrucci&oacute;n","Servicios jur&iacute;dicos":"Servicios jur&iacute;dicos","Gobierno, Ej&eacute;rcito":"Gobierno, Ej&eacute;rcito",Otros:"Otros"}}}}),education:new o.Row({field:{attr:{type:"profileSelect",name:"data.educationLevel",placeholder:"Estudios",options:{Estudios:"","Graduado escolar":"Graduado escolar","EGB, 1&ordm; ciclo FP, 1&ordm; ciclo ESO":"EGB, 1&ordm; ciclo FP, 1&ordm; ciclo ESO","COU, 2&ordm; ciclo FP, 2&ordm; ciclo ESO, Bachiller":"COU, 2&ordm; ciclo FP, 2&ordm; ciclo ESO, Bachiller","Titulado Medio/Diplomado":"Titulado Medio/Diplomado","Titulado superior":"Titulado superior",Doctor:"Doctor"}}}}),cardPlatinum:new o.Row({field:{displayText:"Tarjeta Platino",required:!1,attr:{type:"profileTextbox",name:"data.numCardPlatinum",value:"data.numCardPlatinum",placeholder:"Tarjeta Platino"}}}),gender:new o.Row({field:{attr:{type:"profileSelect",name:"profile.gender",placeholder:"G&eacute;nero",options:{"G&eacute;nero":"",Hombre:"m",Mujer:"f"}}}}),maritalStatus:new o.Row({field:{attr:{type:"profileSelect",name:"data.maritalStatus",placeholder:"Estado civil",options:{"Estado civil":"","Soltero/a":"Soltero/a","Casado/a":"Casado/a","Divorciado/a":"Divorciado/a","Viudo/a":"Viudo/a"}}}}),children:new o.Row({field:{attr:{type:"profileSelect",name:"data.numChildren",placeholder:"N&uacute;mero de hijos",options:{"N&uacute;mero de hijos":""," 0":0," 1":1," 2":2," 3":3," 4":4," 5":5," 6":6," 7":7," 8":8," 9":9," 10":10," 11":11," 12":12," 13":13," 14":14," 15":15}}}})},fieldsGroup:{legalTextFields:["legaltext"],newslettersFields:["newslettersMornig","newslettersEvening","newslettersHeadlines"],disableAccount:["disableAccount"],abcProfileFields:["city","province","cardGold","occupation","education","cardPlatinum","gender","maritalStatus","children"]},screens:{"gigya-register-screen":[{group:"legalTextFields",elementId:"vocento-div-legaltext"}],"gigya-complete-registration-screen":[{group:"legalTextFields",elementId:"vocento-div-legaltext"}],"gigya-update-profile-screen-2":[{group:"newslettersFields",elementId:"vocento-div-newsletters"}],"gigya-progressive-profile-screen-2":[{group:"newslettersFields",elementId:"vocento-div-newsletters"}],"gigya-deactivate-account-screen":[{group:"disableAccount",elementId:"vocento-div-disable-account"}],"gigya-update-profile-screen":[{group:"abcProfileFields",elementId:"vocuser-abc-profile-fields"}]}}},getCustomValidationFields:function(){return{"data.numCardGold":o.customValidation._isCard,"data.numCardPlatinum":o.customValidation._isCard}},setOptions:function(e){return(n=e).debug&&o.log&&o.log,this},screenSetHandlers:{onErrorHandler:function(e){},onBeforeScreenLoadHandler:function(e){},onAfterScreenLoadHandler:function(e){var o,t=e.currentScreen;"gigya-thank-you-screen"===t&&(r.facebookTrackEvent("CompleteRegistration"),void 0!==(e=r.getCookieAutoNewsletters())&&e&&!0===n.updateSelligentCommunications&&r.createUserInSelligent(),n.userIsInAppWebviewFlow||(o=r.getNfrylCookie(),e=r.getCookieVocUserInformation("returnUrl"),r.redirectToUrl(o=e?e:o,5e3))),"gigya-update-thanks-screen"===t&&r.updateUserCommunicationsInSelligent(),"gigya-update-profile-screen"===t&&(void 0!==(o=i(".gigya-profile-interests-link"))&&o&&o.remove(),document.getElementById("standar-profile").remove(),o=r.findFieldInScreenByName("data.occupation",t),i("<label style='margin-top: 10px;'>Sector</label>").insertBefore(o),o=r.findFieldInScreenByName("data.educationLevel",t),i("<label style='margin-top: 10px;'>Estudios</label>").insertBefore(o),o=r.findFieldInScreenByName("data.maritalStatus",t),i("<label style='margin-top: 10px;'>Estado civil</label>").insertBefore(o),o=r.findFieldInScreenByName("data.numChildren",t),i("<label style='margin-top: 10px;'>N&ordm; de hijos</label>").insertBefore(o),o=r.findFieldInScreenByName("profile.gender",t),i("<label style='margin-top: 10px;'>G&eacute;nero</label>").insertBefore(o),o=r.findFieldInScreenByName("data.numCardGold",t),i("<label style='margin-top: 10px;'>N&ordm; de tarjeta ORO</label>").insertBefore(o),o=r.findFieldInScreenByName("profile.city",t),i("<label style='margin-top: 10px;'>Poblaci&oacute;n</label>").insertBefore(o),o=r.findFieldInScreenByName("data.province",t),i("<label style='margin-top: 10px;'>Provincia</label>").insertBefore(o),t=r.findFieldInScreenByName("data.numCardPlatinum",t),i("<label style='margin-top: 10px;'>N&ordm; de tarjeta PLATINO</label>").insertBefore(t))},onFieldChangedHandler:function(e){},onBeforeSubmitHandler:function(e){},onAfterSubmitHandler:function(e){"gigya-complete-registration-screen"===e.screen&&r.compareGigyaErrorCode(e.response.errorCode,0)&&(r.updateDeleteUserNotificationFrecuency(e.response),!0===n.updateSelligentCommunications&&r.createUserInSelligent(e.response.UID))},onHideHandler:function(e){},onSocialLoginHandler:function(e){}},setProtectedFunctions:function(e){return r=e,this},getProtectedFunctions:function(){return r},execute:function(){var e=r.getMainEventListener();r.getEventNamespace(),r.getEventSeparator(),r.checkUserFlowUrlsContains("sevilla",window.location.href)&&(n.newslettersAuto="abcsevilla-editoriales"),e.on("click",".vocento-submit-button",function(){i(".vocento-submit-nickname").trigger("click");var e=i("#gigya-update-profile-screen input[name='oldPassword']").val(),o=i("#gigya-update-profile-screen input[name='newPassword']").val(),t=i("#gigya-update-profile-screen input[name='passwordRetype']").val();return(e||o||t)&&i(".vocento-submit-new-password").trigger("click"),!1}),e.on("change",".vocento-checkbox",function(){return i(".vocento-submit-interests").trigger("click"),!1}),r.facebookTrackInit(n.facebookPixelId)},version:function(){return"4.0.0"},className:function(){return"SiteFlow"}}}return"v3"===vocento.vocuser.VERSION&&(window.Vocento="undefined"!=typeof Vocento&&Vocento?Vocento:{},Vocento.SiteFlow=e),e}),vocUserRequirejsNamespace.define("vocento-vocuser-combined-lite",function(){});