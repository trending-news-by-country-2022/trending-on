!function(){let e,t=window,n=!0,o={},a=function(){},i=function(){},r=function(){},s=function(){};try{e=window.top}catch(o){n=!1,e=t}e.__wmass||(e.__wmass={});let c,l="outxurl",d="outxgam",f="outxcon",m=Math.floor(100*Math.random()),u={},p={forceDmpId:{anyof:"string"},forceDmpPKey:{anyof:"string"}},g="sijai",b=void 0!==e.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),y=(e.innerWidth||e.document.documentElement&&0!==e.document.documentElement.clientWidth&&e.document.documentElement.clientWidth||e.document.getElementsByTagName("body")[0].clientWidth,"_papns"),_=[];try{e.__wmass.logger||(e.__wmass.logger=(t="",n="")=>{let a,i,r,s,c=[],l=[],d=[],f=[],m=()=>{let e=new Date,t=e.getMilliseconds().toString();return`${e.toLocaleTimeString()}:${t.padStart(4,"0")}`},u=e=>{let t={info:1,log:2,warn:3,error:4}[o.enableLog];return!0===o.enableLog||t>=e};if(a=i=r=s=function(){},e.console){let o=`${"%cWemass"}${t}`,p=["display: inline-block; color: #fff; background: #92c01f; padding: 1px 4px; border-radius: 3px;",n];e.console.info&&(a=function(){let e=u(1),t=o+"%c INFO",n=[...p,"display: inline-block; color: #111 background: #e3e3e3; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),i=[t,...n,m(),...a];if(e){for(;c.length>0;)c.shift()();console.info.apply(console,i)}else c.push(console.info.bind(console,...i))}),e.console.log&&(i=function(){let e=u(2),t=o+"%c LOG",n=[...p,"display: inline-block; color: #111 background: #3c3c3b; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),i=[t,...n,m(),...a];if(e){for(;l.length>0;)l.shift()();console.log.apply(console,i)}else l.push(console.log.bind(console,...i))}),e.console.warn&&(r=function(){let e=u(3),t=o+"%c WARN",n=[...p,"display: inline-block; color: #111 background: orange; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),i=[t,...n,m(),...a];if(e){for(;d.length>0;)d.shift()();console.warn.apply(console,i)}else d.push(console.warn.bind(console,...i))}),e.console.error&&(s=function(){let e=u(4),t=o+"%c ERROR",n=[...p,"display: inline-block; color: #111 background: red; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),i=[t,...n,m(),...a];if(e){for(;f.length>0;)f.shift()();console.error.apply(console,i)}else f.push(console.error.bind(console,...i))})}return[a,i,r,s]}),[a,i,r,s]=e.__wmass.logger("%cDMP","display: inline-block; color: #fff; background: #658; padding: 1px 4px; border-radius: 3px;")}catch(e){}let v=[];e.__wmass.getSegments=function(e){let t=w(e),{callback:n,adunit:o,extraKw:r=!1,format:c}="object"===t?e:{},m=["gamvideo","gamvideohb"].indexOf(c)>-1?"wpm":"permutive",u=!1,p=function(){let e={},t=E(),n=(t=m,n=y)=>{let o=[];try{o=JSON.parse(window.localStorage.getItem(n)||"[]").slice(0,250).map(String)}catch(e){o=[]}o.length>0&&(e[t]=o)};if(!1!==u){let t=/^\/\d+\//;t.test(u)&&(u=u.replace(t,""));let n=u.split("/"),o=1;for(let t=0;t<n.length;t++){n[t].length>0&&(e[`au${o}`]=[`${o>1?"/":""}${n[t]}`],o++)}}if(t||(-1===v.indexOf(d)&&T()&&v.push(d),-1===v.indexOf(l)&&N()&&v.push(l),-1===v.indexOf(f)&&$()&&v.push(f)),n(),"array"===w(_)&&_.length>0){let[e,t]=_;e=["gamvideo","gamvideohb"].indexOf(c)>-1&&0===e.indexOf("per")?"permutive":e,n(e,t)}if(v.length>0&&(e.wirr=v,i("segmentos de wemass declarados",JSON.stringify(e))),!1!==r)for(let t in r){let n=r[t],o=w(n);if(!e[t])switch(o){case"array":e[t]=n;break;case"number":e[t]=[n.toString()];break;case"string":n.length>0&&(n.indexOf(",")>-1?e[t]=n.split():e[t]=[n])}}return"xandr"===c?e:L(c,e)};if("object"!==t&&"undefined"!==t&&s(`argumento pasado a getsegments incorrecto. Se esperaba object se recibio ${t}`),u="string"==typeof o&&o.length>0?o:q(),"function"!=typeof n)return p();a("llamando a getSegments con callback");var g=500,b=100,h=function(){var e=p(),t=b<g?b:g;e[m]&&e.wirr||g<=0?n(e):(g-=t,setTimeout(h,t))};"number"==typeof e.timeout&&(g=e.timeout),"number"==typeof e.interval&&(b=e.interval),h()},i("funcion getSegments sobreescrita");let h=t=>{let n=`${t}=`,o=e.document.cookie.split(";");for(let e of o){for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(n))return e.substring(n.length,e.length)}return null},w=(e,t)=>{var n,o=Object.prototype.toString.call(e);return t=t||{},n||void 0!==e||(n="undefined"),n||null!==e||(n="null"),!n&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)&&(n="buffer"),n||"object"!=typeof window||e!==window||(n="global"),n||"object"!=typeof global||e!==global||(n="global"),!n&&"number"==typeof e&&isNaN(e)&&(n="nan"),!n&&"object"==typeof e&&"[object Number]"==o&&isNaN(e)&&(n="nan"),n||"object"!=typeof e||"Event]"!=o.substr(-6)||(n="event"),n||"[object HTML"!=o.substr(0,12)||(n="html"),n||"[object Node"!=o.substr(0,12)||(n="html"),n||(n=o.match(/\[object\s*([^\]]+)\]/)[1].toLowerCase()),"object"==n&&t.pojoOnly&&e.constructor&&"Object"==(n=e.constructor.name||"unknown")&&(n="object"),n},x=(e,t,n)=>{let o=new Date,a=1e3,i={B:()=>{a*=0},M:e=>{a*=60*e},H:e=>{a*=3600*e},D:e=>{a*=86400*e},X:()=>{a*=864e5}};for(let e=0;e<t.length;e++)t[e]in i&&i[t[e]](parseInt(t.replace(t[e],""))||1);a+=o.getTime(),o.setTime(a),document.cookie=`${n}=${e}; path=/; domain=${location.hostname}; expires=${o.toUTCString()}; samesite=none; secure`};try{e.__wmass.testMode||(e.__wmass.testMode=function(t={},n="wmsstst"){let o=e=>{let t=["raPreviewMode=0; Max-Age=0; path=/; samesite=None; domain=.richaudience.com; secure","apn_prebid_debug=0; Max-Age=0; samesite=none; secure"];for(let e of t)document.cookie=e;!1===e?x(e,"B",n):x(JSON.stringify(e),"H",n)},i=(e=>{let t={enableLog:{values:[!0,"info","log","warn","error"],cookie:!0}};for(let n in e)t[n]||(t[n]=e[n]);return t})(t);return(t={})=>{if(!1===t)return o(!1),{};if("object"===w(t)){let r=(()=>{let e=h(n);if("string"===w(e))try{return JSON.parse(e)}catch(t){console.log(t,`error > valor de wmsstst = ${e}`)}return{}})(),s=(()=>{let t="wmsstst",n=e.location.search.replace("?","");if(-1===n.indexOf(t))return{};let o=n.split("&"),i={};for(let e of o)if(-1!==e.indexOf(t))if(e===t)i[enableTestCreatives]=!0;else{let[t,n]=e.replace("wmsstst.","").split("=");0===t.indexOf("key.")?(t=t.replace("key.",""),i.keywords||(i.keywords={}),i.keywords[t]||(i.keywords[t]=[]),-1===i.keywords[t].indexOf(n)&&i.keywords[t].push(n)):("true"===n&&(n=!0),"string"===w(n)&&i[t]?("string"===w(i[t])&&(i[t]=[i[t]]),i[t].push(n)):i[t]=n)}return a("parametros wemass detectados",i),i})(),c=((...e)=>{let t={};for(let n of e)if("object"===w(n))for(let e in n)t[e]||(t[e]=n[e]);return t})(t,r,s),l={},d={};for(let e in c)if(i[e]){let t=!1,n=c[e],o=i[e],{values:a,cookie:r=!1,anyof:s}=o,f=w(a),m=w(s),u=w(n);switch("string"===m&&u===s&&(t=!0),f){case"array":a.indexOf(n)>-1&&(t=!0);break;case"boolean":t=!0===n;case"function":t=a(n)}!0===t&&(d[e]=n,!0===r&&(l[e]=n))}return Object.keys(l).length>0&&o(l),d}}}),o=new e.__wmass.testMode(p,"d94422aa8614fd4bf4e0cafd66f9c097")()}catch(e){}let{pathname:O,hostname:k,search:S}=e.location;k=k.toLowerCase(),O=O.toLowerCase(),i("Loading Wemass DMP Tag VOCENTO~DMP");let C,j,$=()=>{if("object"===w(e.vocento))try{if((k.indexOf("abc.es")>-1||k.indexOf("lavozdigital.es")>-1)&&e.document.querySelector("aside.layer_inpage"))return!0;let t,n=e.document.querySelectorAll("div.voc-detail p.voc-paragraph,main .cuerpo-texto > p,[itemprop='articleBody'] > p,.voc-detail.voc-detail-grid > p"),{voc_tn:o,voc_tc:a,voc_se:i}=e,{config:{rtim:{service:s,webtype:c}={},vam:{options:{posicion_desktop:l={},posicion_mobile:d={}}={},pageType:f=""}={}}={}}=e.vocento,{layer_inpage:m=!1}=l,{layer_inpage:u=!1}=d,p=[a,f,c];if(t=b?u||m:m||u,r(JSON.stringify({soyMovil:b,voc_tn:o,voc_tc:a,voc_se:i,webtype:c,pageType:f}),n),n.length>=2&&"object"===w(t)){let{desactivadoen:e=[]}=t;r(JSON.stringify({desactivadoen:e}));for(let t of p)if(e.indexOf(t)>-1)return!1;return!0}return!1}catch(e){s(e)}return!1},T=()=>{if(e.googletag&&e.googletag.pubads){let t,n=["pos"],o=["intext","layer_inpage"];try{t=e.googletag.pubads().getSlots()}catch(e){t=[]}for(let e of t)for(let t of n){let n=e.getTargeting(t).pop();if(o.indexOf(n)>-1)return!0}}return!1},N=()=>!1,E=()=>!(e.document.querySelector('ev-engagement[group-name="paywall-abc"]')||e.document.querySelector("div[data-voc-pw-premium]")||e.document.querySelector("div[data-voc-pw-limit-exceeded]"))||e.document.querySelector('[data-voc-vam-position="layer_inpage"]')||e.document.querySelector("aside.layer_inpage")?e.document.querySelector("div[data-voc-pw-premium]")?(r("Contenido exclusivo, no se pasan segmentos de outstream"),!0):!!e.document.querySelector("div[data-voc-pw-limit-exceeded]")&&(r("Alcanzado limite, no se pasan segmentos de outstream"),!0):(e.document.querySelector("div[data-voc-pw-limit-exceeded]")?r("Alcanzado limite, no se pasan segmentos de outstream"):r("Es paywall, no se pasan segmentos de outstream"),!0),L=(e,t)=>{let n=t,o=Object.keys(n);if("gamvideo"===e){let e=o.map((e=>`${e}=${n[e].join()}`));return e=e.join("&"),encodeURIComponent(e)}if("gamvideohb"===e){let e={};return o.map((t=>{e[t]=n[t].join()})),e}if("smart"===e){return o.map((e=>`${e}=${n[e].join()}`)).join(";")}if("richaudience"===e){return o.map((e=>{let t=[];return n[e].map((n=>{t.push(`${e}=${n}`)})),t.join(";")})).join(";")}return n},M=e=>"addon"===e?function(t,n={},...o){n.page||(n.page={});let i=n.page.type;["noticia","fotogaleria","video","otros"].indexOf(i)>-1&&!n.page.classifications_watson&&(n.page.classifications_watson={categories:"$alchemy_taxonomy",keywords:"$alchemy_keywords",sentiment:"$alchemy_document_sentiment"}),v.length>0&&(v=[]),a(`Llamando a __wmass.dmp.${e} con argumentos`,[t,n,...o]),c[e].apply(null,[t,n,...o])}:"identify"===e?function(t=[],...n){let o=w(t);("array"===o||"string"===o)&&t.length>0&&(a(`Llamando a __wmass.dmp.${e} con argumentos`,[t,...n]),c[e].apply(null,[t,...n]))}:function(){a(`Llamando a __wmass.dmp.${e} con argumentos`,arguments),c[e].apply(null,arguments)},D=(e,n={})=>{let o="string"===w(e);if(o&&(e=n.useNs?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)),null!=typeof n)for(let o in n)if("string"===w(o)){let a=n[o],i=w(a);switch(o){case"T":e.appendChild(document.createTextNode(a));break;case"com":e.appendChild(document.createComment(a));break;case"Ct":e.style.cssText=a;break;case"Cn":if("string"===i||"array"===i){let t,n=[];if("string"===i?t=[a]:"array"===i&&(t=a),"array"===w(t))for(let e of t)"string"===w(e)&&("."===e.charAt(0)&&(e=e.substr(1)),n.push(e));n.length>0&&e.classList.add(...n)}break;case"H":e.innerHTML=a;break;case"St":t.attachEvent&&!t.opera?e.styleSheet.cssText=a:D(e,{T:a});break;default:"useNs"!==o&&(n.useNs?e.setAttributeNS(null,o,a):e.setAttribute(o,a))}}if(o)return e},I=(n,o,s,l,d)=>{if(!e.__wmass.dmp){if((k.indexOf("abc.es")>-1||k.indexOf("sevilla.abc.es")>-1||k.indexOf("burgosconecta.es")>-1||k.indexOf("canarias7.es")>-1||k.indexOf("codigounico.com")>-1||k.indexOf("eldiariomontanes.es")>-1||k.indexOf("diariosur.es")>-1||k.indexOf("diariovasco.com")>-1||k.indexOf("elbierzonoticias.com")>-1||k.indexOf("elcomercio.es")>-1||k.indexOf("elcorreo.com")>-1||k.indexOf("hoy.es")>-1||k.indexOf("ideal.es")>-1||k.indexOf("larioja.com")>-1||k.indexOf("laverdad.es")>-1||k.indexOf("lavozdigital.es")>-1||k.indexOf("lasprovincias.es")>-1||k.indexOf("leonoticias.com")>-1||k.indexOf("mujerhoy.com")>-1||k.indexOf("elnortedecastilla.es")>-1||k.indexOf("xlsemanal.com")>-1||k.indexOf("pre-www.relevo.com")>-1||k.indexOf("relevo.com")>-1)&&e.__wmass.bff.push(A),"string"===w(s)&&s.length>0&&"string"===w(l)&&l.length>0){i(`cargando dmp projectId: ${s}, key: ${l}`),"object"!==w(u)&&(u={}),e.__wmass.dmp=e.__wmass.dmp||{};let n=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"],a=/.*\.html$/.test(O),f=!0;if(!e[o]){e[o]={},c=e[o],c.q=[],c.config=d||{},c.config.projectId=s,c.config.apiKey=l,c.config.environment=c.config.environment||"production","permutive"!==o&&(y=`${o}_papns`,c.config.stateNamespace=o);for(let e of n)c[e]=function(e){return function(){let t=Array.prototype.slice.call(arguments,0);c.q.push({functionName:e,arguments:t})}}(e)}window.localStorage.getItem(y)&&(f=!1,(a&&m%4>0||!a&&m%3==0)&&(f=!0)),f?(r(`iniciando permutive; isN:${a}; ab:${m}`),((e="about:blank",n="asyncScript",o=t)=>{let a=D("script",{src:e,async:"async",Cn:[n]});(o.document.body||o.document.head).appendChild(a)})(`https://cdn.permutive.com/${s}-web.js`)):r(`throttling permutive; isN:${a}; ab:${m}`);for(let t of n)!e.__wmass.dmp[t]&&c[t]&&(e.__wmass.dmp[t]=M(t))}e.__wmass.dmp.ready((function(){a("permutive initialised")}),"initialised"),e.__wmass.dmp.ready((function(){a("permutive realtime")}),"realtime")}},q=()=>!1,A=()=>{let t=((t=!1)=>{try{let n=null;return!1!==t&&(e.localStorage?n=e.localStorage.getItem(t):navigator.cookieEnabled&&(n=h(t))),n}catch(e){}return null})(g),n=t=>{let{data:a,origin:i,source:s}=t;"https://wemass.io"===i&&(e.removeEventListener("message",n),o(a),r.parentNode.removeChild(r))},o=t=>{((t,n)=>{try{if(e.localStorage)e.localStorage.setItem(t,n);else{if(!navigator.cookieEnabled)return!1;x(n,"X",t)}}catch(e){}})(g,t),a(`UniqueId: ${t}`),__wmass.dmp.identify([{id:t,tag:"wmssId"}])},i="_wmss_messenger",r=D("iframe",{src:"about:blank",id:i,name:i,scrolling:"no",border:"no",src:"https://wemass.io/messenger",Ct:"width:0px;height:0px;border:0px;"});t?o(t):(e.addEventListener("message",n),document.body.appendChild(r))},P=()=>{if(i("permisos suficientes obtenidos o no habia CMP. Iniciando"),I(e.document,"permutive","28986622-e6be-473d-9a8f-e603a25f3c66","390f11db-6eea-42eb-9ef9-4d27b1bb2bab",u),"array"===w(e.__wmass.bff)&&e.__wmass.bff.length>0){a("Ejecutando funciones en el buffer");for(let t of e.__wmass.bff)"function"===w(t)&&t()}"object"!==w(e.__wmass.bff)&&(e.__wmass.bff={push:function(e){"function"===w(e)&&e()}})},W=(e={},t={},n=!1)=>{let o=!0,a=w(n);for(let i in e)t.hasOwnProperty(i)&&!0===t[i]?e[i]=t[i]:o=!1,!1===o&&"object"===a&&!0===n[i]&&(e[i]=n[i],o=!0);return!1===o&&s("Consentimiento insuficiente. Obtenido:",e),o},B={getVendorConsents:e=>{try{let t,n=!0,{purposeConsents:o}=e;t=!n||W({1:!1,2:!1,3:!1,5:!1},o),!0===t&&P()}catch(e){s(e)}}},F={addEventListener:(t,n)=>{if(n){let n,o=!0,{eventStatus:a,listenerId:r,purpose:{consents:s={},legitimateInterests:c={}}={}}=t;i(`Evento DMP purposes: ejecutado. Status: ${a}`),"tcloaded"!==a&&"useractioncomplete"!==a||(n=!o||W({1:!1,3:!1,4:!1,7:!1,10:!1},s),n&&(P(),e.__tcfapi("removeEventListener",2,(e=>{e&&i("Evento DMP purposes eliminado")}),r)))}}},J={milis:!1,callback:P};e.__wmass.bff||(e.__wmass.bff=[]),(({cmpCallbackTcf1:t={},cmpCallbackTcf2:n={},cmpTimeout:o={}})=>{let{milis:a=!1,callback:r}=o,c=w(r);if(e.__cmp||e.__tcfapi){if(e.__wmass.consentData||(e.__wmass.consentData={}),j=e.__wmass.consentData,e.__tcfapi)if(i("TCF v2 CMP detectado"),C=2,"object"===w(n)){if(!j.getTCData){let t=(t,n)=>{n&&(i(`TCF v2 generic eventListener ejecutado. Estatus: ${t.eventStatus}`),("tcloaded"===t.eventStatus||"useractioncomplete"===t.eventStatus)&&"string"===w(t.tcString)&&t.tcString.length>0&&(i(`TCF v2 generic eventListener tcdataString disponible: ${t.tcString}`),j.getTCData=t,e.__tcfapi("removeEventListener",2,(e=>{e&&i("TCF v2 generic eventListener event removed")}),t.listenerId)))};e.__tcfapi("addEventListener",2,t)}for(let t in n){let o=n[t],a=w(o);"function"===a?e.__tcfapi(t,2,o):s(`tcfversion 2 callback para ${t} es de tipo  ${a} se esperaba una funcion`)}}else s("Wemass CMP module required, tcfversion 2 detected but no cmpCallbackTcf2 set");else if(e.__cmp)if(i("TCF v1 CMP detectado"),C=1,"object"===w(t)){j.getConsentData||e.__cmp("getConsentData",null,(e=>{j.getConsentData=e})),j.getVendorConsents||e.__cmp("getVendorConsents",null,(e=>{j.getVendorConsents=e}));for(let n in t){let o=t[n],a=w(o);"function"===a?e.__cmp(n,null,o):s(`tcfversion 1 callback para ${n} es de tipo  ${a} se esperaba una funcion`)}}else s("Wemass CMP module required, tcfversion 1 detected but no cmpCallbackTcf1 set");0!=a&&"number"===w(a)&&(o.timer=setTimeout(r,a))}else"function"===c&&r()})({cmpCallbackTcf1:B,cmpCallbackTcf2:F,cmpTimeout:J})}();