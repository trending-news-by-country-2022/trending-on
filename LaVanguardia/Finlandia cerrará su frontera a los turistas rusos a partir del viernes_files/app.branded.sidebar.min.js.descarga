var DRTRelateds_debug=window.DRTOptimize_config["debug"];var DRTRelateds_brl_inifito_enable=false;var DRTRelateds=DRTRelateds||{};DRTRelateds=(function(){var initiated=false;function trackEvent(c,a,l){var data={"event":c,"eventAction":a,"eventLabel":l,"eventValue":null};dataLayer.push(data);if(DRTRelateds_debug){console.log("DRTRelateds GA",data);}}function trackGravity(data){_gravity.push(data);}function getVersion(){var date=new Date();return date.getFullYear()+"-"+date.getMonth()+"-"+date.getDate()+"-"+date.getHours();}function getWidth(){var xWidth=null;if(window.screen!==null){xWidth=window.screen.availWidth;}if(window.innerWidth!==null){xWidth=window.innerWidth;}if(document.body!==null){xWidth=document.body.clientWidth;}return xWidth;}function getHeight(){return Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);}function isPhone(){if(getWidth()<768){return true;}return false;}function isTablet(){var width=getWidth();if(width>=768&&width<1025){return true;}return false;}function isSmall(){if(getWidth()<768){return true;}return false;}function getRandomInt(min,max){return Math.floor(Math.random()*(max-min))+min;}function v1(article,color){var html="";html+='<div class="widget-branded v1 wc-branded '+color+'">';html+='<div class="widget-branded-header">';html+='<a class="widget-branded-link" title="BrandsLab" href="http://www.lavanguardia.com" target="_blank"><img src="https://static.lavanguardia.com/images/brandslab-label.png" /></a>';html+="</div>";html+='<div class="widget-branded-content">';html+='<div class="widget-branded-row">';html+='<div class="widget-branded-img">';html+='<figure class="img-aspect img-aspect--2_3" data-href="'+article.url+'">';html+='<img src="'+article.image+'" />';html+="</figure>";html+="</div>";html+='<div class="widget-branded-headline">';if(article.epigraph){html+='<span class="widget-branded-epigraph">'+article.epigraph+"</span>";}html+='<a class="widget-branded-link" href="'+article.url+'" target="_blank">'+article.headline+"</a>";html+="</div>";html+="</div>";html+="</div>";html+="</div>";return html;}function v2(article,color){var html="";html+='<div class="widget-branded v2 wc-branded '+color+'">';html+='<div class="widget-branded-content">';html+='<div class="widget-branded-row">';html+='<div class="widget-branded-img">';html+='<figure class="img-aspect img-aspect--2_3" data-href="'+article.url+'">';html+='<img src="'+article.image+'" />';html+="</figure>";html+="</div>";html+='<div class="widget-branded-header">';html+='<span class="widget-branded-epigraph">'+article.epigraph+"</span>";html+="</div>";html+='<div class="widget-branded-headline">';html+='<a class="widget-branded-link" href="'+article.url+'" target="_blank">'+article.headline+"</a>";if(article.author){html+='<span class="widget-branded-author">'+article.author+"</span>";}html+="</div>";html+="</div>";html+="</div>";html+="</div>";return html;}function buildBranded($parent,articles){if(articles&&articles.length>0){var article=articles[0];if(articles.length>1){article=articles[getRandomInt(0,articles.length)];}var r=getRandomInt(0,4);var $element=false;if($parent.find(".sidebar-dynamic").find(".wc-branded").length==0){$element=$parent.find(".sidebar-dynamic").find(".sticky-box").first();}if($element){var version="v2";$element.after(v2(article,"v-grey"));setTimeout(function(){trackEvent("layout","impression-brandslab",version);$parent.find(".wc-branded .widget-branded-headline a").on("click auxclick contextmenu",function(e){trackEvent("layout","modulo-brandslab",version);});},0);}}}function start(){$.ajax({url:"https://stories.lavanguardia.com/especial/feeds/LaVanguardia/spreadsheet/branded.jsonp",dataType:"jsonp",jsonpCallback:"callbackBranded",data:{"version":getVersion()},cache:true}).done(function(json){try{buildBranded($("body"),json.data);if(DRTRelateds_brl_inifito_enable){document.addEventListener("infiniteScrollChangeUrl",function(event){buildBranded($(event.articleContainer),json.data);});}}catch(e){}}).fail(function(jqxhr,textStatus,error){});}function init(){if(typeof jQuery!="undefined"){if(!initiated){initiated=true;$(document).ready(function(){if(DRTRelateds_debug){console.log("DRTRelateds init");}start();});}}else{window.setTimeout(init,50);}}return{init:init};}());DRTRelateds.init();