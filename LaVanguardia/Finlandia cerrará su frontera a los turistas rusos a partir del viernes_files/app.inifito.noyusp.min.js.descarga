window.APP_DRT_GALLERY=window.APP_DRT_GALLERY||{},window.APP_DRT_GALLERY_DEBUG=window.DRTOptimize_config.debug,window.APP_DRT_GALLERY_ENABLE_ADS=!0,window.APP_DRT_GALLERY_MIN_IMAGES=3,window.APP_DRT_GALLERY_MOBILE_ADS=3,window.APP_DRT_GALLERY_VERSION="007",window.APP_DRT_ENABLE_INSTAGRAM=!0,window.APP_DRT_ENABLE_TWITTER=!1,window.APP_DRT_ENABLE_YOUTUBE=!0,window.APP_DRT_ENABLE_JWP=!0,window.APP_DRT_ENABLE_INIFITO=!0,window.APP_DRT_GALLERY=function(){"use strict";function a(a,t,e){var i={event:a,eventAction:t,eventLabel:e,eventValue:null};dataLayer.push(i),APP_DRT_GALLERY_DEBUG&&console.log("APP_DRT_GALLERY GA",i)}function t(a,t){!function(a){var t=location.origin+location.pathname.replace(".html","")+"/galeria-foto-"+a;APP_DRT_GALLERY_DEBUG&&console.log("COMSCORE",t),window.COMSCORE&&window.COMSCORE.beacon({c1:"2",c2:"6398301",cs_ucfr:1,c4:t})}(t);var e={event:"virtualPageView",pageName:location.pathname.replace(".html","")+"/galeria-foto-"+t};dataLayer.push(e),APP_DRT_GALLERY_DEBUG&&console.log("APP_DRT_GALLERY GA",e),APP_DRT_GALLERY_ENABLE_ADS&&(i()?a.find("#gdni-main-gallery").find(".gdni-mobile-banner-gallery").html(p):a.find("#gdni-main-gallery").find(".gdni-sidebar").html(u),setTimeout(function(){godo.ads.push(function(a){a.display("[data-ad-gallery='gallery']")})},10))}function e(){var a=null;return null!==window.screen&&(a=window.screen.availWidth),null!==window.innerWidth&&(a=window.innerWidth),null!==document.body&&(a=document.body.clientWidth),a}function i(){return e()<768}function n(a){var t='<div id="gdni-main-gallery" class="gdni-main-gallery">';"app"!=function(a){try{a=a.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)").exec(window.location.href);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}catch(a){return null}}("facet")?(t+='<div class="gdni-header-gallery">',t+='<img class="gdni-header-gallery-logo" src="https://www.lavanguardia.com/rsc/images/lv-logo.svg" />',t+='<header class="gdni-header-gallery-title">',t+=a,t+="</header>",t+='<div class="gdni-header-gallery-buttons"><button class="gdni-header-gallery-button gdni-header-gallery-close"><i class="fa fa-times"></i> <span>Cerrar</span></button></div>',t+="</div>"):t+='<div class="gdni-header-gallery-buttons-app"><button class="gdni-header-gallery-button gdni-header-gallery-close"><i class="fa fa-times"></i></button></div>',t+='<div class="gdni-gallery">';var e="";return APP_DRT_GALLERY_ENABLE_ADS&&(e="gdni-fotorama-container-ads"),t+='<div class="gdni-fotorama-container '+e+'">',t+='<div class="fotorama" data-auto="false" data-width="100%" data-nav="false" data-captions="false" data-stopautoplayontouch="false" data-autoplay="'+c+'" data-hash="true" data-loop="true"></div>',t+='<div class="gdni-caption-gallery"></div>',t+="</div>",APP_DRT_GALLERY_ENABLE_ADS&&(t+='<div class="gdni-sidebar"></div>'),t+="</div>",t+="</div>"}function o(a,e,i){if(a.find("#gdni-main-gallery").length>0)return a.find("#gdni-main-gallery").show(),a.find(".fotorama").data("fotorama").show(parseInt(i)),a.find(".fotorama").data("fotorama").startAutoplay(c),void(0==i&&t(a,i+1));a.append(n(a.find("h1").text())),setTimeout(function(){a.find(".fotorama").attr("data-maxheight",a.find(".gdni-gallery").height()-20),a.find(".fotorama").attr("data-height",a.find(".gdni-gallery").height()-20),a.find(".fotorama").on("fotorama:show",function(i,n,o){if(t(a,n.activeIndex+1),a.find(".gdni-caption-gallery").text(n.activeIndex+1+"/"+e.length+" · "+n.activeFrame.caption),APP_DRT_ENABLE_INSTAGRAM)try{window.instgrm.Embeds.process()}catch(i){}if(APP_DRT_ENABLE_TWITTER)if(window.twttr&&twttr.widgets)twttr.widgets.load();else{var d=document.createElement("script");d.onload=function(){window.twttr&&twttr.widgets&&twttr.widgets.load()},d.src="//platform.twitter.com/widgets.js",document.head.appendChild(d)}}),a.find(".fotorama").fotorama({data:e}),a.find(".gdni-header-gallery-close").click(function(){a.find("#gdni-main-gallery").hide(),a.find(".fotorama").data("fotorama").stopAutoplay()}),i>0&&a.find(".fotorama").data("fotorama").show(parseInt(i));var n=window.location.hash;n&&-1!=n.indexOf("foto")||(window.location.hash="#foto-1")},500)}function d(t,e,n){if(e.css("position","relative"),e.append('<div class="gdni-show-gallery-wrapper"><button class="gdni-show-gallery"><span><i class="fas fa-camera"></i></span></button></div>'),t.find(".gdni-show-gallery-wrapper").on("click auxclick",function(e){g||($("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:"https://stories.lavanguardia.com/especial/xalok/fotorama/css/fotorama.css"}),$("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:"https://stories.lavanguardia.com/especial/xalok/fotorama/css/gallery.css?v="+APP_DRT_GALLERY_VERSION}),g=!0),a("layout","button-gallery","open-image"),o(t,n,0)}),!i()){var d=1;t.find(".article-content").find(".composite-image.image-container").each(function(){$(this).attr("data-drt-fotorama",d),d++}),t.find(".article-content").find(".composite-image.image-container").on("click auxclick",function(e){a("layout","button-gallery","body-image"),o(t,n,$(this).attr("data-drt-fotorama"))})}}function r(a){var t=function(a){var t=[],e=0,n=APP_DRT_GALLERY_MOBILE_ADS-1;return a.find(".composite-image.image-container,video[data-source='youtube'],video[data-source='jwplatform'],blockquote.instagram-media,blockquote.twitter-tweet,div.youtube-embed").each(function(){var a=$(this),o=$(this).prop("tagName");if("FIGURE"==o)(d=function(a,t){var e=a.find("figcaption").text(),i=a.find("img").attr("data-full-src");return i||a.find("img").attr("data-src"),i||a.find("img").attr("src"),i?{id:"foto-"+(t+1),caption:e,img:i}:null}(a,t.length))&&t.push(d);else if("VIDEO"==o&&"youtube"==a.attr("data-source")&&APP_DRT_ENABLE_YOUTUBE)(d=function(a,e){return{id:"foto-"+(t.length+1),caption:"Youtube",video:a.attr("href")}}(a))&&t.push(d);else if("VIDEO"==o&&"jwplatform"==a.attr("data-source")&&APP_DRT_ENABLE_JWP)(d=function(a,t){var e=a.parent().prev().find("img").attr("data-src");return e?{id:"foto-"+(t+1),caption:"La Vanguardia",video:"https://cdn.jwplayer.com/players/"+a.attr("video-id")+"-"+a.attr("data-player-id")+".html",img:e}:{id:"foto-"+(t+1),caption:"La Vanguardia",video:"https://cdn.jwplayer.com/players/"+a.attr("video-id")+"-"+a.attr("data-player-id")+".html"}}(a,t.length))&&t.push(d);else if("BLOCKQUOTE"==o&&a.hasClass("instagram-media")&&APP_DRT_ENABLE_INSTAGRAM)(d=function(a,e){return{id:"foto-"+(t.length+1),caption:"Instagram",html:a.parent().html()}}(a))&&t.push(d);else if("BLOCKQUOTE"==o&&a.hasClass("twitter-tweet")&&APP_DRT_ENABLE_TWITTER)(d=function(a,t){var e=a.parent();return e.find("script").remove(),{id:"foto-"+(t+1),caption:"Twitter",html:e.html()}}(a,t.length))&&t.push(d);else if("DIV"==o&&a.hasClass("youtube-embed")){var d=function(a,e){return{id:"foto-"+(t.length+1),caption:"Youtube",video:"https://www.youtube.com/watch?v="+a.attr("id")}}(a);d&&t.push(d)}APP_DRT_GALLERY_ENABLE_ADS&&i()&&e%APP_DRT_GALLERY_MOBILE_ADS==n&&t.push({id:"foto-"+(t.length+1),caption:"Publicidad",html:'<div class="gdni-mobile-banner-gallery"></div>'}),e++}),console.log("images",t),t}(a),e=a.find(".article-media-main").find(".image-container picture");if(t&&t.length>APP_DRT_GALLERY_MIN_IMAGES&&e.length>0)if(f)d(a,e,t);else{$("head").append('<style>.gdni-show-gallery-wrapper{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-content:center;align-items:center}.gdni-show-gallery{display:inline-block;font-weight:400;color:#333;text-align:center;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#ffffffd4;border-color:#ffffffd4;border-radius:.25rem;border-width:1px;padding:8px 12px}.gdni-show-gallery span{font-size:30px;line-height:30px;font-family:sans-serif;font-weight:700;display:flex;flex-direction:row;justify-content:center;align-content:center;align-items:center}.gdni-show-gallery span:after{display:block;font-family:sans-serif;line-height:0;font-weight:700;padding-left:5px;font-size:14px;line-height:0;content:"VER IMÁGENES"}@media (max-width: 767px){.gdni-show-gallery span{font-size:20px;line-height:20px}}</style>');var n=document.createElement("script");n.async=!0,n.defer=!0,n.onload=function(){d(a,e,t);var i=window.location.hash;i&&i.indexOf("foto")>-1&&e.find(".gdni-show-gallery-wrapper").click(),f=!0},n.src="https://stories.lavanguardia.com/especial/xalok/fotorama/js/fotorama.js",document.head.appendChild(n)}}function l(){"undefined"!=typeof jQuery?s||(s=!0,$(document).ready(function(){APP_DRT_GALLERY_DEBUG&&console.log("APP_DRT_GALLERY init"),r($("body").find(".main-article-container ").first()),APP_DRT_ENABLE_INIFITO&&document.addEventListener("infiniteScrollChangeUrl",function(a){r($(a.articleContainer))})})):window.setTimeout(l,50)}var s=!1,c=1e4,f=!1,g=!1,u="<div class='gdni-banner-gallery'><ins data-ad-gallery='gallery' data-ad-type='roba-galeria' data-ad-name='roba-galeria' data-ad-device='md' data-ad-sizes='[\"fluid\",[300,250],[300,300],[300,600],[320,300]]' data-ad-keys='{}' data-ad-lazy='true'></ins></div>",p="<div class='gdni-banner-gallery'><ins data-ad-gallery='gallery' data-ad-type='roba-galeria' data-ad-name='roba-galeria' data-ad-device='xs' data-ad-sizes='[\"fluid\",[300,250],[300,300],[300,600],[320,300]]' data-ad-keys='{}' data-ad-lazy='true'></ins></div>";return{init:l}}(),window.APP_DRT_GALLERY.init();